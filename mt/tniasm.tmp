zw.asm1 76 80MEMOTECH: EQU 182 85CPM: EQU 087 90PROGRAMADOR: EQU 092 98 105 if MEMOTECH=1106 111 if CPM=1112 FNAME "ZOMBNEAR.COM"113 ORG $0100114 FORG $0000115 else116 FNAME "ZOMBNEAR.RUN"117 ORG $40fc118 FORG $0000120 dw inicio_rom121 dw final_rom-inicio_rom122 endif124 else125 130 FNAME "ZOMBNEAR.COM"131 ORG $0100132 endif134VDP: equ MEMOTECH*$01+(NOT MEMOTECH AND 1)*$08 135CTC: equ MEMOTECH*$08+(NOT MEMOTECH AND 1)*$28 136PSG: equ MEMOTECH*$06+(NOT MEMOTECH AND 1)*$02 137KEYSEL: equ $05 138KEY1: equ $05 139KEY2: equ $06 141inicio_rom:142 JP INICIO 144 db 0,0,0,0,0146 if memotech=1147 dw vector_nmi148 dw vector_nulo149 dw vector_nulo150 dw inicio_rom151 else152 dw 0153 dw 0154 dw 0155 dw 0156 endif158 DB "ZOMBIE NEAR     "159 DB "(c) Copyright   "160 DB "2011-2012 Oscar "161 DB "Toledo G.       "162 DB "Translated from "163 DB "Colecovision to "164 IF memotech=1165 DB "Memotech MTX-512"166vector_nulo:167 ei168 reti169 ELSE170 DB "Tatung Einstein "171 ENDIF174colores_pantalla_pc:175 db $fc176 db $f2177 db $f3178 db $f2180tabla_monigotes:181 dw zombie5_izq 182 dw zombie5_der 183 dw pascua 184 dw jefe 185 dw chica 186 dw entrada3 187 dw zombie4 188 dw zombie1_aba 189 dw zombie1_arr 190 dw vida 191 dw entrada2 192 dw zombie3_izq 193 dw zombie3_der 194 dw zombie3_arr 195 dw zombie3_aba 196 dw llave 197 dw cientifico 198 dw cientifica 199 dw mancha 200 dw esqueleto 201 dw mano_suelta 202 dw zombie1_izq 203 dw zombie1_der 204 dw zombie2_izq 205 dw zombie2_der 206 dw zombie2_arr 207 dw zombie2_aba 208 dw entrada1 213mueve_monstruos.15:214 dw mueve_monstruos.4 215 dw mueve_monstruos.8 216 dw mueve_monstruos.12 217 dw mueve_monstruos.17 218 dw mueve_monstruos.2 219 dw mueve_monstruos.9 220 dw mueve_monstruos.22 221 dw mueve_monstruos.13 222 dw mueve_monstruos.16 223 dw mueve_monstruos.14 224 dw mueve_monstruos.20 225 dw mueve_monstruos.25 226 dw mueve_monstruos.26 227 dw mueve_monstruos.28 228 dw mueve_monstruos.30 229 dw mueve_monstruos.36 230 dw mueve_monstruos.42 232 235dir_pantalla_pc:236 dw $224a237 dw $224b238 dw $2a4a239 dw $2a4b240 dw $324a241 dw $324b242 dw $324a243 dw $324b245 250WRTVDP:251 ld a,b252 out (VDP+1),a253 ld a,c254 or $80255 out (VDP+1),a256 ret258 263RDVRM: ld a,l264 out (VDP+1),a265 ld a,h266 and $3f267 out (VDP+1),a268 push af 269 pop af 270 ex (sp),hl 271 ex (sp),hl 272 in a,(VDP)273 ret275 280WRTVRM: push af281 call SETWRT 282 ex (sp),hl 283 ex (sp),hl 284 pop af 285 out (VDP),a286 ret 288 292SETWRT:293 ld a,l294 out (VDP+1),a295 ld a,h296 or $40297 out (VDP+1),a298 ret300 306FILVRM:307 PUSH AF308 call SETWRT 309.1: POP AF 310 OUT (VDP),A311 PUSH AF 312 DEC BC 313 LD A,B 314 OR C 315 JP NZ,.1 316 POP AF317 RET319 325LDIRVM:326 EX DE,HL327 call SETWRT 328.1: LD A,(DE) 329 OUT (VDP),A330 INC DE 331 DEC BC 332 LD A,B 333 OR C 334 JP NZ,.1 335 RET337vdp_copia_bloque:338 OUTI 339 NOP 340 NOP 341 JP NZ,$-4 342 RET344 349mensajito:350 ex de,hl351 ex (sp),hl352 ex de,hl353.0: ld a,(de)354 call WRTVRM355 inc hl356 inc de357 ld a,(de)358 inc a359 jr nz,.0360 inc de361 ex de,hl362 ex (sp),hl363 ex de,hl364 ret366 369checa_camino:370 ld d,0371 ld hl,caminable 372 ld a,e373 srl e 374 srl e375 add hl,de376 ld e,a377 and 3 378 inc a379 ld d,a380 ld a,(hl) 381.1: rlca 382 rlca383 dec d384 jp nz,.1385 rrca386 ret388 391MAX_MONIGOTES: equ 12393 396d_x: equ 0 397d_y: equ 1 398d_sprite: equ 2 399d_color: equ 3 400d_recarga: equ 4 401d_nivel: equ 5 402d_velocidad: equ 6 403d_energia: equ 7 404d_dx: equ 4 405d_dy: equ 5 406d_paso: equ 8 407d_tipo: equ 9 408d_ultimo: equ 10 409d_offset: equ 12 410d_refx: equ 14 411d_refy: equ 15 412d_real: equ 16 413d_moni: equ 18 414d_vidas: equ 20 415d_espera: equ 21 416d_basex: equ 22 417d_basey: equ 23 418d_puntos: equ 24 419d_objeto: equ 27 428d_trans: equ 28 429d_tiempo: equ 30 430d_mapa: equ 32 431d_estado: equ 34 432d_rescatados: equ 35 433d_temblor: equ 36 434d_dirtem: equ 37 435d_linea: equ 38 436d_puerta: equ 40 437d_mosaico: equ 42 438d_seccion: equ 43 443d_revivir: equ 44 445BASE_MOS: equ $38 447espera_int:448 if memotech=1449 halt450 else 451 push af452 in a,(VDP+1)453 nop454 in a,(VDP+1)455 bit 7,a456 jr z,$-4457 call vector_nmi458 pop af459 endif460 ret462tabla_modo_2:463 DB $02 464 DB $82 465 DB $0E 466 DB $FF 467 DB $03 468 DB $76 469 DB $03 470 DB $01 472 475inicio:476 di477 480 ld sp,pila481 485 if memotech=1486 if cpm=1487 ld hl,$9faf488 else489 ld hl,$dfaf490 endif491 else492 ld hl,$9faf493 endif494.2: ld (hl),0495 dec hl496 bit 2,h497 jr nz,.2498 501 call inicia_sonido502 di503 im 2504 if memotech=1505 ld a,inicio_rom>>8506 else507 ld a,$01508 endif509 ld i,a510 ld a,$03 511 out (CTC+0),a512 out (CTC+1),a513 out (CTC+2),a514 out (CTC+3),a515 out (CTC+0),a516 out (CTC+1),a517 out (CTC+2),a518 out (CTC+3),a519 ld a,$08 520 out (CTC+0),a521 if MEMOTECH=1522 ld a,$25 523 out (CTC+2),a524 ld a,$9c 525 out (CTC+2),a526 ld a,$25 527 out (CTC+1),a528 ld a,$9c 529 out (CTC+1),a530 ld a,$c5 531 out (CTC+0),a532 ld a,$01 533 out (CTC+0),a534 in a,(VDP+1)535 ld hl,.1536 push hl537 ei538 reti539 else540 in a,(VDP+1)541 di542 endif544 547.1: call vdp_modo_2548 551 ld hl,$0658552 ld de,mensaje_14553 ld c,$a1554 call visual_mensaje1555 ld hl,$0860556 ld bc,$0840557 ld de,logo_mio558 call descompacta_rle_imagen559 ld bc,300560 call retardo561 ld hl,musica562 ld de,$3b80563 call unpack564 567REINICIO:568 call presentacion569 ld a,(sprites)570 push af571 call limpia_sprites572 call espera_int573 call pantalla_negra574 577 xor a578 ld (modo),a579 582 call zona_dura583 ld hl,$3800584 ld bc,$0300585 xor a586 call FILVRM587 591 ld hl,letras592 ld de,$0000593 ld bc,$01a8594 call repetir595 call zona_facil596 ld hl,color_letras597 ld d,$20598 call repetir2599 602 ld hl,graf_bitmap603 ld de,$01c0604 ld bc,1600605 call repetir2606 ld hl,graf_color607 ld d,$21608 call repetir2609 612 call espera_int613 616 pop af617 cp $78 618 ld hl,jug_fuera619 jr z,$+5620 ld hl,jug1_inicial621 ld de,jug1622 ld bc,45623 ldir624 cp $69 625 ld hl,jug_fuera626 jr z,$+5627 ld hl,jug2_inicial628 ld c,45629 ldir630 ld hl,bits1631 ld b,102 632 ld (hl),0633 inc hl634 djnz $-3635 638 ld a,5 639 ld (modo),a640 646 call musica_general647 650 if 0 651 ld hl,$3800652 ld a,0653.1001: ld b,16654.1000: push bc655 push hl656 push af657 call dibuja_mosaico658 pop af659 pop hl660 pop bc661 inc a662 inc hl663 inc hl664 djnz .1000665 ld de,32666 add hl,de667 cp 80668 jr nz,.1001669 jr $670 else671 ld ix,jug1672 call actualiza_indicadores_nivel673 ld ix,jug2674 call actualiza_indicadores_nivel675 if 0676 ld ix,jug1677 jp .15679 682.10: call espera_int683 ld ix,jug1684 out (KEYSEL),a685 ex (sp),hl686 ex (sp),hl687 in a,(JOY1)688 and $0f689 cp $0d690 jr z,.11691 cp $07692 jr z,.12693 cp $0c694 jr z,.13695 cp $02696 jr z,.14697 jr .10699.11: ld bc,5700 call retardo701 ld a,(ix+d_seccion)702 sub $10703 and $30704 ld (ix+d_seccion),a705 ld (ix+d_nivel),0706 jp .15708.12: ld bc,5709 call retardo710 ld a,(ix+d_seccion)711 add a,$10712 and $30713 ld (ix+d_seccion),a714 ld (ix+d_nivel),0715 jp .15717.13: ld bc,5718 call retardo719 dec (ix+d_nivel)720 jp .15722.14: ld bc,5723 call retardo724 inc (ix+d_nivel)725.15: call actualiza_indicadores_nivel726 call espera_int727 call actualiza_sprites728 jp .10730 endif731 734.1: ld hl,ciclo735 inc (hl)736 ld a,(hl)737 sub 6738 jr nz,$+5739 ld (hl),a 740 jr $+6742 call espera_int 743 call actualiza_sprites 744 call maneja_entrada 745 ld ix,jug1746 call avanza_historia 747 ld ix,jug2748 call avanza_historia 755 ld ix,jug1756 ld iy,jug2757 ld a,(ix+d_vidas) 758 or a 759 jp m,.6760 bit 7,(ix+d_objeto) 761 jr z,.5762.6: ld a,(iy+d_vidas) 763 or a 764 jp m,.7765 bit 7,(iy+d_objeto) 766 jr z,.5767.7: ld a,(ix+d_tiempo)768 or (ix+d_tiempo+1)769 or (iy+d_tiempo)770 or (iy+d_tiempo+1)771 jr nz,.5772 ld a,(ix+d_objeto)773 or (iy+d_objeto) 774 jp m,toma_final 775 jp REINICIO 777.5: 778 jr .1 779 endif781 784repetir:785 call .1786 call .1787.1: push bc788 push hl789 push de790 call LDIRVM791 pop de792 ld a,d793 add a,8794 ld d,a795 pop hl796 pop bc797 ret799 802repetir2:803 call .1804 call .1805.1: push bc806 push hl807 push de808 call unpack809 pop de810 ld a,d811 add a,8812 ld d,a813 pop hl814 pop bc815 ret817 825vector_nmi:826 push af827 push bc828 push de829 push hl830 exx831 ex af,af'832 push af833 push bc834 push de835 push hl836 ld hl,modo837 840 in a,(VDP+1) 841 call vector_int842 pop hl843 pop de844 pop bc845 pop af846 ex af,af'847 exx848 pop hl849 pop de850 pop bc851 pop af852 if MEMOTECH=1853 ei854 reti855 else856 ret857 endif859zona_dura:860 if MEMOTECH=1861 di862 endif863 ret865zona_facil:866 if MEMOTECH=1867 ei868 endif869 ret871 881vector_int:882 885 bit 0,(hl) 886 jp z,vector_quieto 887 bit 2,(hl) 888 jp z,vector_presentacion 896 ld bc,sprites_heroes897 ld hl,(sprites_especiales+0)898 add hl,hl899 add hl,hl900 add hl,hl901 add hl,bc902 ex de,hl903 ld hl,(sprites_especiales+2)904 add hl,hl905 add hl,hl906 add hl,hl907 add hl,bc908 ld b,h909 ld c,l910 913 ld hl,$1800914 call SETWRT915 ld h,b916 ld l,c917 ex de,hl918 ld bc,$2000+VDP919 call vdp_copia_bloque920 ex de,hl921 ld b,32922 call vdp_copia_bloque923 926 ld bc,sprites_jefes927 ld hl,(sprites_especiales+4)928 res 4,l929 add hl,hl930 add hl,hl931 add hl,bc932 ex de,hl933 ld hl,(sprites_especiales+6)934 res 4,l935 add hl,hl936 add hl,hl937 add hl,bc938 ld b,h939 ld c,l940 943 ld hl,$1f00944 call SETWRT945 ld h,b946 ld l,c947 ex de,hl948 ld bc,$8000+VDP949 call vdp_copia_bloque950 ex de,hl951 ld b,128952 call vdp_copia_bloque953 956vector_presentacion:957 ld hl,$3B00958 call SETWRT959 ld hl,sprites960 ld bc,$7000+VDP961 call vdp_copia_bloque962 ld hl,modo963 bit 2,(hl) 964 jr z,vector_quieto 965 bit 5,(hl) 966 jr nz,vector_quieto 967 ld hl,dir_pantalla_pc968 ld a,(ticks)969 and 7970 add a,a971 add a,l972 ld l,a973 ld a,(hl)974 inc hl975 ld h,(hl)976 ld l,a977 push hl978 srl h979 rr l980 srl h981 rr l982 srl h983 rr l984 ld a,h985 and $03986 or $38987 ld h,a988 call RDVRM989 cp l990 pop hl991 jr z,vector_quieto992 call SETWRT993 ld a,(ticks)994 and 24995 rrca996 rrca997 rrca998 add a,colores_pantalla_pc and 255999 ld l,a1000 ld h,colores_pantalla_pc>>81001 ld a,(hl)1002 out (VDP),a1003 1006vector_quieto:1007 1008 if 01009 ld a,($0069) 1010 cp 501011 jr z,.11012 ld hl,ciclo1013 inc (hl)1014 ld a,(hl)1015 sub 61016 jr nz,.11017 ld (hl),a 1018 ret1019 endif1021 1024.1: call genera_sonido1025 1028 ld hl,(ticks)1029 inc hl1030 ld (ticks),hl1031 ret1033 1036caracter_negro:1037 LD H,$201038 LD A,$F11039 CALL .01040 LD H,$281041 CALL .01042 LD H,$301043 CALL .01044 LD H,$001045 XOR A1046 CALL .01047 LD H,$081048 CALL .01049 LD H,$101050.0: LD L,01051 LD BC,81052 jp FILVRM1054 1058PANTALLA_NEGRA:1059 call zona_dura1060 call caracter_negro1061 call zona_facil1062 call espera_int1063 LD DE,321064 LD C,32 1068PANTALLA_NEGRA3:1069 LD H,$381070 LD A,321071 SUB C1072 LD L,A1073 LD B,24 1074 XOR A1075PANTALLA_NEGRA2:1076 call WRTVRM1077 ADD HL,DE1078 DJNZ PANTALLA_NEGRA21079 LD A,(ticks)1080 LD B,A1081 call espera_int1082PANTALLA_NEGRA4:1083 LD A,(ticks)1084 CP B1085 JR Z,PANTALLA_NEGRA41086 DEC C1087 JR NZ,PANTALLA_NEGRA31088 1091 call zona_dura1092 call prepara_alta_resolucion1093 JP zona_facil1095 1098carga_retrato:1099 ex de,hl1100 ld bc,$084011011109descompacta_rle_imagen:1110 call zona_dura1111 push bc1112 push hl1113.1: push bc1114 push hl1115 call descompacta_rle_bloque1116 pop hl1117 pop bc1118 inc h1119 djnz .11120 pop hl1121 pop bc1122 set 5,h1123.2: push bc1124 push hl1125 call descompacta_rle_bloque1126 pop hl1127 pop bc1128 inc h1129 djnz .21130 jp zona_facil1132 1147descompacta_rle_bloque:1148 call SETWRT1149.1:1150 LD A,(DE) 1151 INC DE1152 OR A1153 JP P,.2 1154 CPL 1155 LD B,A1156 LD A,(DE)1157 INC DE1158.3:1159 OUT (VDP),A 1160 DEC C 1161 PUSH AF 1162 POP AF 1163 DJNZ .3 1164 JP NZ,.1 1165 ret1167.2: CP $401168 jp c,.81169 and $3f1170 rra1171 ld b,a1172 sbc a,a1173 inc b1174 jr .31176.8: LD B,A1177.4:1178 LD A,(DE) 1179 INC DE 1180 OUT (VDP),A 1181 NOP 1182 DEC C 1183 DJNZ .4 1184 JP NZ,.1 1185 ret1187 1190visual_mensaje_idioma:1191 LD C,$A1 1197VISUAL_MENSAJE1:1198 call zona_dura1199.1: PUSH HL1200 CALL VISUAL_LINEA 1201 POP HL1202 INC H 1203 rlca 1204 jr nc,.1 1205 jp zona_facil1207 1216VISUAL_LINEA:1217 ld a,(de)1218 INC DE1219 push af1220 and $3f1221 CP $3e1222 CALL NC,deriva_numero1223 CALL VISUAL_LETRA1224 pop af1225 cp $401226 ret nc1227 jr VISUAL_LINEA1229 1232deriva_numero:1233 ld a,(ix+d_rescatados)1234 jr nz,.1 1235 rrca 1236 rrca1237 rrca1238 rrca1239.1: and $0f1240 add a,$20 1241 ret1243 1249VISUAL_LETRA:1250 PUSH DE1251 PUSH HL1252 PUSH BC1253 EX DE,HL1254 LD L,A1255 LD H,01256 ADD HL,HL1257 ADD HL,HL1258 ADD HL,HL1259 LD BC,LETRAS1260 ADD HL,BC1261 LD BC,81262 CALL LDIRVM 1263 POP BC1264 POP HL1265 1268 PUSH HL1269 SET 5,H1270 LD A,$F1 1271 call WRTVRM1272 INC HL1273 LD B,51274 LD A,C1275 OR $10 1276VISUAL_LETRA2:1277 call WRTVRM1278 INC HL1279 DJNZ VISUAL_LETRA21280 LD A,C 1281 call WRTVRM1282 INC HL1283 call WRTVRM1284 SRL H1285 RR L1286 SRL H1287 RR L1288 SRL H1289 RR L1290 LD DE,$3800-$0400 1291 ADD HL,DE1292 LD A,L1293 call WRTVRM1294 POP HL1295 LD DE,81296 ADD HL,DE1297 POP DE1298 RET1300 1304limpia_sprites:1305 ld hl,sprites1306 ld b,1281307.1: ld (hl),$d11308 inc hl1309 djnz .11310 ret1312 1316vdp_modo_2:1317 xor a1318 ld (modo),a 1319 LD HL,tabla_modo_21320 LD BC,$08001321.1: PUSH BC1322 LD B,(HL)1323 CALL WRTVDP1324 POP BC1325 INC C1326 INC HL1327 DJNZ .11328 1331 LD HL,$3B001332 LD A,$D01333 LD C,$801334 CALL FILVRM1335 CALL limpia_sprites1336 1346 call prepara_alta_resolucion1347 ld bc,$e201 1348 jp WRTVDP1350 1353prepara_alta_resolucion:1354 xor a 1355 ld h,a1356 ld l,a1357 LD BC,61441358 CALL FILVRM1359 LD H,$20 1360 LD B,$181361 CALL FILVRM1362 ld h,$381363.2: ld a,l1364 call WRTVRM1365 inc hl1366 ld a,h1367 cp $3B1368 jr nz,.21369 ret1371 1374carga_nivel:1375 xor a 1376 ld (ix+d_trans),a1377 ld (ix+d_trans+1),a1378 1381 ld l,(ix+d_moni)1382 ld h,(ix+d_moni+1)1383 ld b,MAX_MONIGOTES*161384 xor a1385.3: ld (hl),a1386 inc hl1387 djnz .31388 1391 ld a,(ix+d_seccion)1392 and $301393 ld hl,mapa11394 jr z,.41395 ld hl,mapa21396 cp $101397 jr z,.41398 ld hl,mapa31399.4: 1400 1403 ld a,(ix+d_nivel)1404 call indice_nivel1405 ld e,(ix+d_real)1406 ld d,(ix+d_real+1)1407 push de1408 call descompacta_nivel1409 pop hl1410 1413 ld e,(ix+d_offset)1414 ld d,(ix+d_offset+1)1415 ld c,61416.1: push de1417 ld b,121418.2: push bc1419 ld a,(hl) 1420 cp 981421 call z,estima_cuadro1422 cp 971423 call z,anota_transportador1424 cp 901425 call nc,agrega_monigote1426 cp 841427 call nc,agrega_adorno1428 cp 791429 call nc,agrega_monigote1430 cp 781431 call nc,agrega_adorno1432 cp 721433 call nc,agrega_monigote1434 cp 671435 call nc,agrega_adorno1436 cp 611437 call z,agrega_monigote1438 cp 521439 jp nc,$+81440 cp 501441 call nc,mosaico_especial1442 ex de,hl1443 call dibuja_mosaico1444 ex de,hl1445 pop bc1446 inc hl1447 djnz .21448 pop de1449 push bc1450 ld bc,641451 ex de,hl1452 add hl,bc1453 ex de,hl1454 pop bc1455 dec c1456 jp nz,.11457 ret1459 1468dibuja_mosaico:1469 push bc1470 push de1471 1474 cp 51475 jr c,.121476 cp 91477 jr c,.131478.12: cp 161479 jr c,.141480 cp 201481 jr c,.151482.14: cp 521483 jp c,.191484 sub 321485.15: sub 71486.13: sub 51487 add a,a1488 add a,a1489 ld c,a1490 ld b,01491 push hl1492 ld hl,.101493 add hl,bc1494 ld d,(hl)1495 inc hl1496 ld e,(hl)1497 inc hl1498 ld b,(hl)1499 inc hl1500 ld c,(hl)1501 pop hl1502 jp .31504.10:1505 1506 db BASE_MOS+20,BASE_MOS+41507 db BASE_MOS+8,BASE_MOS+231508 1509 db BASE_MOS+4,BASE_MOS+251510 db BASE_MOS+26,BASE_MOS+131511 1512 db BASE_MOS+8,BASE_MOS+291513 db BASE_MOS+30,BASE_MOS+181514 1515 db BASE_MOS+32,BASE_MOS+331516 db BASE_MOS+18,BASE_MOS+351517 1518 db BASE_MOS+64,BASE_MOS+481519 db BASE_MOS+52,BASE_MOS+671520 1521 db BASE_MOS+48,BASE_MOS+691522 db BASE_MOS+70,BASE_MOS+571523 1524 db BASE_MOS+52,BASE_MOS+731525 db BASE_MOS+74,BASE_MOS+621526 1527 db BASE_MOS+76,BASE_MOS+571528 db BASE_MOS+62,BASE_MOS+791529 1530 db BASE_MOS+1,BASE_MOS+31531 db BASE_MOS+5,BASE_MOS+71532 1533 db BASE_MOS+10,BASE_MOS+111534 db BASE_MOS+14,BASE_MOS+151535 1536 db BASE_MOS+96,BASE_MOS+171537 db BASE_MOS+98,BASE_MOS+991538 1539 db BASE_MOS+145,BASE_MOS+1471540 db BASE_MOS+149,BASE_MOS+1511541 1542 db BASE_MOS+4,BASE_MOS+41543 db BASE_MOS+19,BASE_MOS+61544 1545 db BASE_MOS+4,BASE_MOS+41546 db BASE_MOS+21,BASE_MOS+61547 1548 db BASE_MOS+173,BASE_MOS+221549 db BASE_MOS+24,BASE_MOS+271550 1551 db BASE_MOS+31,BASE_MOS+281552 db BASE_MOS+28,BASE_MOS+311553 1554 db BASE_MOS+28,BASE_MOS+311555 db BASE_MOS+31,BASE_MOS+281556 1557 db BASE_MOS+49,BASE_MOS+511558 db BASE_MOS+54,BASE_MOS+551559 1560 db BASE_MOS+58,BASE_MOS+591561 db BASE_MOS+61,BASE_MOS+631562 1563 db BASE_MOS+65,BASE_MOS+661564 db BASE_MOS+68,BASE_MOS+711565 1566 db BASE_MOS+72,BASE_MOS+751567 db BASE_MOS+77,BASE_MOS+781568 1569 db BASE_MOS+153,BASE_MOS+1551570 db BASE_MOS+157,BASE_MOS+1591571 1572 db BASE_MOS+34,BASE_MOS+1961573 db BASE_MOS+197,BASE_MOS+1981575.19: add a,a1576 add a,a1577 add a,BASE_MOS1578 ld d,a1579 1582 cp 2*4+BASE_MOS1583 jr c,.01584 cp 12*4+BASE_MOS1585 jr z,.01586 cp 15*4+BASE_MOS1587 jr z,.01588 cp 4*4+BASE_MOS1589 jr z,.01590 1593 jr c,.41594 cp 13*4+BASE_MOS1595 jr z,.41596 cp 14*4+BASE_MOS1597 jr z,.41598 cp 40*4+BASE_MOS1599 jr nc,.71600 cp 36*4+BASE_MOS1601 jr nc,.01602.7:1604 inc a1605 ld e,a1606 inc a1607 ld b,a1608 inc a1609 jr .91611.4: inc a1612 ld e,a1613 ld b,d1614 jr .91615 1616.0: ld e,a1617 inc a1618 inc a1619 ld b,a1620.9: ld c,a1621 1622.3:1623 call zona_dura1624 ld a,d1625 call WRTVRM1626 inc hl1627 ld a,e1628 call WRTVRM1629 ld de,311630 add hl,de1631 ld a,b1632 call WRTVRM1633 inc hl1634 ld a,c1635 call WRTVRM1636 call zona_facil1637.2: ld de,-311638 add hl,de1639 pop de1640 pop bc1641 ret1643 1646mosaico_especial:1647 cp 501648 ld a,4 1649 ret z1650 ld a,15 1651 ret1653 1656anota_transportador:1657 ld (ix+d_trans),e1658 ld (ix+d_trans+1),d1659 jp estima_cuadro1661 1664agrega_adorno:1665 push bc1666 push de1667 push hl1668 push af1669 ld l,(ix+d_moni)1670 ld h,(ix+d_moni+1)1671 ld de,16*(MAX_MONIGOTES-1) 1673 add hl,de1674 1675.1: ld a,(hl)1676 or a1677 jr z,agrega_objeto1678 ld de,-161679 add hl,de1680 jr .11682 1685agrega_monigote:1686 push bc1687 push de1688 push hl1689 push af1690 ld l,(ix+d_moni)1691 ld h,(ix+d_moni+1)1692 ld de,16 1693 add hl,de1694 1695.1: ld a,(hl)1696 or a1697 jr z,agrega_objeto1698 add hl,de1699 jr .11701 1704agrega_objeto:1705 ld a,121706 sub b1707 add a,a1708 add a,a1709 add a,a1710 add a,a1711 add a,(ix+d_refx)1712 ld (hl),a1713 inc hl1714 ld a,61715 sub c1716 add a,a1717 add a,a1718 add a,a1719 add a,a1720 add a,(ix+d_refy)1721 ld (hl),a1722 inc hl1723 pop af1724 cp 611725 jp z,laser1726 push hl1727 sub 691728 ld hl,tabla_monigotes1729 add a,a1730 ld e,a 1731 add a,l1732 ld l,a1733 ld a,(hl)1734 inc hl1735 ld h,(hl)1736 ld l,a1737 ex (sp),hl1738 ret1740 1743laser: dec hl1744 dec hl1745 ld a,(hl)1746 sub 71747 ld (hl),a1748 inc hl1749 ld a,(hl)1750 add a,111751 ld (hl),a1752 inc hl1753 ld a,$081754 ld de,$00001755 ld bc,$010f1756 ex af,af'1757 ld a,15 1758 ex af,af'1759 jp anota_monigote1761pascua:1762 ld a,$bc1763 ex af,af'1764 ld a,151765 ex af,af'1766 ld de,01767 ld bc,$03111768 jp anota_monigote1770adorno:1771 ex af,af'1772 ld de,$00001773 ld bc,$01051774 jp anota_monigote1776jefe:1777 ld a,$901778 jr personaje1780chica:1781 ld a,$8c1782personaje:1783 set 3,(ix+d_objeto) 1784 ld de,$00001785 ld bc,$01051786 ex af,af'1787 ld a,151788 ex af,af'1789 jp anota_monigote1791entrada1:1792 ld a,20 1793entrada_general:1794 push af1795 xor a1796 dec hl1797 ld (hl),a1798 dec hl1799 ld (hl),a1800 ld hl,3001801 ld (ix+d_tiempo),l1802 ld (ix+d_tiempo+1),h1803 call musica_esperando1804 pop af1805 pop hl1806 pop de1807 pop bc1808 ret1810entrada2:1811 ld a,40 1812 jr entrada_general1813 1814entrada3:1815 ld a,21 1816 jr entrada_general1817 1818nada:1819 xor a1820 dec hl1821 ld (hl),a1822 dec hl1823 ld (hl),a1824 pop hl1825 pop de1826 pop bc1827 jp estima_cuadro1829 1834objeto_tomado:1835 ld c,(ix+d_nivel)1836 ld b,01837 ld e,(ix+d_mapa)1838 ld d,(ix+d_mapa+1)1839 ex de,hl1840 srl b1841 rr c1842 jr nc,.11843 rlca1844 rlca1845 rlca1846 rlca1847.1: add hl,bc1848 and (hl) 1849 ex de,hl1850 ld d,b1851 ld e,b1852 ret1854 1861objeto_borra:1862 ld e,(iy+d_nivel)1863 ld d,01864 ld l,(iy+d_mapa)1865 ld h,(iy+d_mapa+1)1866 srl d1867 rr e1868 jr nc,.21869 rlca1870 rlca1871 rlca1872 rlca1873.2: add hl,de1874 or (hl)1875 ld (hl),a 1876 ret1878 1881finaliza_monigote:1882 inc hl1883 inc hl1884 inc hl1885 ld a,(ix+d_refx)1886 ld (hl),a1887 inc hl1888 ld a,(ix+d_refy)1889 ld (hl),a1890 ret1892vida:1893 ld a,21894 call objeto_tomado1895 jp nz,nada 1896 ld a,$3c1897 ld bc,$010b1898 ex af,af'1899 ld a,91900 ex af,af'1901 jp anota_monigote1903llave:1904 ld a,41905 call objeto_tomado1906 jp nz,nada 1907 ld a,$101908 ld bc,$01071909 ex af,af'1910 ld a,111911 ex af,af'1912 jp anota_monigote1914cientifica:1915 nop 1916cientifico:1917 ex af,af'1918 ld a,11919 call objeto_tomado1920 jp nz,nada 1921 ex af,af'1922 ld bc,$03061923 cp cientifica and 255 1924 jr z,.11925 ld a,111926 ex af,af'1927 ld a,$301928 jp anota_monigote1930.1:1931 ld a,91932 ex af,af'1933 ld a,$801934 jp anota_monigote1936mancha:1937 ld a,$141938 ex af,af'1939 ld a,61940 jp adorno1942esqueleto:1943 ld a,$181944 ex af,af'1945 ld a,151946 jp adorno1948mano_suelta:1949 ld a,$1c1950 ex af,af'1951 ld a,151952 jp adorno1953 1954 1959zombie4:1960 ld a,$941961 ld de,$00001962 ld bc,$02031963 ex af,af'1964 ld a,15 1965 ex af,af'1966 jp anota_monigote1968zombie1_arr:1969 ld a,$701970 ld de,$ff001971 jr zombie11973zombie1_aba:1974 ld a,$601975 ld de,$01001976 jr zombie11978zombie5_izq:1979 ld a,$6c1980 ld de,$00ff1981 jr zombie51983zombie5_der:1984 ld a,$b41985 ld de,$00011986zombie5:1987 ld bc,$02011988 ex af,af'1989 ld a,151990 ex af,af'1991 jr anota_monigote1993zombie1_izq:1994 ld a,$501995 ld de,$00ff1996 jr zombie11998zombie1_der:1999 ld a,$402000 ld de,$00012001zombie1:2002 ld bc,$03012003 ex af,af'2004 ld a,32005 ex af,af'2006 jr anota_monigote2008zombie2_izq:2009 ld a,$502010 ld de,$00ff2011 jr zombie22013zombie2_der:2014 ld a,$402015 ld de,$00012016 jr zombie22018zombie2_arr:2019 ld a,$702020 ld de,$ff002021 jr zombie22023zombie2_aba:2024 ld a,$602025 ld de,$01002026zombie2:2027 ld bc,$02022028 ex af,af'2029 ld a,112030 ex af,af'2031 jr anota_monigote2033zombie3_izq:2034 ld a,$502035 ld de,$00ff2036 jr zombie32038zombie3_der:2039 ld a,$402040 ld de,$00012041 jr zombie32043zombie3_arr:2044 ld a,$702045 ld de,$ff002046 jr zombie32048zombie3_aba:2049 ld a,$602050 ld de,$01002051zombie3:2052 ld bc,$01032053 ex af,af'2054 ld a,12055 ex af,af'20562058anota_monigote:2059 ld (hl),a 2060 inc hl2061 ex af,af'2062 ld (hl),a 2063 ex af,af'2064 inc hl2065 ld (hl),e 2066 inc hl2067 ld (hl),d 2068 inc hl2069 ld (hl),b 2070 inc hl2071 ld a,c2072 inc a2073 ld (hl),a 2074 inc hl2075 ld (hl),b 2076 inc hl2077 ld (hl),c 2078 inc hl2079 xor a2080 ld (hl),a 2081 inc hl2082 ld (hl),a2083 call finaliza_monigote2084 pop hl2085 pop de2086 pop bc2087 ld a,(hl)2088 cp 61 2089 ret z2090 2095estima_cuadro:2096 push de2097 ld a,c2098 cp 62099 jr z,.12100 push hl2101 ld de,-122102 add hl,de2103 ld e,(hl)2104 call checa_camino2105 rrca2106 ld a,e2107 pop hl2108 jr c,.52109.1: ld a,b2110 cp 122111 jr z,.22112 push hl2113 dec hl2114 ld e,(hl)2115 call checa_camino2116 rrca2117 ld a,e2118 pop hl2119 jr c,.52120.2: ld a,b2121 cp 12122 jr z,.32123 push hl2124 inc hl2125 ld e,(hl)2126 call checa_camino2127 rrca2128 ld a,e2129 pop hl2130 jr c,.52131.3: ld a,c2132 cp 12133 jr z,.42134 push hl2135 ld de,122136 add hl,de2137 ld e,(hl)2138 call checa_camino2139 rrca2140 ld a,e2141 pop hl2142 jr c,.52143.4: xor a2144.5: pop de2145 ret2146 2147 2150actualiza_indicadores_nivel: 2151 ld a,(ix+d_vidas)2152 inc a 2153 call nz,carga_nivel2154 2157actualiza_indicadores:2158 ld a,(ix+d_vidas)2159 inc a 2160 ret z 2161 bit 7,(ix+d_objeto) 2162 ret nz 2163 ld a,(ix+d_estado)2164 or a 2165 ret nz 2166 ld l,(ix+d_offset)2167 ld h,(ix+d_offset+1)2168 ld a,(ix+d_refy)2169 or a2170 ld de,32-8 2171 jr nz,.12172 ld e,25+32 2173.1: add hl,de2174 2177 inc hl2178 inc hl2179 ld a,(ix+d_refy)2180 or a2181 ld a,$2B 2182 jr z,.22183 ld a,$2C 2184.2:2185 call zona_dura2186 call WRTVRM2187 inc hl2188 call mensajito2189 db $15,$10,$ff 2190 ld de,272191 add hl,de2192 ld a,(ix+d_puntos)2193 call dos_digitos2194 ld a,(ix+d_puntos+1)2195 call dos_digitos2196 ld a,(ix+d_puntos+2)2197 call dos_digitos2198 ld a,$202199 call WRTVRM 2200 ld de,58 2201 add hl,de2202 2205 call mensajito2206 db $05,$0e,$05,$12,$07,$19,$ff2207 ld de,262208 add hl,de2209 ld a,(ix+d_energia)2210 or a2211 ld b,a2212 ld a,$1c2213 jr z,.32214 dec a2215.3: call WRTVRM2216 inc hl2217 ld c,12218.4: inc c2219 ld a,b2220 cp c2221 ld a,$1e2222 jr c,.52223 dec a2224.5: call WRTVRM2225 inc hl2226 ld a,c2227 cp 62228 jr nz,.42229 ld a,$1f2230 call WRTVRM2231 ld de,58 2232 add hl,de2233 2236 inc hl2237 call mensajito2238 db $06,$0c,$0f,$0f,$12,$ff2239 ld de,262240 add hl,de2241 inc hl2242 ld a,(ix+d_refy)2243 or a2244 ld a,$32 2245 jr z,.72246 inc a 2247.7: call WRTVRM2248 inc hl2249 ld a,$342250 call WRTVRM2251 inc hl2252 ld a,(ix+d_seccion)2253 rrca2254 rrca2255 rrca2256 rrca2257 and $032258 ld d,a2259 ld a,(ix+d_nivel)2260 inc a2261 add a,d2262 add a,d2263 ld b,1002264 push af2265 ld a,$1f2266 add a,d2267 ld c,a2268 pop af2269 call digito_decimal+22270 ld b,102271 call digito_decimal2272 ld b,12273 call digito_decimal2274 ld de,59 2275 add hl,de2276 2279 ld a,(ix+d_vidas)2280 cp 102281 jr nc,.112282 add a,$202283 call WRTVRM2284 xor a2285 jr .122287.11: ld b,$1f2288.13: inc b2289 sub 102290 jr nc,.132291 add a,10+$202292 push af2293 ld a,b2294 call WRTVRM2295 pop af2296.12: inc hl2297 call WRTVRM2298 inc hl2299 ld a,$2a2300 call WRTVRM2301 inc hl2302 inc hl2303 xor a2304 bit 0,(ix+d_objeto)2305 jr z,$+42306 ld a,$2d2307 call WRTVRM2308 jp zona_facil2310 2313digito_decimal:2314 ld c,$1f2315.1: inc c2316 sub b2317 jr nc,.12318 add a,b2319 push af2320 ld a,c2321 call WRTVRM2322 pop af2323 inc hl2324 ret2326 2329dos_digitos:2330 push af2331 rrca2332 rrca2333 rrca2334 rrca2335 call un_digito2336 pop af2337un_digito:2338 and $0f2339 add a,$202340 call WRTVRM2341 inc hl2342 ret2344 2348dos_digitos2:2349 ld a,(de)2350 inc de2351 push af2352 rrca2353 rrca2354 rrca2355 rrca2356 call un_digito22357 pop af2358un_digito2:2359 and $0f2360 add a,$202361 ld (hl),a2362 inc hl2363 ret2365 2368actualiza_sprites:2369 2372 ld de,sprites2373 ld bc,sprites+16 2374 ld ix,jug12375 ld l,(ix+d_sprite)2376 ld h,02377 ld (sprites_especiales+0),hl2378 ld (ix+d_sprite),0 2379 push hl2380 call actualiza_jugador2381 pop hl2382 ld (ix+d_sprite),l2383 2386 ld de,sprites+82387 ld bc,sprites+64 2388 ld ix,jug22389 ld l,(ix+d_sprite)2390 ld h,02391 ld (sprites_especiales+2),hl2392 ld (ix+d_sprite),4 2393 push hl2394 call actualiza_jugador2395 pop hl2396 ld (ix+d_sprite),l2397 ret2399 2402sprite_carita:2403 db $b0,$c0,$c0,$c0,$c0,$c0,$c0,$c02404 db $b0,$c4,$c0,$c4,$c0,$c4,$c0,$c42405 db $b0,$c8,$b0,$c8,$b0,$c8,$b0,$c82406 db $c0,$cc,$c0,$cc,$c0,$cc,$c0,$cc2407 db $b0,$d0,$c0,$d0,$c0,$d0,$c0,$d02408 db $b0,$d4,$c0,$d4,$c0,$d4,$c0,$d42409 db $b0,$d8,$b0,$d8,$b0,$d8,$b0,$d82410 db $a0,$dc,$a0,$dc,$a0,$dc,$a0,$dc2411 db $00,$00,$00,$00,$c1,$c0,$c1,$d02413 2416actualiza_jugador:2417 bit 6,(ix+d_objeto) 2418 ret nz2419 2424 bit 7,(ix+d_objeto) 2425 jp nz,.9 2426 ld a,(ix+d_estado)2427 or a 2428 jp nz,.9 2429 ld l,(ix+d_trans)2430 ld h,(ix+d_trans+1)2431 ld a,h2432 or l2433 jr z,.72434 ld a,(ticks)2435 and $0c 2436 srl a2437 srl a2438 add a,362439 call dibuja_mosaico2440 2443.7:2444 2445 bit 5,(ix+d_objeto) 2446 jp nz,.9 2452 ld a,(ix+d_vidas)2453 inc a 2454 jr nz,.12455.9: ld a,$d12456 ld (de),a2457 inc de2458 inc de2459 inc de2460 inc de2461 ld (de),a2462 jp .22464.1: ld a,(ix+d_y)2465 dec a2466 ld (de),a2467 inc de2468 ld a,(ix+d_x)2469 ld (de),a2470 inc de2471 ld a,(ix+d_sprite)2472 ld (de),a2473 inc de2474 ld a,(ix+d_espera)2475 and 82476 ld a,(ix+d_color)2477 jr z,.62478 ld a,$0f2479.6: ld (de),a2480 inc de2481 2484 ld a,(ix+d_refx)2485 or a2486 ld a,(sprites_especiales+0)2487 jr z,.162488 ld a,(sprites_especiales+2)2489.16: srl a2490 ld hl,sprite_carita2491 add a,l2492 ld l,a2493 ld a,h2494 adc a,02495 ld h,a2496 ld a,(hl)2497 inc hl2498 ld h,(hl)2499 ld l,a2500 and $f02501 rrca2502 rrca2503 rrca2504 rrca2505 neg2506 dec a2507 add a,(ix+d_y)2508 ld (de),a2509 inc de2510 ld a,l2511 and 12512 neg2513 add a,(ix+d_x)2514 ld (de),a2515 inc de2516 ld a,h2517 ld (de),a2518 inc de2519 ld a,102520 ld (de),a2521 inc de2522 2525.2: ld d,b2526 ld e,c2527 ld l,(ix+d_moni)2528 ld h,(ix+d_moni+1)2529 ld b,MAX_MONIGOTES2530.3: push bc2531 ld a,(ix+d_estado)2532 or a 2533 jr nz,.13 2534 push hl2535 ld a,l2536 add a,d_tipo 2537 ld l,a2538 ld a,h2539 adc a,02540 ld h,a2541 ld a,(hl) 2542 ld c,a2543 pop hl2544 or a 2545 jr nz,.4 2546.13: ld a,$d12547 ld (de),a2548 inc de2549 inc de2550 inc de2551 inc de2552 ld bc,162553 jp .122555.4: ld c,5 2556 cp 82557 jr z,.82558 cp 92559 jr z,.82560 ld c,-1 2561 cp 4 2562 jr nz,.82563 inc hl2564 inc hl2565 ld a,(ix+d_refx)2566 or a2567 ld a,(hl)2568 push hl2569 ld l,a2570 ld h,02571 add hl,hl2572 add hl,hl2573 jp nz,.112574 ld (sprites_especiales+4),hl2575 pop hl 2576 ex af,af'2577 ld a,$e0 2578 jp .102580.11: ld (sprites_especiales+6),hl2581 pop hl2582 ex af,af'2583 ld a,$f0 2584.10: ex af,af'2585 rrca2586 rrca2587 and $fc2588 add a,color_jefes and 2552589 ld c,a2590 ld a,color_jefes>>82591 adc a,02592 ld b,a2593 dec hl2594 dec hl2595 ld a,(hl)2596 inc de2597 ld (de),a2598 ld a,-12599 call comun_sprite_jefe2600 2603 add a,162604 inc de2605 ld (de),a2606 ld a,-12607 call comun_sprite_jefe2608 2611 inc de2612 ld (de),a2613 ld a,152614 call comun_sprite_jefe2615 2618 add a,162619 inc de2620 ld (de),a2621 ld a,152622 call comun_sprite_jefe2623 ld bc,162624 jr .122626.8: ld a,(hl)2627 inc de2628 ld (de),a2629 dec de2630 inc hl2631 ld a,(hl)2632 add a,c2633 ld (de),a2634 inc de2635 inc de2636 inc hl2637 ldi2638 ldi2639 ld bc,122640.12: add hl,bc2641.5: pop bc2642 dec b2643 jp nz,.32644 ret2646comun_sprite_jefe:2647 dec de2648 inc hl2649 add a,(hl)2650 dec hl2651 ld (de),a2652 inc de2653 inc de2654 ex af,af'2655 ld (de),a2656 add a,42657 ex af,af'2658 inc de2659 ld a,(bc)2660 ld (de),a2661 inc bc2662 inc de2663 ld a,(hl)2664 ret2666 2669color_jefes:2670 2671 db 15,15,15,152672 2673 db 15,15,15,152674 2675 db 11,10,10,102676 2677 db 10,11,10,102678 2679 db 3,2,8,22680 2681 db 2,3,2,82683 2686maneja_entrada:2687 ld a,(jug2+d_objeto)2688 bit 6,a 2689 jr nz,.1 2690 ld a,(jug1+d_objeto)2691 bit 6,a 2692 jp nz,.2 2693 call .22694 2696 2699.1: ld ix,jug1 2700 ld b,$ff2701 if MEMOTECH=12702 ld a,$fb2703 out (KEYSEL),a 2704 ex (sp),hl2705 ex (sp),hl2706 in a,(KEY1) 2707 bit 7,a2708 jr nz,$+42709 res 0,b 2710 ld a,$ef2711 out (KEYSEL),a 2712 ex (sp),hl2713 ex (sp),hl2714 in a,(KEY1) 2715 bit 7,a2716 jr nz,$+42717 res 1,b 2718 ld a,$bf2719 out (KEYSEL),a 2720 ex (sp),hl2721 ex (sp),hl2722 in a,(KEY1) 2723 bit 7,a2724 jr nz,$+42725 res 2,b 2726 ld a,$f72727 out (KEYSEL),a 2728 ex (sp),hl2729 ex (sp),hl2730 in a,(KEY1) 2731 bit 7,a2732 jr nz,$+42733 res 3,b 2734 ld a,$df2735 out (KEYSEL),a 2736 ex (sp),hl2737 ex (sp),hl2738 in a,(KEY1) 2739 bit 7,a 2740 jr nz,$+42741 res 6,b 2742 else2743 ld a,$0e2744 out (PSG+0),a 2745 ld a,$f72746 out (PSG+1),a2747 ex (sp),hl2748 ex (sp),hl2749 ld a,$0f2750 out (PSG+0),a 2751 in a,(PSG)2752 bit 6,a2753 jr nz,$+42754 res 0,b 2755 ld a,$0e2756 out (PSG+0),a 2757 ld a,$fb2758 out (PSG+1),a2759 ex (sp),hl2760 ex (sp),hl2761 ld a,$0f2762 out (PSG+0),a 2763 in a,(PSG)2764 bit 4,a2765 jr nz,$+42766 res 1,b 2767 ld a,$0e2768 out (PSG+0),a 2769 ld a,$fd2770 out (PSG+1),a2771 ex (sp),hl2772 ex (sp),hl2773 ld a,$0f2774 out (PSG+0),a 2775 in a,(PSG)2776 bit 5,a2777 jr nz,$+42778 res 2,b 2779 ld a,$0e2780 out (PSG+0),a 2781 ld a,$fd2782 out (PSG+1),a2783 ex (sp),hl2784 ex (sp),hl2785 ld a,$0f2786 out (PSG+0),a 2787 in a,(PSG)2788 bit 3,a2789 jr nz,$+42790 res 3,b 2791 ld a,$0e2792 out (PSG+0),a 2793 ld a,$fe2794 out (PSG+1),a2795 ex (sp),hl2796 ex (sp),hl2797 ld a,$0f2798 out (PSG+0),a 2799 in a,(PSG)2800 bit 6,a2801 jr nz,$+42802 res 6,b 2803 endif2804 push bc2805 ld a,b2806 cpl2807 and $402808 call disparo2809 pop af2810 and $0f2811 jp maneja_dir2813 2816.2: ld ix,jug2 2817 ld b,$ff2818 if MEMOTECH=12819 ld a,$fb2820 out (KEYSEL),a 2821 in a,(KEY1) 2822 bit 3,a 2823 jr nz,$+42824 res 0,b 2825 ld a,$7f2826 out (KEYSEL),a 2827 in a,(KEY1) 2828 bit 2,a 2829 jr nz,$+42830 res 0,b 2831 ld a,$7f28322833 in a,(KEY1) 2834 bit 1,a 2835 jr nz,$+42836 res 1,b 2837 ld a,$7f2838 out (KEYSEL),a 2839 in a,(KEY1) 2840 bit 3,a 2841 jr nz,$+42842 res 2,b 2843 ld a,$7f2844 out (KEYSEL),a 2845 in a,(KEY1) 2846 bit 0,a 2847 jr nz,$+42848 res 3,b 2849 ld a,$7f2850 out (KEYSEL),a 2851 in a,(KEY2) 2852 bit 0,a 2853 jr nz,$+42854 res 6,b 2855 else2856 ld a,$0e2857 out (PSG+0),a 2858 ld a,$df2859 out (PSG+1),a2860 ex (sp),hl2861 ex (sp),hl2862 ld a,$0f2863 out (PSG+0),a 2864 in a,(PSG)2865 bit 5,a2866 jr nz,$+42867 res 0,b 2868 ld a,$0e2869 out (PSG+0),a 2870 ld a,$bf2871 out (PSG+1),a2872 ex (sp),hl2873 ex (sp),hl2874 ld a,$0f2875 out (PSG+0),a 2876 in a,(PSG)2877 bit 4,a 2878 jr nz,$+42879 res 1,b 2880 ld a,$0e2881 out (PSG+0),a 2882 ld a,$bf2883 out (PSG+1),a2884 ex (sp),hl2885 ex (sp),hl2886 ld a,$0f2887 out (PSG+0),a 2888 in a,(PSG)2889 bit 5,a 2890 jr nz,$+42891 res 2,b 2892 ld a,$0e2893 out (PSG+0),a 2894 ld a,$bf2895 out (PSG+1),a2896 ex (sp),hl2897 ex (sp),hl2898 ld a,$0f2899 out (PSG+0),a 2900 in a,(PSG)2901 bit 6,a 2902 jr nz,$+42903 res 3,b 2904 ld a,$0e2905 out (PSG+0),a 2906 ld a,$fb2907 out (PSG+1),a2908 ex (sp),hl2909 ex (sp),hl2910 ld a,$0f2911 out (PSG+0),a 2912 in a,(PSG)2913 bit 5,a 2914 jr nz,$+42915 res 6,b 2916 endif2917 push bc2918 ld a,b2919 cpl2920 and $402921 call disparo2922 pop af2923 and $0f2924 jp maneja_dir2926 2929disparo:2930 jr nz,.4 2935 res 7,(ix+d_recarga) 2936 ret2938.4: ld a,(ix+d_vidas)2939 inc a 2940 ret z 2941 ld a,(ix+d_objeto)2942 and $2c2943 ret nz29442950 ld a,(ix+d_estado) 2951 or (ix+d_recarga) 2952 ret nz 2953 ld l,(ix+d_moni)2954 ld h,(ix+d_moni+1)2955 ld de,92956 add hl,de2957 ld a,(hl) 2958 sbc hl,de 2959 or a 2960 ret nz 2961 ld (ix+d_recarga),15+1282962 ld a,(ix+d_sprite)2963 and $30 2964 ld de,$fe062965 ld bc,$00042966 jr z,.12967 cp $10 2968 ld de,$fefa2969 ld c,$fc2970 jr z,.12971 cp $30 2972 ld de,$fa002973 ld bc,$fc002974 jr z,.1 2975 ld d,$032976 ld b,$042977.1: ld a,(ix+d_sprite)2978 and $3c2979 jr z,.22980 cp $102981 jr nz,.32982.2: inc d 2983.3: ld a,(ix+d_x)2984 add a,e2985 ld (hl),a2986 inc hl2987 ld a,(ix+d_y)2988 add a,d2989 ld (hl),a2990 inc hl2991 ld (hl),$08 2992 inc hl2993 ld (hl),$0b 2994 inc hl2995 ld (hl),c 2996 inc hl2997 ld (hl),b 2998 inc hl2999 ld (hl),1 3000 inc hl3001 inc hl3002 ld (hl),1 3003 inc hl3004 ld (hl),8 3005 ld de,53006 add hl,de3007 ld a,(ix+d_refx)3008 ld (hl),a3009 inc hl3010 ld a,(ix+d_refy)3011 ld (hl),a3012 jp efecto_disparo3014 3017maneja_dir:3018 push af3019 bit 3,(ix+d_objeto) 3020 jp z,.13021 ld a,(ix+d_x)3022 sub (ix+d_refx)3023 cp $50 3024 jp z,.3 3025 cp $10 3026 push af3027 call c,abre_puerta 3028 pop af3029 call z,restaura_puerta 3030 pop af3031 ld a,$0d 3032 push af3033 jp .23035.3: res 3,(ix+d_objeto)3036 set 2,(ix+d_objeto) 3037 ld (ix+d_tiempo),503038 ld (ix+d_tiempo+1),03039 ld a,(ix+d_refx)3040 or a3041 ld (ix+d_sprite),$88 3042 jp z,.13043 ld (ix+d_sprite),$8c 3044.1: bit 2,(ix+d_objeto) 3045 jp z,.23046 ld a,(ix+d_tiempo)3047 dec a3048 jp z,.43049 pop af3050 ld a,$0f 3051 push af3052 jp .23054 3057.4: res 2,(ix+d_objeto)3058 call musica_esperando3059 ld a,(ix+d_seccion)3060 and $303061 ld b,7 3062 cp $103063 jr z,.53064 ld b,17 3065 cp $203066 jr z,.53067 ld b,29 3068.5: ld a,b3069 call inicia_historia3070 pop af3071 ret3073.2:3074maneja_dir_2: 3075 bit 1,(ix+d_objeto) 3076 call nz,restaura_puerta3078 3081 ld a,(ix+d_revivir)3082 or a3083 jr z,.183084 dec (ix+d_revivir)3085 jr nz,.183086 res 5,(ix+d_objeto)3087 call jugador_atrapado3088.18:3090 3094 bit 5,(ix+d_objeto) 3095 jp nz,.93096 ld l,(ix+d_tiempo)3097 ld h,(ix+d_tiempo+1)3098 ld a,h3099 or l3100 jp z,.93101 dec hl3102 ld (ix+d_tiempo),l3103 ld (ix+d_tiempo+1),h3104 bit 7,(ix+d_objeto) 3105 jp nz,.93106 ld a,(ix+d_vidas)3107 inc a 3108 jp z,.93109 ld a,h3110 or l3111 jp nz,.93112 bit 4,(ix+d_objeto) 3113 jp nz,.203114 call musica_batalla3115 ld a,(ix+d_nivel)3116 cp 72 3117 jp nz,.193118 set 4,(ix+d_objeto) 3119 ld a,(ix+d_seccion)3120 and $30 3121 ld (ix+d_seccion),a3122.20: call llueve_monstruo3123 jp .93125.19: ld l,(ix+d_moni)3126 ld h,(ix+d_moni+1)3127 ld de,163128 add hl,de3129 ld a,(ix+d_x)3130 sub (ix+d_refx)3131 cp $603132 ld a,(ix+d_refx)3133 jp c,.103134 3138 ld (hl),a 3139 inc hl3140 ld a,(ix+d_refy)3141 sub $203142 ld (hl),a 3143 inc hl3144 ld (hl),$10 3145 ld de,$01013146 jr .113148 3152.10: add a,$a03153 ld (hl),a 3154 inc hl3155 ld a,(ix+d_refy)3156 sub $203157 ld (hl),a 3158 inc hl3159 ld (hl),$00 3160 ld de,$01ff3162.11: inc hl3163 ld (hl),$0f 3164 inc hl3165 ld (hl),e 3166 inc hl3167 ld (hl),d 3168 inc hl3169 ld (hl),1 3170 inc hl3171 ld a,(ix+d_nivel)3172 cp 1003173 ld (hl),25 3174 jr nz,.143175 ld (hl),50 3176.14: inc hl3177 ld (hl),1 3178 inc hl3179 ld (hl),4 3180 inc hl3181 ld (hl),0 3182 inc hl3183 ld a,(ix+d_nivel)3184 3187 ld d,$013188 cp 46 3189 jr z,.153190 cp 99 3191 jr nz,.213192 ld a,(ix+d_seccion)3193 and $0f3194 cp 4 3195 jr z,.15 3197 3200.21: ld d,$003201 3211 if 03212 ld d,$01 3213 ld d,$21 3214 ld d,$43 3215 ld d,$00 3216 endif3217.15: ld (hl),d3218 call finaliza_monigote3219.9:3220 bit 5,(ix+d_objeto) 3221 jr nz,.133222 bit 7,(ix+d_objeto) 3223 jr nz,.133224 ld a,(ix+d_estado)3225 or a 3226 jr nz,.13 3227 ld a,(ix+d_vidas)3228 inc a 3229 jr nz,.123230.13: pop af 3231 jp .23232.12:3233 3236 ld a,(ix+d_recarga)3237 and $7f3238 jp z,.73239 dec (ix+d_recarga)3240.7:3241 3244 ld a,(ix+d_espera)3245 or a3246 jp z,.13247 dec (ix+d_espera)3248.1: pop af3250 3253 dec (ix+d_paso)3254 jp nz,mueve_monstruos3255 ld l,(ix+d_velocidad)3256 ld (ix+d_paso),l3257 ld l,(ix+d_real)3258 ld h,(ix+d_real+1)3259 3262 push af3263 ld a,(ix+d_x)3264 sub (ix+d_refx)3265 add a,$0f3266 and $f03267 ld e,a3268 ld a,(ix+d_y)3269 sub (ix+d_refy)3270 add a,$0f3271 and $f03272 ld d,a3273 call accede_casilla23274 cp 48 3275 jp z,.17 3276 cp 40 3277 jp z,.8 3278 cp 79 3279 jp z,.8 3280 ld de,03281 call accede_casilla3282 cp 96 3283 jp z,.5 3284 cp 20 3285 jp z,.5 3286 cp 74 3287 jp z,.16 3288 cp 21 3289 jp nz,.6 3290.16: call abre_puerta3291 pop af3292 call mov_abajo3293 ld a,(ix+d_y)3294 and $0f3295 jp nz,.23296 set 1,(ix+d_objeto)3297 jp .23299.5: call abre_puerta3300 pop af3301 call mov_derecha3302 ld a,(ix+d_x)3303 and $0f3304 jp nz,.23305 set 1,(ix+d_objeto)3306 jp .23308.8: call abre_puerta3309 pop af3310 call mov_arriba3311 ld a,(ix+d_y)3312 and $0f3313 jp nz,.23314 set 1,(ix+d_objeto)3315 jp .23317.17: call abre_puerta3318 pop af3319 call mov_izquierda3320 ld a,(ix+d_x)3321 and $0f3322 jp nz,.23323 set 1,(ix+d_objeto)3324 jp .23326.6: pop af3327 3330 rrca3331 jr c,.613332 call mov_arriba3333 jr .643335.61: rrca3336 jr c,.623337 call mov_derecha3338 jr .643340.62: rrca3341 jr c,.633342 call mov_abajo3343 jr .643345.63: rrca3346 jr c,.643347 call mov_izquierda3348.64:3349 3352 ld a,(ix+d_x)3353 or (ix+d_y)3354 and $0f3355 jp nz,.23356 ld de,03357 call accede_casilla3358 cp 503359 jr z,.43360 cp 513361 jr z,.43362 cp 983363 jr z,.43364 cp 97 3365 jp nz,.23366 res 0,(ix+d_objeto) 3367 call musica_avance3368.4: ld a,(ix+d_y)3369 sub (ix+d_refy)3370 ld de,$4f003371 ld b,-103372 jp z,.33373 cp $503374 ld de,$b1003375 ld b,103376 jp z,.33377 ld a,(ix+d_x)3378 sub (ix+d_refx)3379 ld b,-13380 ld de,$00af3381 jp z,.33382 ld b,13383 ld de,$00513384.3: ld a,(ix+d_nivel)3385 cp 100 3386 push af 3387 add a,b 3388 ld (ix+d_nivel),a3389 pop af3390 jp z,muestra_lema 3391 ld a,(ix+d_x)3392 add a,e3393 ld (ix+d_x),a3394 ld (ix+d_basex),a3395 ld a,(ix+d_y)3396 add a,d3397 ld (ix+d_y),a3398 ld (ix+d_basey),a3399 call actualiza_indicadores_nivel3400.2:3401 3404mueve_monstruos:3405 ld a,(ix+d_estado)3406 or a 3407 ret nz 3408 bit 6,(ix+d_objeto) 3409 ret nz3410 ld e,(ix+d_moni)3411 ld d,(ix+d_moni+1)3412 ld l,(ix+d_real)3413 ld h,(ix+d_real+1)3414 push ix3415 pop iy3416 push de3417 pop ix3418 ld b,MAX_MONIGOTES3419.1: ld a,(ix+d_tipo)3420 or a3421 jp z,.23422 dec (ix+d_paso) 3423 jp nz,.2 3424 ld a,(ix+d_velocidad)3425 ld (ix+d_paso),a3426.3: ld a,(ix+d_tipo)3427 dec a3428 push hl3429 ld hl,mueve_monstruos.153430 add a,a3431 add a,l3432 ld l,a3433 ld a,(hl)3434 inc hl3435 ld h,(hl)3436 ld l,a3437 ex (sp),hl3438 ret3440 3443.42: ld a,(ix+d_dx)3444 or a3445 jr nz,.433446 ld a,r3447 cpl3448 and 313449 jp nz,.23450 ld de,$01ac3451 jr .443452 3453.43: dec a3454 ld de,$02b03455 jr z,.443456 ld de,$00bc3457.44: ld (ix+d_sprite),e3458 ld (ix+d_dx),d3459 jp .23461 3464.36: ld a,(ix+d_x)3465 add a,(ix+d_dx)3466 ld (ix+d_x),a3467 sub (iy+d_refx)3468 cp 23469 jr c,.373470 push de3471 push hl3472 ld l,(ix+d_ultimo)3473 ld h,(ix+d_y)3474 ld e,(ix+d_ultimo+1)3475 ld d,(ix+d_dy)3476 add hl,de3477 ld (ix+d_ultimo),l3478 ld (ix+d_y),h3479 ld a,h3480 sub (iy+d_refy)3481 pop hl3482 pop de3483 cp 23484 jr c,.373485 cp $503486 jp c,.383487.37: ld (ix+d_tipo),03488 jp .23490 3493.38: ld a,(ticks)3494 and $0c3495 ld c,13496 jr z,.413497 cp $083498 ld c,153499 jr z,.413500 dec c3501.41: ld (ix+d_color),c3502 3505 ld c,63506 jp .453508 3511.30: ld (ix+d_color),c3512 ld a,(ix+d_dy)3513 inc a3514 ld (ix+d_dy),a3515 sub 100 3516 jp nz,.38 3517 ld (ix+d_dy),30 3518 ld a,(ix+d_x) 3519 sub (iy+d_x)3520 jp c,.38 3521 cp $103522 jp c,.383523 push bc3524 push de3525 push hl3526 ld l,(iy+d_moni)3527 ld h,(iy+d_moni+1)3528.31: ld de,163529 add hl,de3530 ld de,d_tipo3531 add hl,de3532 ld a,(hl)3533 sbc hl,de3534 or a3535 jr z,.323536 jr .313538.32: ex de,hl3539 push ix3540 push de3541 push ix3542 pop hl3543 ld bc,163544 ldir 3545 pop ix3546 ld (ix+d_tipo),16 3547 ld (ix+d_dx),-13548 ld (ix+d_ultimo),03549 ld a,(iy+d_y)3550 sub (ix+d_y)3551 ld l,a3552 jr z,.333553 jr nc,.343554 neg3555 call laser_divisor3556 ld a,l3557 neg3558 ld (ix+d_ultimo+1),a3559 ld (ix+d_dy),-13560 jr .353562.34: call laser_divisor3563.33: ld (ix+d_ultimo+1),l3564 ld (ix+d_dy),03565.35: call efecto_laser3566 pop ix3567 pop hl3568 pop de3569 pop bc3570 jp .383572 3575.28: ld a,(iy+d_y)3576 ld e,(iy+d_refy)3577 sub e3578 and $f03579 add a,163580 ld c,a3581 ld a,(ix+d_velocidad)3582 dec a3583 ld d,43584 jr z,.293585 dec a3586 ld d,83587 jr z,.293588 ld d,123589.29: ld a,(ix+d_y)3590 add a,d3591 ld (ix+d_y),a3592 sub e3593 add a,163594 cp c3595 jp c,.23596 ld a,c3597 sub 163598 add a,e3599 ld (ix+d_y),a3600 ld a,(ix+d_sprite)3601 cp $10 3602 ld (ix+d_tipo),7 3603 jp z,.23604 ld (ix+d_tipo),1 3605 jp .23607 3610.26: ld a,(ix+d_sprite)3611 add a,43612 ld (ix+d_sprite),a3613 cp $303614 jp nz,.23615 ld a,(ix+d_y)3616 sub 163617 ld (ix+d_y),a3618 xor a3619 ld (ix+d_sprite),a 3620 ld (ix+d_color),15 3621 ld (ix+d_dx),a3622 ld (ix+d_dy),a3623 ld (ix+d_ultimo),a3624 ld (ix+d_energia),50 3625 inc a3626 ld (ix+d_velocidad),a3627 ld (ix+d_paso),a3628 ld (ix+d_tipo),43629 ld a,(iy+d_seccion)3630 and $30 3631 ld d,$00 3632 jr z,.273633 cp $10 3634 ld d,$21 3635 jr z,.27 3636 ld d,$43 3637 ld (ix+d_energia),75 3638.27: ld (ix+d_ultimo+1),d3639 call musica_batalla3640 jp .23642 3645.25: ld a,(ix+d_color)3646 xor $0f3647 ld (ix+d_color),a3648 dec (ix+d_dx)3649 jp nz,.23650 ld (ix+d_tipo),133651 ld (ix+d_sprite),$203652 ld (ix+d_velocidad),83653 ld (ix+d_paso),83654 ld (ix+d_color),143655 jp .23657 3660.22: ld a,(ticks)3661 and $0c3662 ld c,$0a3663 jr z,.233664 inc c3665 cp $083666 jr nz,.233667 ld c,$0f3668.23: ld (ix+d_color),c3669 jp .73671 3674.20: ld a,(ticks)3675 and $0c3676 ld c,$063677 jr z,.213678 cp $083679 ld c,$093680 jr z,.213681 dec c3682.21: ld (ix+d_color),c3683 jp .73685 3688.14: ld a,(ix+d_sprite)3689 add a,43690 ld (ix+d_sprite),a3691 cp $303692 jp nz,.23693.16: xor a3694 ld (ix+d_tipo),a3695 jp .23697 3699.9:3700 ld a,(ix+d_sprite)3701 and $f03702 ld c,a3703 ld a,(ticks)3704 and $0c3705 cp $0c3706 jr nz,$+43707 ld a,$04 3708 or c3709 ld (ix+d_sprite),a3710 jp .73712.13: call mueve_bala3713 jp .23715.17: call mueve_jefe3716 3719 bit 5,(iy+d_objeto) 3720 jp nz,.23721 bit 7,(iy+d_objeto) 3722 jp nz,.23723 ld a,(iy+d_vidas)3724 inc a 3725 jp z,.23726 ld a,(iy+d_x)3727 add a,83728 sub (ix+d_x)3729 cp $203730 jp nc,.23731 ld a,(iy+d_y)3732 add a,83733 sub (ix+d_y)3734 cp $203735 jp nc,.23736 jp .103738.12: call mueve_monstruo_33739 jp .73741.8: call mueve_monstruo_23742 jp .73744.4: call mueve_monstruo_13745 3748.7: ld c,13 3752.45: ld a,(iy+d_vidas)3753 inc a 3754 jp z,.23755 bit 5,(iy+d_objeto) 3756 jp nz,.23757 ld a,(ix+d_x)3758 sub (iy+d_x)3759 jp nc,.53760 neg 3761.5: cp c3762 jp nc,.23763 ld a,(ix+d_y)3764 sub (iy+d_y)3765 jp nc,.63766 neg3767.6: cp c3768 jp nc,.23769 ld a,(ix+d_tipo)3770 cp 15 3771 jp z,.103772 cp 163773 jp z,.103774 cp 53775 jp c,.103776 cp 63777 jp nz,.113778 3781 push bc3782 push hl3783 push ix3784 ld a,1 3785 call objeto_borra3786 ld (ix+d_tipo),d 3790 ld a,(iy+d_energia)3791 cp 63792 jp z,$+63793 inc (iy+d_energia)3794 3797 ld a,(iy+d_rescatados)3798 add a,13799 daa3800 ld (iy+d_rescatados),a3801 push iy3802 pop ix3803 ld hl,puntos_cientifico3804 call agrega_puntos3805 call actualiza_indicadores3806 call efecto_rescate3807 pop ix3808 pop hl3809 pop bc3810 jp .23812 3815.11: cp 73816 jp nz,.193817 set 0,(iy+d_objeto) 3818 push bc3819 push hl3820 push ix3821 ld a,4 3822 call objeto_borra3823 ld (ix+d_tipo),d 3824 push iy3825 pop ix3826 call actualiza_indicadores3827 call efecto_llave3828 pop ix3829 pop hl3830 pop bc3831 jp .23833 3836.19: ld a,(iy+d_energia)3837 cp 63838 ld (iy+d_energia),63839 jr nz,.1913840 inc (iy+d_vidas)3841.191: push bc3842 push hl3843 push ix3844 ld a,2 3845 call objeto_borra3846 ld (ix+d_tipo),d 3847 push iy3848 pop ix3849 call actualiza_indicadores3850 call efecto_vida3851 pop ix3852 pop hl3853 pop bc3854 jp .23855 3856 3859.10:3860 ld a,(iy+d_espera)3861 or a 3862 jp nz,.2 3863 push bc3864 push hl3865 push ix3866 call efecto_tocado3867 ld a,(ix+d_tipo)3868 cp 16 3869 jp z,.243870 cp 4 3871 jp z,.24 3872 ld a,(ix+d_paso)3873 add a,20 3874 ld (ix+d_paso),a3875.24: ld a,(iy+d_paso)3876 add a,5 3877 ld (iy+d_paso),a3878 ld a,503879 ld (iy+d_espera),a3880 if programador=03881.patch: dec (iy+d_energia)3882 else3883 nop3884 nop3885 nop3886 endif3887 push iy3888 pop ix3889 call actualiza_indicadores3890 ld a,(ix+d_energia)3891 or a3892 call z,jugador_cae3893 pop ix3894 pop hl3895 pop bc3896.2: ld de,163897 add ix,de3898 dec b3899 jp nz,.13900 ret3902 3905laser_divisor:3906 ld l,03907 ld h,a3908 ld a,(ix+d_x)3909 sub (iy+d_x)3910 cp h3911 jp c,.33912 ld e,a3913 ld d,03914 ld c,l3915 ld a,h3916 ld hl,03917 ld b,163918 or a3919.1: rl c3920 rla3921 rl l3922 rl h3923 sbc hl,de3924 jr nc,.23925 add hl,de3926.2: ccf3927 djnz .13928 ex de,hl3929 rl c3930 ld l,c3931 rla3932 ld h,a3933 ret3935.3: ld hl,$00ff3936 ret3938 3941jugador_cae:3942 ld (ix+d_revivir),1503943 set 5,(ix+d_objeto) 3944 ld a,(ix+d_refx)3945 call efecto_pierde3946 ld l,(ix+d_moni)3947 ld h,(ix+d_moni+1)3948 ld de,d_tipo3949 add hl,de3950 ex de,hl3951 ld hl,163952 add hl,de3953 ld a,(hl)3954 ex de,hl3955 cp 4 3956 ld de,16*(MAX_MONIGOTES-4) 3958 jr z,.03959 ld e,16*(MAX_MONIGOTES-1) 3961.0: add hl,de3962 3963.1: ld a,(hl)3964 or a3965 jr z,.23966 ld de,-163967 add hl,de3968 jr .13970 3973.2: ld de,-d_tipo3974 add hl,de3975 ld a,(ix+d_x)3976 ld (hl),a3977 inc hl3978 ld a,(ix+d_y)3979 sub 6 3980 ld (hl),a3981 inc hl3982 ld a,(ix+d_nivel)3983 cp 100 3984 jr nz,.3 3985 ld a,(ix+d_seccion)3986 and $30 3987 jr z,.3 3988 ld (hl),$6c 3989 ld bc,$03013990 ld d,1 3991 jr .43992 3993.3: ld (hl),$18 3994 ld bc,$9609 3995 ld d,03996.4: inc hl3997 ld a,(ix+d_color)3998 ld (hl),a 3999 inc hl4000 xor a4001 ld (hl),a 4002 inc hl4003 ld (hl),a 4004 inc hl4005 ld (hl),b 4006 inc hl4007 ld (hl),a4008 inc hl4009 ld (hl),b 4010 inc hl4011 ld (hl),c 4012 inc hl4013 ld (hl),d 4014 inc hl4015 ld (hl),a4016 jp finaliza_monigote4018 4028jugador_atrapado:4029 ld a,(ix+d_basex)4030 add a,4 4031 and $f04032 sub (ix+d_refx)4033 jp nz,.14034 ld c,$004035 inc a4036 ld hl,mov_derecha4037 jp .24039.1: cp $b04040 jp nz,.24041 ld c,$104042 dec a4043 ld hl,mov_izquierda4044.2: add a,(ix+d_refx)4045 ld (ix+d_x),a4046 ld a,(ix+d_basey)4047 add a,4 4048 and $f04049 sub (ix+d_refy)4050 jp nz,.34051 ld c,$204052 inc a4053 ld hl,mov_abajo4054 jp .44056.3: cp $504057 jp nz,.44058 ld c,$304059 dec a4060 ld hl,mov_arriba4061.4: add a,(ix+d_refy)4062 ld (ix+d_y),a4063 ld (ix+d_ultimo),l4064 ld (ix+d_ultimo+1),h4065 ld a,(ix+d_sprite)4066 and $c04067 or c4068 ld (ix+d_sprite),a4069 ld (ix+d_paso),24070 ld (ix+d_velocidad),24071 dec (ix+d_vidas)4072 jp m,.54073 ld (ix+d_energia),64074 jp actualiza_indicadores4076.5: call musica_fracaso4077 4081 ld l,(ix+d_moni)4082 ld h,(ix+d_moni+1)4083 ld b,MAX_MONIGOTES*164084.6: ld (hl),04085 inc hl4086 djnz .64087 4090 call zona_dura4091 ld l,(ix+d_offset)4092 ld h,(ix+d_offset+1)4093 ld de,$00c64094 add hl,de4095 call mensajito4096 db $00,$07,$01,$0d,$05,$00,$0f,$16,$05,$12,$00,$ff4097 call zona_facil4098 4101 ld (ix+d_tiempo),2004102 ld (ix+d_tiempo+1),04103 ret4105 4108abre_puerta:4109 cp 794110 jp z,.14111 cp 964112 jp z,.24113 cp 744114 jp nz,.34115 ld a,214116 jp .34118.2: ld a,204119 jp .34121.1: ld a,404122.3: ld (ix+d_mosaico),a4123 cp 224124 ld de,$00004125 jp c,.44126 ld de,$0f0f4127.4: ld a,(ix+d_y)4128 add a,d4129 sub (ix+d_refy)4130 and $f04131 push hl4132 ld l,a4133 ld h,04134 add hl,hl4135 add hl,hl4136 ld a,(ix+d_x)4137 add a,e4138 sub (ix+d_refx)4139 and $f04140 rrca4141 rrca4142 rrca4143 add a,l4144 ld l,a4145 ld e,(ix+d_offset)4146 ld d,(ix+d_offset+1)4147 add hl,de4148 ld (ix+d_puerta),l4149 ld (ix+d_puerta+1),h4150 xor a4151 call dibuja_mosaico4152 pop hl4153 ret4155 4158restaura_puerta:4159 res 1,(ix+d_objeto)4160 ld l,(ix+d_puerta)4161 ld h,(ix+d_puerta+1)4162 ld a,(ix+d_mosaico)4163 call dibuja_mosaico4164 jp efecto_explota4166 4169agrega_puntos:4170 inc hl4171 inc hl4172 ld a,(ix+d_puntos+2)4173 add a,(hl)4174 daa4175 ld (ix+d_puntos+2),a4176 dec hl4177 ld a,(ix+d_puntos+1)4178 adc a,(hl)4179 daa4180 ld (ix+d_puntos+1),a4181 dec hl4182 ld a,(ix+d_puntos)4183 adc a,(hl)4184 daa4185 ld (ix+d_puntos),a4186 ld hl,record4187 cp (hl)4188 ret c4189 jr nz,.14190 inc hl4191 ld a,(ix+d_puntos+1)4192 cp (hl)4193 ret c4194 jr nz,.14195 inc hl4196 ld a,(ix+d_puntos+2)4197 cp (hl)4198 ret c4199 ret z4200 4203.1: ld l,(ix+d_puntos)4204 ld h,(ix+d_puntos+1)4205 ld (record),hl4206 ld a,(ix+d_puntos+2)4207 ld (record+2),a4208 ld a,(ix+d_refx)4209 or a4210 ld a,14211 jr z,.24212 inc a4213.2: ld (quien),a4214 ret4216 4225color_explosion_jefes:4226 db 14,14,14,14,15,0,0,0 4227 db 13,13,13,13,11,0,0,0 4228 db 6,6,6,6,8,0,0,0 4230 4233mueve_bala:4234 push bc4235 push iy4236 push hl4237 ld l,(iy+d_moni)4238 ld h,(iy+d_moni+1)4239 ld de,164240 add hl,de4241 push hl4242 pop iy4243 ld b,MAX_MONIGOTES-14244.6: ld a,(iy+d_tipo)4245 or a4246 jp z,.74247 cp 11 4248 jp z,.114249 cp 6 4250 jp z,.114251 cp 17 4252 jp z,.114253 cp 54254 jp nc,.74255 cp 44256 jp nz,.114257 4260 ld a,(ix+d_x)4261 add a,84262 sub (iy+d_x)4263 cp $1c4264 jp nc,.74265 ld a,(ix+d_y)4266 add a,84267 sub (iy+d_y)4268 cp $1c4269 jp nc,.74270 4273 dec (iy+d_energia)4274 ld hl,puntos_bala4275 ld (salva_puntos),hl4276 jp nz,.14 4280 ld a,(iy+d_sprite)4281 and $e04282 rrca4283 rrca4284 ld hl,color_explosion_jefes4285 ld e,a4286 ld d,04287 add hl,de4288 ld a,(iy+d_x)4289 ld (iy+d_x+32),a4290 add a,$084291 ld (iy+d_x+64),a4292 ld (iy+d_x+80),a4293 add a,$084294 ld (iy+d_x+16),a4295 ld (iy+d_x+48),a4296 ld a,(iy+d_y)4297 ld (iy+d_y+16),a4298 add a,$084299 ld (iy+d_y+64),a4300 ld (iy+d_y+80),a4301 add a,$084302 ld (iy+d_y+32),a4303 ld (iy+d_y+48),a4304 push iy4305 ld bc,$05084306.106: ld (iy+d_sprite),$204307 ld (iy+d_tipo),104308 ld a,(hl)4309 ld (iy+d_color),a4310 ld a,c4311 cp 114312 jr c,.1074313 ld a,74314 jr z,.1074315 ld a,114316.107: ld (iy+d_velocidad),a4317 ld (iy+d_paso),a4318 inc hl4319 inc c4320 ld de,164321 add iy,de4322 djnz .1064323 pop iy4324 pop af4325 pop hl4326 push hl4327 push af4328 ld de,d_nivel4329 add hl,de4330 ld a,(hl)4331 cp 99 4332 jr nz,.1044333 pop af4334 pop hl4335 push hl4336 push af4337 ld e,d_seccion4338 add hl,de4339 inc (hl)4340 ld a,(hl)4341 and $0f4342 cp 5 4343 jr z,.1044344 pop bc4345 pop hl4346 push hl4347 push bc4348 push af4349 call musica_esperando4350 pop af4351 4354 ld de,d_tiempo4355 add hl,de4356 dec a4357 ld (hl),1604358 jr z,.1054359 dec a4360 ld (hl),1204361 jr z,.1054362 dec a4363 ld (hl),804364 jr z,.1054365 ld (hl),404366 jr .1054368.104: ld (iy+d_sprite+80),$10 4369 ld (iy+d_tipo+80),74370 ld (iy+d_velocidad+80),14371 ld (iy+d_paso+80),14372 ld (iy+d_color+80),114373 call musica_triunfo4374.105: call efecto_megamonstruo4375 ld hl,puntos_megamonstruo4376 ld (salva_puntos),hl4377 4380.14: call bala_explota4381 pop hl4382 pop iy4383 pop bc4384 push bc4385 push iy4386 push hl4387 push ix4388 push iy4389 pop ix4390 ld hl,(salva_puntos)4391 call agrega_puntos4392 call actualiza_indicadores4393 pop ix4394 pop hl4395 pop iy4396 pop bc4397 ret4399 4402.11:4403 ld a,(ix+d_x)4404 add a,44405 sub (iy+d_x)4406 cp 124407 jp nc,.74408 ld a,(ix+d_y)4409 add a,44410 sub (iy+d_y)4411 cp 124412 jp nc,.74413 4416 ld a,(iy+d_tipo)4417 cp 17 4418 jr z,.164419 cp 11 4420 jr z,.164421 cp 6 4422 jr z,.164423 dec (iy+d_energia)4424 jr nz,.104425 4428 cp 14429 ld hl,puntos_monstruo_14430 jr z,.154431 cp 24432 ld hl,puntos_monstruo_24433 jr z,.154434 ld hl,puntos_monstruo_34435.15: ld (salva_puntos),hl4436 ld (iy+d_color),144437 call bala_explota24438 jp .14+34440 4444.16: ld hl,puntos_cero4445 ld (salva_puntos),hl4446 cp 11 4447 ld bc,$0106 4448 jr nz,.94449 ld bc,$020b 4450.9: ld (iy+d_color),c4451 push bc4452 call bala_explota24453 pop af4454 pop hl4455 pop iy4456 pop bc4457 push hl4458 call objeto_borra 4459 pop hl4460 ret4462 4465.10: ld (iy+d_paso),54466 4469 ld a,(ix+d_dx)4470 or a4471 jr z,.1004472 jp p,.1014473 ld a,(iy+d_x)4474 and $0f4475 cp 44476 jr c,.1024477 ld a,(iy+d_x)4478 sub 44479 ld (iy+d_x),a4480 jr .1024482.101: ld a,(iy+d_x)4483 and $0f4484 jr z,.1024485 cp 134486 jr nc,.1024487 ld a,(iy+d_x)4488 add a,44489 ld (iy+d_x),a4490 jr .1024492.100: ld a,(ix+d_dy)4493 or a4494 jp p,.1034495 ld a,(iy+d_y)4496 and $0f4497 cp 44498 jr c,.1024499 ld a,(iy+d_y)4500 sub 44501 ld (iy+d_y),a4502 jr .1024504.103: ld a,(iy+d_y)4505 and $0f4506 jr z,.1024507 cp 134508 jr nc,.1024509 ld a,(iy+d_y)4510 add a,44511 ld (iy+d_y),a4512.102:4513 ld hl,puntos_bala4514 ld (salva_puntos),hl4515 ld a,(iy+d_velocidad)4516 dec a4517 jp z,.144518 ld (iy+d_velocidad),a4519 jp .144521.7: ld de,164522 add iy,de4523 dec b4524 jp nz,.64525 pop hl4526 push hl4527 ld a,(ix+d_x)4528 add a,(ix+d_dx)4529 ld (ix+d_x),a4530 sub (ix+d_refx)4531 cp 44532 jr c,.14533 cp $ad4534 jr nc,.14535 ld a,(ix+d_y)4536 add a,(ix+d_dy)4537 ld (ix+d_y),a4538 sub (ix+d_refy)4539 cp 44540 jr c,.14541 cp $4d4542 jr nc,.14543 ld a,(ix+d_dx)4544 or a4545 ld de,$0800 4546 jp z,.24547 ld de,$0308 4548.2: call mov_libre04549 jr nc,.54550 jr .194552 4555.1: ld (ix+d_tipo),04556.19: pop hl4557 pop iy4558 pop bc4559 ret4561 4564.5: call bala_explota4565 cp 31 4566 jr z,.174567 cp 35 4568 jr z,.174569 cp 24 4570 jr z,.174571 cp 54 4572 jr z,.174573 cp 43 4574 jr z,.174575 cp 58 4576 jr z,.174577 and $fe4578 cp 28 4579 jr z,.174580 pop hl4581 pop iy4582 pop bc4583 ret4585.17: ld a,(ix+d_x)4586 sub (ix+d_refx)4587 add a,e4588 and $f04589 ld e,a4590 ld a,(ix+d_y)4591 sub (ix+d_refy)4592 add a,d4593 and $f04594 ld d,a4595 push de4596 ld a,e4597 rrca4598 rrca4599 rrca4600 rrca4601 ld e,a4602 ld a,d4603 rrca4604 ld d,a4605 rrca4606 add a,d4607 add a,e4608 ld e,a4609 ld d,04610 add hl,de4611 ld a,(hl)4612 cp 244613 ld e,544614 jr z,.184615 cp 544616 ld e,244617 jr z,.184618 cp 314619 ld e,354620 jr z,.184621 cp 354622 ld e,314623 jr z,.184624 cp 434625 ld e,584626 jr z,.184627 cp 584628 ld e,434629 jr z,.184630 xor 14631 ld e,a4632.18: ld a,e4633 ld (hl),a4634 ex af,af'4635 pop de4636 pop hl4637 pop iy4638 push iy4639 push hl4640 ld l,(iy+d_offset)4641 ld h,(iy+d_offset+1)4642 ld a,e4643 rrca4644 rrca4645 rrca4646 ld c,a4647 ld b,04648 add hl,bc4649 ld e,d4650 ld d,04651 add hl,de4652 add hl,de4653 add hl,de4654 add hl,de4655 ex af,af'4656 call dibuja_mosaico4657 pop hl4658 pop iy4659 pop bc4660 ret4662 4665bala_explota2:4666 ld (iy+d_sprite),$204667 ld (iy+d_tipo),104668 ld (iy+d_velocidad),84669 ld (iy+d_paso),84670 call efecto_monstruo4671bala_explota:4672 ld (ix+d_sprite),$0c4673 ld (ix+d_color),94674 ld (ix+d_tipo),94675 ld (ix+d_paso),44676 ld (ix+d_velocidad),44677 jp efecto_explota4679 4680puntos_cero:4681 db $00,$00,$004683 4684puntos_cientifico:4685 db $00,$01,$004687 4688puntos_bala:4689 db $00,$00,$014691 4692puntos_monstruo_1:4693 db $00,$00,$104695 4696puntos_monstruo_2:4697 db $00,$00,$254699 4700puntos_monstruo_3:4701 db $00,$00,$504703 4704puntos_megamonstruo:4705 db $00,$10,$004707 4710 ia.asm1 36 42mueve_monstruo_1:43 ld a,(ix+d_sprite)44 cp $6c45 jr z,mueve_monstruo_546 cp $7c47 jr z,mueve_monstruo_548 cp $b449 jr z,mueve_monstruo_550 cp $b851 jr z,mueve_monstruo_552 55 ld a,(ix+d_dx)56 or a 57 jr z,mueve_monstruo_1b 58 dec a 59 jr z,.160 call mov_izquierda61 ret c62 jr .264.1: call mov_derecha65 ret c66.2: ld a,(ix+d_dx)67 neg68 ld (ix+d_dx),a69 ret71 75mueve_monstruo_1b:76 ld a,(ix+d_dy)77 dec a 78 jr z,.179 call mov_arriba80 ret c81 jr .283.1: call mov_abajo84 ret c85.2: ld a,(ix+d_dy)86 neg87 ld (ix+d_dy),a88 ret90 93mueve_monstruo_5:94 ld a,(ix+d_ultimo)95 or a 96 jr z,.5 97 ld a,(ix+d_ultimo+1)98 inc a 99 ld (ix+d_ultimo+1),a100 cp 50 101 jr nz,.5102 ld (ix+d_tipo),0 103 ret105.5: inc (ix+d_dy) 106 ld a,(ix+d_dy)107 cp 24 108 ret c109 jr nz,.0 110 ld a,(ix+d_x)111 sub (iy+d_x) 112 ld a,-1113 jr nc,.7114 ld a,1115.7: ld (ix+d_dx),a116 dec a117 ld a,$7c118 jr nz,.1119 ld a,$b8120.1: ld (ix+d_sprite),a 121 ret123.0: cp 28124 ret c125 jr nz,.2126 ld a,(ix+d_dx)127 dec a128 ld a,$6c129 jr nz,.3130 ld a,$b4131.3: ld (ix+d_sprite),a 132 call efecto_rasca133 call .4 134 call .4135 call .4136 jr .4138.2: cp 32139 jr c,.4140 ld a,r 141 and 3142 add a,13143 ld (ix+d_dy),a 144 ret146.4: ld a,(ix+d_dx)147 dec a 148 jp nz,.8149 ld a,(ix+d_x)150 sub (ix+d_refx)151 cp $b0152 ret nc153 ld de,$0001154 call mov_libre155 ret nc156 inc (ix+d_x)157 ret159.8: ld a,(ix+d_x)160 sub (ix+d_refx)161 ret z162 ld de,$00ff163 call mov_libre164 ret nc165 dec (ix+d_x)166 ret168 172mueve_monstruo_2:173 ld a,(ix+d_dx)174 cp 1 175 jr nz,.1176 call mov_derecha177 ret c178 ld (ix+d_dx),0 179 ld (ix+d_dy),1180 call mov_abajo181 ret c182 ld (ix+d_dy),-1183 ret185.1: cp -1 186 jr nz,.2187 call mov_izquierda188 ret c189 ld (ix+d_dx),0 190 ld (ix+d_dy),-1191 call mov_arriba192 ret c193 ld (ix+d_dy),1194 ret196.2: ld a,(ix+d_dy)197 cp 1 198 jr nz,.3199 call mov_abajo200 ret c201 ld (ix+d_dx),-1 202 ld (ix+d_dy),0203 call mov_izquierda204 ret c205 ld (ix+d_dx),1206 ret208.3: call mov_arriba209 ret c210 ld (ix+d_dx),1 211 ld (ix+d_dy),0212 call mov_derecha213 ret c214 ld (ix+d_dx),-1215 ret217 220monstruo_en_espera:221 ld (ix+d_velocidad),8222 ld a,(ix+d_dx)223 inc a224 ld (ix+d_dx),a225 cp 10226 ret c227 ld e,(ix+d_sprite)228 inc e229 inc e230 inc e231 inc e232 ld (ix+d_sprite),e233 cp 15234 ret c235 ld (ix+d_dx),1236 ld (ix+d_dy),0237 ld (ix+d_sprite),$40238 ld (ix+d_velocidad),2239 ret240 241 245mueve_monstruo_3:246 ld a,(ix+d_sprite)247 cp $94248 jr nc,monstruo_en_espera249 ld a,(ix+d_x)250 or (ix+d_y)251 and $0f252 jp nz,mov_previo253 ld a,(ix+d_dx)254 or a255 jr z,.1256 259 ld a,(ix+d_y)260 sub (iy+d_y)261 jr nz,.6262 ld a,(ix+d_x)263 sub (iy+d_x)264 jp z,.5265 jr c,.7266 call mov_izquierda267 jp nc,.5268 ld (ix+d_dx),-1269 ld (ix+d_dy),0270 ret272.7: call mov_derecha273 jp nc,.5274 ld (ix+d_dx),1275 ld (ix+d_dy),0276 ret278.6: jr c,.2279 call mov_arriba280 jr nc,.4281 ld (ix+d_dx),0282 ld (ix+d_dy),-1283 ret285.2: call mov_abajo286 jr nc,.4287 ld (ix+d_dx),0288 ld (ix+d_dy),1289 ret291 294.1: ld a,(ix+d_x)295 sub (iy+d_x)296 jr nz,.8297 ld a,(ix+d_y)298 sub (iy+d_y)299 jr z,.4300 jr c,.9301 call mov_arriba302 jr nc,.4303 ld (ix+d_dx),0304 ld (ix+d_dy),-1305 ret307.9: call mov_abajo308 jr nc,.4309 ld (ix+d_dx),0310 ld (ix+d_dy),1311 ret313.8: jr c,.3314 call mov_izquierda315 jr nc,.5316 ld (ix+d_dx),-1317 ld (ix+d_dy),0318 ret320.3: call mov_derecha321 ret c322 ld (ix+d_dx),1323 ld (ix+d_dy),0324 ret326 329.5: call mov_izquierda330 ret c331 call mov_derecha332 ret c333.4: call mov_arriba334 ret c335 call mov_abajo336 ret c337 jr .5339 342mueve_jefe:343 ld a,(ix+d_dy)344 cp 1345 jr nz,.1346 349 ld a,(ix+d_x)350 add a,(ix+d_dx)351 ld (ix+d_x),a352 ld a,(ix+d_y)353 add a,2354 ld (ix+d_y),a355 sub (ix+d_refy)356 cp $20357 ret nz358 xor a359 ld (ix+d_dy),a360 ret362 365.1: cp -1366 jp nz,.12367 370 ld a,(ix+d_sprite)371 and $f3372 ld (ix+d_sprite),a373 376 push hl377 ld a,(ix+d_ultimo)378 ld hl,salto_jefe379 ld e,a380 ld d,0381 add hl,de382 add hl,de383 ld a,(hl)384 bit 7,(ix+d_dx)385 jr z,.9386 neg387.9: add a,(ix+d_x)388 sub (ix+d_refx)389 cp $0f390 jr nc,.10391 ld a,$10392.10: cp $91393 jr c,.11394 ld a,$90395.11: add a,(ix+d_refx)396 ld (ix+d_x),a397 inc hl398 ld a,(hl)399 pop hl400 add a,(ix+d_y)401 ld (ix+d_y),a402 ld a,(ix+d_ultimo)403 inc a404 cp 32405 ld (ix+d_ultimo),a406 ret nz407 xor a408 ld (ix+d_dy),a409 ld (ix+d_velocidad),3410 ld a,18411 ld (ix+d_paso),a412 ret414 417.12: cp -2418 jp nz,.2419 ld (ix+d_velocidad),1420 423 ld a,(ticks)424 and $06425 rlca426 ld c,a427 ld a,(ix+d_sprite)428 and $f3429 or c430 ld (ix+d_sprite),a431 434 ld a,(ix+d_dx)435 or a436 jp p,.13437 dec (ix+d_x)438 ld a,(ix+d_x)439 sub (iy+d_refx)440 cp $10441 jr nc,.14442 ld a,$10443 add a,(iy+d_refx)444 ld (ix+d_x),a445 jr .14447.13: inc (ix+d_x)448 ld a,(ix+d_x)449 sub (iy+d_refx)450 cp $90451 jr c,.14452 ld a,$90453 add a,(iy+d_refx)454 ld (ix+d_x),a455.14: dec (ix+d_ultimo) 456 ret nz 457 xor a458 ld (ix+d_dy),a459 ld (ix+d_velocidad),3460 ld a,18 461 ld (ix+d_paso),a462 ret464 468.2: ld (ix+d_velocidad),3469 472 ld a,(ix+d_y)473 add a,$10 474 sub (iy+d_y)475 jp z,.7 476 ld a,-1 477 jr nc,.8478 ld a,1 479.8: add a,(ix+d_y)480 ld (ix+d_y),a481 484.7: ld a,(ix+d_x)485 sub (iy+d_x)486 jr c,.3487 ld a,(ix+d_ultimo+1)488 and $f0489 ld (ix+d_sprite),a490 dec (ix+d_x)491 ld (ix+d_dx),-1492 jr .4494.3: ld a,(ix+d_ultimo+1)495 and $e0496 or $10497 ld (ix+d_sprite),a498 inc (ix+d_x)499 ld (ix+d_dx),1500 503.4: ld a,r 504 and $0f505 ld c,a506 ld a,(iy+d_x)507 add a,8508 sub (ix+d_x)509 cp $10 510 jr nc,.6 511 res 3,c 512.6: ld a,c513 cp 5514 jr nz,.5515 ld a,(ix+d_ultimo+1)516 bit 0,a 517 jr z,.15518 bit 1,a 519 jr z,.16520 xor 4 521 ld (ix+d_ultimo+1),a522 and 4 523 jr nz,.15 524 jr .16526 527.15: ld (ix+d_dy),-1528 ld (ix+d_velocidad),1529 ld (ix+d_ultimo),0530 call efecto_berrido531 jr .5533 534.16: ld (ix+d_dy),-2535 ld (ix+d_velocidad),20 536 ld (ix+d_paso),20 537 ld (ix+d_ultimo),80538 call efecto_berrido539 542.5: ld a,(ticks)543 and $0c544 ld c,a545 ld a,(ix+d_sprite)546 and $f3547 or c548 ld (ix+d_sprite),a549 ret551 554salto_jefe:555 db 3 ,-4 556 db 3 ,-4 557 db 3 ,-3 558 db 2 ,-3 559 db 3 ,-2 560 db 2 ,-2 561 db 3 ,-1 562 db 1 ,-1 563 db 2 ,-1 564 db 1 ,-1 565 db 0 ,-1 566 db 1 ,-1 567 db 2 , 0 568 db 2 , 0 569 db 2 , 0 570 db 2 , 0 571 db 2 , 0 572 db 2 , 0 573 db 2 , 0 574 db 2 , 0 575 db 1 , 1 576 db 0 , 1 577 db 1 , 1 578 db 2 , 1 579 db 1 , 1 580 db 3 , 1 581 db 2 , 2 582 db 3 , 2 583 db 2 , 3 584 db 3 , 3 585 db 3 , 4 586 db 3 , 4 588 591llueve_monstruo:592 ld a,(ix+d_y)593 sub (ix+d_refy)594 and $f0 595 jp z,.3 596 ld l,(ix+d_moni)597 ld h,(ix+d_moni+1)598 ld de,16 599 add hl,de600 push hl601 602 ld b,max_monigotes-1603.2: ld de,d_tipo604 add hl,de605 ld a,(hl)606 sbc hl,de607 or a608 jr z,.4609 ld de,16610 add hl,de611 djnz .2612 pop hl613 jp .3 615 616.4: ex (sp),hl617 ld b,max_monigotes-1618 ld c,0619.5: ld de,d_tipo620 add hl,de621 ld a,(hl)622 sbc hl,de623 or a624 jr z,.6625 inc hl626 ld a,(ix+d_y)627 and $f0628 cp (hl)629 dec hl630 jr nz,.6631 inc c632 ld a,c633 cp 2634 jr nz,.6635 pop hl636 jp .3 638.6: ld de,16639 add hl,de640 djnz .5641 pop hl642 645 ld a,(ix+d_seccion)646 rlca647 rlca648 and $3f649 cp 23650 jp nz,.10651 652 call musica_triunfo653 ld de,$0000654 ld bc,$010b655 656.11: ld a,(ix+d_x)657 sub (ix+d_refx)658 cp $38659 jr c,.12660 ld a,(ix+d_x)661 sub $28662 ld (hl),a663 ld a,$10664 jr .9666 667.12: ld a,(ix+d_x)668 sub (ix+d_refx)669 cp $78670 jr nc,.11671 ld a,(ix+d_x)672 add a,$28673 ld (hl),a674 ld a,$10675 jr .9677.10: ld a,(ix+d_seccion)678 cpl679 and $06 680 rrca681 ld b,a682 ld a,(ix+d_seccion)683 bit 6,a 684 jr z,.7685 686.8: ld a,(ix+d_x)687 sub (ix+d_refx)688 cp $38689 jr c,.7690 ld a,(ix+d_x)691 sub $28692 ld (hl),a693 ld a,$40694 ld de,$0001695 ld c,3696 jr .9698 699.7: ld a,(ix+d_x)700 sub (ix+d_refx)701 cp $78702 jr nc,.8703 ld a,(ix+d_x)704 add a,$28705 ld (hl),a706 ld a,$50707 ld de,$00ff708 ld c,3709.9: inc hl710 push af711 ld a,(ix+d_refy)712 add a,$f0713 ld (hl),a714 inc hl715 pop af716 ld (hl),a 717 inc hl718 ld (hl),c 719 inc hl720 ld (hl),e 721 inc hl722 ld (hl),d 723 inc hl724 ld (hl),b 725 inc hl726 ld (hl),2 727 inc hl728 ld (hl),b 729 inc hl730 ld (hl),14 731 inc hl732 xor a733 ld (hl),a 734 inc hl735 ld (hl),a736 call finaliza_monigote737 ld a,(ix+d_seccion)738 rlca739 rlca740 inc a 741 rrca742 rrca743 ld (ix+d_seccion),a744 rlca745 rlca746 and $3f747 cp 24748 jp z,.1749.3: ld (ix+d_tiempo),50 750 ld (ix+d_tiempo+1),0751 ret753.1: res 4,(ix+d_objeto) 754 ld a,(ix+d_seccion)755 and $30 756 ld (ix+d_seccion),a757 ret758 759zw.asm4712 4715mov_previo:4716 push hl4717 ld l,(ix+d_ultimo)4718 ld h,(ix+d_ultimo+1)4719 ex (sp),hl4720 ret4722 4725anima_sprite_v:4726 ld a,(ix+d_sprite)4727 and $c04728 ld c,a4729 ld a,(ticks)4730 and $0c4731 cp $0c 4732 jp nz,$+54733 ld a,$04 4734 or d4735 or c4736 ld (ix+d_sprite),a4737 ld a,(ix+d_y)4738 sub (ix+d_refy)4739 ret4741 4744mov_arriba:4745 ld a,(ix+d_x)4746 and $0f4747 jp nz,mov_previo4748 ld d,$304749 call anima_sprite_v4750 ret z4751 ld de,$ff004752 call mov_libre4753 ret nc4754 dec (ix+d_y)4755 ld (ix+d_ultimo),mov_arriba and 2554756 ld (ix+d_ultimo+1),mov_arriba>>84757 ret4759 4762mov_abajo:4763 ld a,(ix+d_x)4764 and $0f4765 jp nz,mov_previo4766 ld d,$204767 call anima_sprite_v4768 cp $504769 ret nc4770 ld de,$01004771 call mov_libre4772 ret nc4773 inc (ix+d_y)4774 ld (ix+d_ultimo),mov_abajo and 2554775 ld (ix+d_ultimo+1),mov_abajo>>84776 ret4778 4781anima_sprite_h:4782 ld a,(ix+d_sprite)4783 and $c04784 ld c,a4785 ld a,(ticks)4786 and $0c4787 or d4788 or c4789 ld (ix+d_sprite),a4790 ld a,(ix+d_x)4791 sub (ix+d_refx)4792 ret4794 4797mov_izquierda:4798 ld a,(ix+d_y)4799 and $0f4800 jp nz,mov_previo4801 ld d,$104802 call anima_sprite_h4803 ret z4804 ld de,$00ff4805 call mov_libre4806 ret nc4807 dec (ix+d_x)4808 ld (ix+d_ultimo),mov_izquierda and 2554809 ld (ix+d_ultimo+1),mov_izquierda>>84810 ret4812 4815mov_derecha:4816 ld a,(ix+d_y)4817 and $0f4818 jp nz,mov_previo4819 ld d,$004820 call anima_sprite_h4821 cp $b04822 ret nc4823 ld de,$00014824 call mov_libre4825 ret nc4826 inc (ix+d_x)4827 ld (ix+d_ultimo),mov_derecha and 2554828 ld (ix+d_ultimo+1),mov_derecha>>84829 ret4831 4834mov_libre:4835 ld a,e4836 or a4837 jr z,.14838 bit 7,e4839 jr nz,.14840 ld a,e4841 add a,154842 ld e,a4843.1: ld a,d4844 or a4845 jr z,.24846 bit 7,d4847 jr nz,.24848 ld a,d4849 add a,154850 ld d,a4851.2: call accede_casilla4852 cp 97 4853 jr z,.34854 push hl4855 ld e,a4856 call checa_camino4857 pop hl4858 ret nc4859 scf4860 ret4862.3: bit 0,(ix+d_objeto) 4863 scf4864 ret nz 4865 ccf4866 ret4868 4871mov_libre0:4872 push de4873 call accede_casilla4874 push hl4875 ld e,a4876 call checa_camino4877 ld a,e4878 pop hl4879 pop de4880 ret nc4881 scf4882 ret4884 4887accede_casilla:4888 ld a,(ix+d_x)4889 sub (ix+d_refx)4890 add a,e4891 ld e,a4892 ld a,(ix+d_y)4893 sub (ix+d_refy)4894 add a,d4895 ld d,a4896accede_casilla2:4897 ld a,e4898 rrca4899 rrca4900 rrca4901 rrca4902 and $0f4903 ld e,a4904 ld a,d4905 and $f04906 rrca4907 ld d,a4908 rrca4909 add a,d4910 add a,e4911 push hl4912 ld e,a4913 ld d,04914 add hl,de4915 ld a,(hl)4916 pop hl4917 ret4919 4922indice_nivel:4923 or a4924 ret z4925 ld d,04926 ld b,a4927.1: bit 7,(hl) 4928 inc hl4929 jp z,.14930 ld e,(hl) 4931 add hl,de4932 djnz .14933 ret4935 4938lee_bit:4939 rrc c4940 jr nc,.14941 dec b4942 jr z,.34943 inc hl4944.1: ld a,(hl)4945 and c4946 jr z,.24947 ex af,af'4948 scf4949 rla4950 ex af,af'4951 ret4953.3: ld hl,puntos_cero 4954.2: ex af,af'4955 add a,a4956 ex af,af'4957 ret4959 4963descompacta_nivel:4964 push hl4965 exx4966 pop de4967 exx4968 4969.1: bit 7,(hl)4970 inc hl4971 jr z,.14972 ld bc,$ff01 4973 call lee_bit4974 dec hl 4975 ld a,l 4976 ld b,(hl) 4977 push bc4978 push de4979 push hl4980 push af4981 ld hl,mapa_ref14982 jr z,.24983 ld hl,mapa_ref24984.2: ld bc,$06ff4985.16: ldi4986 ld a,104987.17: ldi4988 dec hl4989 dec a4990 jr nz,.174991 inc hl4992 ldi4993 djnz .164994 pop af4995 pop hl4996 pop de4997 pop bc4998 inc hl 4999 dec b 5000 exx5001 sub e5002 exx5003 cp 95004 jp nc,.75006 5007.5:5008 call lee_bit 5009 jr z,.65010 call lee_bit 5011 call lee_bit 5012 ex af,af'5013 and 35014 cp 25015 jr c,.155016 ex af,af'5017 call lee_bit 5018 ex af,af' 5019 and 3 5020 add a,2 5021 cp 55022 jr nz,.155023 call lee_bit 5024 ex af,af'5025 and 15026 ld a,55027 jr z,.155028 call lee_bit 5029 ex af,af' 5030 and 15031 add a,65032.15: exx5033 ld l,a5034 ld h,05035 add hl,de5036 ld a,(hl)5037 and $7f5038 exx5039 ld (de),a5040.6: inc de5041 ld a,b5042 or a5043 jr nz,.55044 jp .115046 5047.7:5048 call lee_bit 5049 jr z,.85050 call lee_bit 5051 jr nz,.95052 call lee_bit 5053 call lee_bit 5054 ex af,af'5055 and 35056 jr .105058.9:5059 call lee_bit 5060 call lee_bit 5061 call lee_bit 5062 ex af,af'5063 and 75064 add a,45065 cp 115066 jr nz,.105067 call lee_bit 5068 call lee_bit 5069 ex af,af'5070 and 35071 add a,115072.10: exx5073 ld l,a5074 ld h,05075 add hl,de5076 ld a,(hl)5077 and $7f5078 exx5079 ld (de),a5080.8: inc de5081 ld a,b5082 or a5083 jr nz,.75084 5087.11: ld a,(ix+d_nivel)5088 cp 1005089 ret nz5090 ld l,(ix+d_real)5091 ld h,(ix+d_real+1)5092 ld b,725093.12: ld a,(hl)5094 or a5095 jr z,.135096 cp 95097 jr nz,.145098 ld (hl),605099 jr .145101.13: ld (hl),595102.14: inc hl5103 djnz .125104 ret5106mapa_ref1:5107 db 5,1,65108 db 2,0,35109 db 2,0,35110 db 2,0,35111 db 2,0,35112 db 7,4,85114mapa_ref2:5115 db 16,12,175116 db 13,10,145117 db 13,10,145118 db 13,10,145119 db 13,10,145120 db 18,15,195122 5125jug_fuera: 5126 db $10,$10 5127 db 0,0 5128 db 0,0 5129 db 2,6,2 5130 db 05131 db 0,0 5132 dw $3800 5133 db 0,0 5134 dw 0 5135 dw monigotes 5136 db -1 5137 db 0 5138 db $10,$10 5139 db 0,0,0 5140 db $40 5141 dw 0 5142 dw 0 5143 dw bits1 5144 db 0 5145 db 0 5146 db 0 5147 db 0 5148 dw 0 5149 dw 0 5150 db 0 5151 db 0 5152 db 0 5154jug1_inicial: 5155 db $01,$10 5156 db 0,7 5157 db 0,0 5158 db 2,6,2 5159 db 05160 db 0,0 5161 dw $3800 5162 db 0,0 5163 dw nivel1 5164 dw monigotes 5165 db 4 5166 db 0 5167 db $01,$10 5168 db 0,0,0 5169 db 0 5170 dw 0 5171 dw 0 5172 dw bits1 5173 db 0 5174 db 0 5175 db 0 5176 db 0 5177 dw 05178 dw 0 5179 db 0 5180 db 0 5181 db 0 5183jug2_inicial: 5184 db $41,$70 5185 db 64,9 5186 db 0,0 5187 db 2,6,2 5188 db 05189 db 0,0 5190 dw $3800+392 5191 db $40,$60 5192 dw nivel2 5193 dw monigotes+MAX_MONIGOTES*16 5194 db 4 5195 db 0 5196 db $41,$70 5197 db 0,0,0 5198 db 0 5199 dw 0 5200 dw 0 5201 dw bits2 5202 db 0 5203 db 0 5204 db 0 5205 db 0 5206 dw 05207 dw 0 5208 db 0 5209 db 0 5210 db 0 5212 5216 sonido.asm1 36ZZ: equ 0 37SO: equ $3f 39FIN1: equ $fe 40FIN2: equ $fd 41FIN3: equ $fc 43melodia_silencio: equ $3b80+00h 44melodia_esperando: equ $3b80+09h 45melodia_triunfo: equ $3b80+019h46melodia_fracaso: equ $3b80+02Ah47melodia_avance: equ $3b80+038h48melodia_batalla: equ $3b80+048h49melodia_final: equ $3b80+071h 50melodia_historia: equ $3b80+07Dh 51melodia_principal: equ $3b80+014Bh 52melodia_2: equ $3b80+02B0h 54 55musica_general:56 push hl57 ld a,(jug1+d_seccion)58 and $3059 ld l,a60 ld a,(jug2+d_seccion)61 and $3062 cp l63 jr nc,.164 ld a,l65.1: and $1066 ld a,$45 67 ld hl,melodia_principal68 jr z,.069 ld a,$49 70 ld hl,melodia_271.0: jr pone_melodia73 74musica_historia:75 push hl76 ld hl,melodia_historia77 ld a,$4178 jr pone_melodia80 81musica_avance:82 push hl83 ld hl,melodia_avance84 jr pone_melodia_simple86 87musica_esperando:88 push hl89 ld hl,melodia_esperando90 jr pone_melodia_simple92 93musica_batalla:94 push hl95 ld hl,melodia_batalla96 ld a,$8097 jr pone_melodia99 100musica_triunfo:101 push hl102 ld hl,melodia_triunfo103 jr pone_melodia_simple105 106musica_fracaso:107 push hl108 ld hl,melodia_fracaso109 jr pone_melodia_simple111 112musica_final:113 push hl114 ld hl,melodia_final115 jr pone_melodia_simple117 120inicia_sonido:121 124 if MEMOTECH=1125 ld a,$9f126 out (PSG),a127 in a,($03)128 ld a,$bf129 out (PSG),a130 in a,($03)131 ld a,$df132 out (PSG),a133 in a,($03)134 ld a,$ff135 out (PSG),a136 ld (ef_envm),a137 in a,($03)138 ld a,$ec139 out (PSG),a140 ld (ef_cont),a141 in a,($03)142 ld a,$b8143 ld (ef_mezc),a144 else145 ld a,$ff146 ld (ef_envm),a147 ld a,$78148 ld (ef_mezc),a149 endif150 151musica_silencio:152 push hl153 ld hl,melodia_silencio154156 167pone_melodia_simple:168 xor a169pone_melodia:170 push bc171 ld c,a172 and $c0173 ld b,a174 ld a,(ef_band)175 and $3f176 or b177 ld (ef_band),a178 ld a,c179 and $3f180 ld (ef_env),a181 call zona_dura182 call RDVRM183 inc hl184 inc a185 srl a186 ld (ef_t),a187 xor a188 ld (ef_ritmo),a189 dec a 190 ld (ef_cn),a191 push de192 ld de,ef_ac1193 ld b,3194.0: CALL RDVRM195 ld (de),a196 inc de197 inc hl198 djnz .0199 pop de200 ld (ef_inicio),hl201 ld (ef_ap),hl202 ld hl,modo203 res 3,(hl) 204 pop bc205 pop hl 206 jp zona_facil208 211genera_musica:212 ld a,(ef_env)213 rrca214 jp c,genera_musica_historia215 ld a,(ef_cn)216 inc a 217 jr nz,.1218 221 ld hl,(ef_ap)222 call RDVRM223 cp $fe 224 ret z 225 cp $fc 226 jr nz,.6227 call musica_general228 jr genera_musica 230.6: cp $fd 231 jr nz,.0232 ld hl,(ef_inicio)233 call RDVRM234.0: inc hl235 ld (ef_ap),hl236 ld (ef_n),a 237 ld (ef_b),a 238 xor a239 ld (ef_cn),a 240 ld (ef_ta),a 244.1: ld a,(ef_t)245 sub 2246 ld c,a247 ld a,(ef_ta)248 cp c249 jr nc,.5250 ld a,(ef_n)251 or a252 jr z,.5253 call nota_a_frec254 ld (ef_voz1),hl255 ld a,14256 ld (ef_vol1),a257 260.5: ld a,(ef_b)261 or a262 jr z,.8263 call nota_a_frec264 ld (ef_voz2),hl265 ld a,13266 ld (ef_vol2),a267 270.8: ld hl,ef_ta271 inc (hl)272 ld a,(ef_t)273 cp (hl) 274 ret nz 275 ld (hl),0 276 ld hl,ef_cn277 inc (hl) 278 ld a,(hl)279 dec a 280 jr nz,.2 281 ld a,(ef_n)282 or a283 ret z284 ld b,a285 ld a,(ef_ac1)286 add a,b 287 ld (ef_n),a288 ret290.2: dec a 291 jr nz,.3 292 ld a,(ef_n)293 or a294 ret z295 ld b,a296 ld a,(ef_ac2)297 add a,b 298 ld (ef_n),a 299 ld a,(ef_b)300 sub 12 301 ld (ef_b),a302 ret304.3: dec a 305 jr nz,.4 306 ld a,(ef_n)307 or a308 ret z309 ld b,a310 ld a,(ef_ac3)311 add a,b 312 ld (ef_n),a313 ret315.4: dec a 316 ret nz 317 ld (hl),-1 318 ret320 323genera_musica_historia:324 ld a,(ef_cn)325 inc a 326 jr nz,.1327 ld hl,(ef_ap)328 call RDVRM 329 cp $fe 330 ret z 331 cp $fd 332 jr nz,.0333 ld a,(ef_ac1)334 xor 1 335 ld (ef_ac1),a336 ld hl,(ef_inicio)337 call RDVRM338.0: inc hl339 cp $3f 340 jr z,.4341 ld (ef_n),a342 xor a 343 ld (ef_ac2),a344.4: call RDVRM 345 inc hl346 ld (ef_ap),hl347 bit 6,a 348 jr z,.12 349 ex af,af'350 ld a,$80 351 ld (ef_tamb),a352 ex af,af'353.12: bit 7,a 354 jr z,.13 355 ex af,af'356 ld a,$40 357 ld (ef_tamb),a358 ex af,af'359.13: and $3f360 cp $3f 361 jr z,.5362 ld (ef_b),a363 xor a364 ld (ef_ac3),a365.5: xor a366 ld (ef_cn),a367 ld (ef_ta),a368 371.1: ld a,(ef_n) 372 or a 373 jr z,.6 374 call nota_a_frec375 ld a,(ef_env)376 and 12 377 jr nz,.7378 379 ld a,(ef_ac2) 380 call instrumento_piano381 ld (ef_voz2),hl 382 ld (ef_vol2),a383 srl h 384 rr l 385 jr .9387.7: cp 4388 ld a,(ef_ac1)389 jr nz,.8390 391 or a392 ld a,(ef_ac2) 393 jr nz,.15394 call instrumento_flauta_pan395 jr .9397.15: call instrumento_piano398 jr .9400 401.8: or a402 ld a,(ef_ac2)403 jr nz,.15404 call instrumento_clarinete405.9: ld (ef_voz1),hl406 ld (ef_vol1),a408 411.6: ld a,(ef_b) 412 or a 413 jr z,.2 414 call nota_a_frec415 ld a,(ef_env)416 and 12 417 jr nz,.10418 419 ld a,(ef_ac3)420 call instrumento_clarinete421 srl h 422 rr l423 jr nc,$+3 424 inc hl425 ld (ef_voz3),hl 426 ld (ef_vol3),a427 jr .2429 430.10: add hl,hl 431 add hl,hl432 ld a,(ef_t)433 add a,a434 ld d,a435 ld a,(ef_ta)436 cp d437 jr c,.11438 add hl,hl 439.11:440 if MEMOTECH=1441 ld (ef_envo),hl442 else443 ld (ef_voz2),hl444 endif445 ld a,(ef_ritmo) 446.14: sub 12447 jr nc,.14448 add a,12449 ld e,a450 ld d,0451 ld hl,volumen_bajo452 add hl,de453 ld a,(hl)454 if MEMOTECH=1455 ld (ef_jeje),a456 else457 ld (ef_vol2),a458 endif459 460.2: ld a,(ef_ac2)461 inc a462 cp $18463 jr nz,$+4464 sub $08465 ld (ef_ac2),a466 467 ld a,(ef_ac3)468 inc a469 cp $18470 jr nz,$+4471 sub $08472 ld (ef_ac3),a473 ld hl,ef_ta474 inc (hl)475 ld a,(ef_t)476 add a,a477 add a,a478 sub (hl) 479 ret nz 480 ld (hl),a481 dec a 482 ld (ef_cn),a483 ret485volumen_bajo:486 db 10,9,8,7,6,5,5,6,7,8,9,10487490 493nota_a_frec:494 add a,a495 ld e,a496 ld d,0497 ld hl,tabla_notas498 add hl,de499 ld a,(hl)500 inc hl501 ld h,(hl)502 ld l,a503 ret505 514instrumento_clarinete:515 ld bc,clarinete_vibrato516 call sonido_offset517 ld e,a518 rlca519 sbc a,a520 ld d,a521 add hl,de522 ld a,c523 sub a,clarinete_vibrato and 255524 ld bc,clarinete_volumen525 jp sonido_offset527clarinete_vibrato:528 db 0,0,0,0529 db -2,-4,-2,0530 db 2,4,2,0531 db -2,-4,-2,0532 db 2,4,2,0533 db -2,-4,-2,0535clarinete_volumen:536 db 14,14,13,13,12,12,12,12537 db 11,11,11,11,12,12,12,12538 db 11,11,11,11,12,12,12,12540 549instrumento_flauta_pan:550 ld bc,flauta_pan_vibrato551 call sonido_offset552 ld e,a553 rlca554 sbc a,a555 ld d,a556 add hl,de557 ld a,c558 sub a,flauta_pan_vibrato and 255559 rrca560 jr nc,.1561 add hl,hl562.1: rlca563 ld bc,flauta_pan_volumen564 jp sonido_offset566flauta_pan_vibrato:567 db 0,0,0,0568 db 0,1,2,1569 db 0,1,2,1570 db 0,1,2,1571 db 0,1,2,1572 db 0,1,2,1573 574flauta_pan_volumen:575 db 13,13,12,12,12,12,12,12576 db 11,11,11,11,11,11,11,11577 db 11,11,11,11,11,11,11,11579 588instrumento_piano:589 ld bc,piano_volumen590sonido_offset:591 add a,c592 ld c,a593 ld a,0594 adc a,b595 ld b,a596 ld a,(bc)597 ret599piano_volumen:600 db 14,13,13,12,12,11,11,10601 db 10,9,9,8,8,7,7,6602 db 6,6,7,7,6,6,5,5604 if MEMOTECH=1605 608conv_vol:609 add a,tabla_vol and 255610 ld l,a611 ld a,tabla_vol>>8612 adc a,0613 ld h,a614 ld a,(hl)615 ret617tabla_vol:618 db $ff,$ff,$ff,$fe,$fe,$fe,$fd,$fb,$fa,$f8,$f7,$f5,$f4,$f3,$f1,$f0619 endif621 627emite_sonido:628 if MEMOTECH=1629 634 ld a,(ef_vol2)635 or a636 jp nz,.7637 ld a,(ef_vol3)638 or a639 jp z,.7640 ld (ef_vol2),a641 xor a642 ld (ef_vol3),a643 ld hl,(ef_voz3)644 ld (ef_voz2),hl645.7:646 649 ld hl,(ef_voz1)650 ld a,h651 cp 4652 ld a,$0f653 jp nc,.1654 ld a,l655 and $0f656 or $80657 out (PSG),a658 in a,($03)659 add hl,hl660 add hl,hl661 add hl,hl662 add hl,hl663 ld a,h664 and $3f665 out (PSG),a666 in a,($03)667 ld a,(ef_vol1)668 call conv_vol669 and $0f670.1: or $90671 out (PSG),a672 in a,($03)673 676 ld hl,(ef_voz2)677 ld a,h678 cp 4679 ld a,$0f680 jp nc,.2681 ld a,l682 and $0f683 or $a0684 out (PSG),a685 in a,($03)686 add hl,hl687 add hl,hl688 add hl,hl689 add hl,hl690 ld a,h691 and $3f692 out (PSG),a693 in a,($03)694 ld a,(ef_vol2)695 call conv_vol696 and $0f697.2: or $b0698 out (PSG),a699 in a,($03)700 703 ld hl,(ef_voz3)704 ld a,h705 cp 4706 ld a,$0f707 jp nc,.3708 ld a,l709 and $0f710 or $c0711 out (PSG),a712 in a,($03)713 add hl,hl714 add hl,hl715 add hl,hl716 add hl,hl717 ld a,h718 and $3f719 out (PSG),a720 in a,($03)721 ld a,(ef_vol3)722 call conv_vol723 and $0f724.3: or $d0725 out (PSG),a726 in a,($03)727 ld a,(ef_envm)728 cp $ff 729 jr nz,.6 730 ld a,(ef_vol3)731 or a 732 jr nz,.6 733 ld a,(ef_jeje)734 or a 735 jr z,.6 736 call conv_vol737 ld (ef_envm),a738 ld hl,(ef_envo) 739 ld d,h 740 ld e,l 741 add hl,hl 742 add hl,hl743 add hl,hl744 add hl,hl745 add hl,de746 rr h 747 ld l,h 748 ld h,0749 jr nc,$+3750 inc hl751 ld a,l752 and $0f753 or $c0754 out (PSG),a755 in a,($03)756 add hl,hl757 add hl,hl758 add hl,hl759 add hl,hl760 ld a,h761 and $3f762 out (PSG),a763 in a,($03)764 ld b,$eb 765 jp .5767.6: ld a,(ef_envm)768 inc a 769 jr z,.4 770 ld a,(ef_ruido)771 cp 16772 ld b,$ec 773 jp c,.5774 ld b,$ed 776.5: ld a,(ef_cont)777 cp b778 jr z,.4779 ld a,b780 ld (ef_cont),a781 out (PSG),a782 in a,($03)783.4: ld a,(ef_envm)784 out (PSG),a785 in a,($03)786 ld a,$ff787 ld (ef_envm),a788 else789 ld a,(ef_envm)790 inc a 791 ld d,$0b792 jr z,.001793 ld d,$0e794.001: ld hl,ef_voz1795 xor a796.000: out (PSG),a797 push af798 ld a,(hl)799 out (PSG+1),a800 pop af801 inc hl802 inc a803 cp d804 jr nz,.000805 ld a,$ff806 ld (ef_envm),a807 endif808 ret810 813genera_sonido:814 ld hl,modo815 bit 3,(hl) 816 ret nz 817 call emite_sonido818 ld a,(ef_mezc)819 and $c0 820 or $38821 ld (ef_mezc),a822 xor a 823 ld (ef_vol1),a824 ld (ef_vol2),a825 ld (ef_vol3),a826 ld (ef_jeje),a827 ld hl,modo828 bit 1,(hl) 829 ret nz 830 bit 4,(hl) 831 ret nz 832 call genera_musica833 call genera_llave834 call genera_rescate835 call genera_rasca836 call genera_tocado837 call genera_laser838 call genera_disparo839 call genera_explota840 call genera_monstruo841 call genera_megamonstruo842 call genera_berrido843 call genera_vida844 call genera_pierde845 ld hl,ef_band846 bit 6,(hl)847 jr nz,ritmo_variable848 bit 7,(hl)849 ret z850 853ritmo_carrera:854 ld hl,ef_ritmo855 ld a,(hl)856 ex af,af'857 inc (hl)858 ld a,(hl)859 sub 24860 jr nz,$+3861 ld (hl),a862 ex af,af'863 cp 3864 jr c,tambor_1865 cp 6866 jr z,tambor_2867 cp 12868 jr z,tambor_2869 ret871 874ritmo_variable:875 ld hl,ef_ritmo876 inc (hl)877 ld a,(hl)878 sub 48879 jr nz,$+3880 ld (hl),a881 ld hl,ef_tamb882 ld a,(hl)883 or a884 ret z885 cp $80886 jr nc,tambor_22887 call tambor_1888 inc (hl)889 ld a,(hl)890 sub $43891 ret nz892 ld (hl),a893 ret895tambor_1:896 if MEMOTECH=1897 ld b,a898 ld a,(ef_env)899 and 12 900 ld a,4901 jr nz,.0902 xor a903.0: add a,b904 or $f0905 ld (ef_envm),a906 xor a907 ld (ef_ruido),a908 ret909 else910 ld a,$08 911 ld (ef_ruido),a912 push hl913 call activa_tambor914 pop hl915 ret916 endif917tambor_22:918 ld (hl),0919tambor_2:920 if MEMOTECH=1921 xor a922 ld (ef_ruido),a923 ld a,(ef_env)924 and 12 925 ld a,$f4926 jr nz,.0927 ld a,$f0928.0: ld (ef_envm),a929 ret930 else931 ld a,$05 932 ld (ef_ruido),a933 push hl934 call activa_tambor935 pop hl936 ret938 941activa_tambor:942 ld hl,ef_mezc943 ld a,(ef_vol1)944 or a945 jr nz,.1946 ld a,10947 ld (ef_vol1),a948 set 0,(hl)949 res 3,(hl)950 ret952.1: ld a,(ef_vol2)953 or a954 jr nz,.2955 ld a,10956 ld (ef_vol2),a957 set 1,(hl)958 res 4,(hl)959 ret961.2: ld a,(ef_vol3)962 or a963 jr nz,.3964 ld a,10965 ld (ef_vol3),a966 set 2,(hl)967 res 5,(hl)968 ret970.3: res 3,(hl)971 ret972 endif974 975efecto_llave:976 ld a,-1977 ld (ef_cont1),a978 ld hl,ef_band979 set 0,(hl)980 ret982 983efecto_rescate:984 ld a,-1985 ld (ef_cont2),a986 ld hl,ef_band987 set 1,(hl)988 ret990 991efecto_tocado:992 push af993 push hl994 ld a,4995 ld (ef_cont3),a996 ld hl,128997 ld (ef_frec3),hl998 pop hl999 pop af1000 ret1001 1002 1003efecto_disparo:1004 push af1005 push hl1006 ld a,81007 ld (ef_cont4),a1008 pop hl1009 pop af1010 ret1012 1013efecto_explota:1014 push af1015 push hl1016 ld a,101017 ld (ef_cont5),a1018 ld hl,7681019 ld (ef_frec5),hl1020 pop hl1021 pop af1022 ret1024 1025efecto_monstruo:1026 push af1027 push hl1028 ld a,(ef_band)1029 bit 3,a 1030 jr nz,.1 1031 ld a,101032 ld (ef_cont6),a1033 ld hl,10001034 ld (ef_frec6),hl1035 ld hl,7501036 ld (ef_frec7),hl1037 ld hl,5001038 ld (ef_frec8),hl1039 ld hl,ef_band1040 set 2,(hl)1041.1: pop hl1042 pop af1043 ret1045 1046efecto_megamonstruo:1047 push af1048 push hl1049 ld a,401050 ld (ef_cont6),a1051 ld hl,8001052 ld (ef_frec6),hl1053 ld hl,5001054 ld (ef_frec7),hl1055 ld hl,3001056 ld (ef_frec8),hl1057 ld hl,ef_band1058 set 3,(hl)1059 res 2,(hl)1060 pop hl1061 pop af1062 ret1064 1065efecto_berrido:1066 push af1067 push hl1068 ld a,(ix+d_ultimo+1)1069 and $f01070 cp $201071 ld a,$801072 jr z,.11073 xor a1074.1: ld (ef_cont7),a1075 ld hl,ef_band1076 set 4,(hl)1077 pop hl1078 pop af1079 ret1081 1082efecto_vida:1083 push af1084 push hl1085 xor a1086 ld (ef_cont8),a1087 ld hl,ef_band1088 set 5,(hl)1089 pop hl1090 pop af1091 ret1093 1094efecto_pierde:1095 ld (ef_tipo9),a1096 ld a,481097 ld (ef_cont9),a1098 ret1100 1101efecto_laser:1102 ld a,251103 ld (ef_cont10),a1104 ret1106 1107efecto_rasca:1108 ld a,101109 ld (ef_cont11),a1110 ret1112 1115genera_llave:1116 ld hl,ef_band1117 bit 0,(hl)1118 ret z1119 ld a,(ef_cont1)1120 inc a1121 ld (ef_cont1),a1122 cp 321123 jr nz,.11124 res 0,(hl)1125 ret1127.1: ld hl,.21128voz32: ld e,a1129 and 31130 cp 31131 ld a,e1132 ret nz1133 and $fc1134 rrca1135voz31: ld e,a1136 ld d,01137 add hl,de1138 ld a,(hl)1139 inc hl1140 ld h,(hl)1141 ld l,a1142voz3: ld (ef_voz3),hl1143 ld a,151144 ld (ef_vol3),a1145 ret1147genera_llave.2:1148 dw 4531149 dw 2261150 dw 4531151 dw 2261152 dw 3591153 dw 1801154 dw 3011155 dw 1501157 1160genera_rescate:1161 ld hl,ef_band1162 bit 1,(hl)1163 ret z1164 ld a,(ef_cont2)1165 inc a1166 ld (ef_cont2),a1167 cp 481168 jr nz,.11169 res 1,(hl)1170 ret1172.1: ld hl,.21173 jr voz321175.2: dw 4531176 dw 3011177 dw 4531178 dw 3011179 dw 4531180 dw 3591181 dw 4531182 dw 3591183 dw 4531184 dw 2261185 dw 4531186 dw 2261188 1191genera_tocado:1192 ld hl,ef_cont31193 ld a,(hl)1194 or a1195 ret z1196 dec (hl)1197 ld hl,(ef_frec3)1198 add hl,hl1199 ld (ef_frec3),hl1200 jp voz31202 1205genera_disparo:1206 ld hl,ef_cont41207 ld a,(hl)1208 or a1209 ret z1210 dec a1211 ld (hl),a1212 add a,a1213 1214 ld hl,.11215 jp voz311217.1: dw $03c01218 dw $03801219 dw $03401220 dw $03001221 dw $02c01222 dw $02801223 dw $02401224 dw $02001226 1229genera_explota:1230 ld hl,ef_cont51231 ld a,(hl)1232 or a1233 ret z1234 dec (hl)1235 ld hl,(ef_frec5)1236 ld de,251237 add hl,de1238 ld (ef_frec5),hl1239 jp voz31241 1244genera_monstruo:1245 ld hl,ef_band1246 bit 2,(hl)1247 ret z1248 ld a,(ef_cont6)1249 dec a1250 ld (ef_cont6),a1251 jr nz,.11252 res 2,(hl)1253.1: sub 31254 jr nc,.11255 add a,31256 ld hl,(ef_frec6)1257 ld de,21258 add hl,de1259 ld (ef_frec6),hl1260 or a1261 jr nz,.21262 call voz31263 xor a1264.2: ld hl,(ef_frec7)1265 ld de,251266 add hl,de1267 ld (ef_frec7),hl1268 dec a1269 jr nz,.31270 call voz31271 xor a1272.3: ld hl,(ef_frec8)1273 ld de,121274 add hl,de1275 ld (ef_frec8),hl1276 dec a1277 ret nz1278 jp voz31280 1283genera_megamonstruo:1284 ld hl,ef_band1285 bit 3,(hl)1286 ret z1287 ld a,(ef_cont6)1288 dec a1289 ld (ef_cont6),a1290 jr nz,.11291 res 3,(hl)1292.1: sub 31293 jr nc,.11294 add a,31295 ld hl,(ef_frec6)1296 ld de,-201297 jr nz,.41298 ld de,401299.4: add hl,de1300 ld (ef_frec6),hl1301 or a1302 jr nz,.21303 call voz31304 xor a1305.2: ld hl,(ef_frec7)1306 ld de,51307 add hl,de1308 ld (ef_frec7),hl1309 dec a1310 jr nz,.31311 call voz31312 xor a1313.3: ld hl,(ef_frec8)1314 inc hl1315 inc hl1316 ld (ef_frec8),hl1317 dec a1318 ret nz1319 jp voz31321 1324genera_berrido:1325 ld hl,ef_band1326 bit 4,(hl)1327 ret z1328 ld a,(ef_cont7)1329 ld b,a1330 and $801331 ld c,a1332 ld de,5001333 jr z,.21334 ld de,2501335.2: ld a,b1336 inc a1337 and $7f1338 cp 251339 jr nz,.11340 res 4,(hl)1341.1: or c1342 ld (ef_cont7),a1343 and 61344 srl a1345 ld h,a1346 ld l,01347 srl h1348 rr l1349 add hl,de1350 jp voz31352 1355genera_vida:1356 ld hl,ef_band1357 bit 5,(hl)1358 ret z1359 ld a,(ef_cont8)1360 inc a1361 ld (ef_cont8),a1362 cp 491363 jr nz,.11364 res 5,(hl)1365.1: and 41366 ret nz1367 ld a,(ef_cont8)1368 ld l,a1369 ld a,1001370 sub l1371 ld l,a1372 ld h,01373 jp voz31375 1378genera_pierde:1379 ld a,(ef_cont9)1380 or a1381 ret z1382 dec a1383 ld (ef_cont9),a1384 cp 471385 ld hl,3181386 jr z,.11387 cp 311388 ld hl,3481389 jr z,.11390 cp 151391 ld hl,4281392 jr z,.11393 ld hl,(ef_frec9)1394 ld d,h1395 ld e,l1396 add hl,hl1397 add hl,hl1398 add hl,hl1399 ld l,h1400 ld h,01401 add hl,de1402.1: ld (ef_frec9),hl1403 ld a,(ef_tipo9)1404 or a 1405 jr z,.21406 srl h1407 rr l1408.2: jp voz31410 1413genera_laser:1414 ld a,(ef_cont10)1415 or a1416 ret z1417 dec a1418 ld (ef_cont10),a1419 cp 241420 ld hl,1501421 jr z,.11422 cp 161423 ld l,1201424 jr z,.11425 cp 81426 ld l,901427 jr z,.11428 ld hl,(ef_frec10)1429 ld a,l1430 sub 101431 ld l,a1432.1: ld (ef_frec10),hl1433 jp voz31435 1438genera_rasca:1439 ld hl,ef_cont111440 ld a,(hl)1441 or a1442 ret z1443 dec (hl)1444 if MEMOTECH=11445 rrca1446 rrca1447 dec a1448 and 31449 add a,a1450 add a,a1451 add a,a1452 ld (ef_ruido),a1453 ld a,$f31454 ld (ef_envm),a1455 ret1456 else1457 add a,161458 ld (ef_ruido),a1459 jp activa_tambor1460 endif1462 1463tabla_notas:1464 1465 dw 01466 1467 dw 1923,1812,1712,1603,1524,1437,1359,1276,1202,1136,1068,10161468 1469 dw 954,899,850,801,758,714,676,638,601,568,536,5061470 1471 dw 477,451,425,402,379,358,338,319,301,284,268,2531472 1473 dw 239,226,213,201,190,179,169,159,150,142,134,1271474 1475 dw 120,113,106,100,95,89,84,80,75,71,67,631476 1477 dw 601478 1479zw.asm5218 historia.asm1 25 30presentacion:31.0:32 call inicia_sonido33 call limpia_sprites34 xor a 35 ld (modo),a36 call espera_int37 CALL PANTALLA_NEGRA38 41 call espera_int42 LD BC,$A201 43 CALL WRTVDP44 49 ld a,(ganado)50 rrca51 LD HL,logo_1 52 jr nc,$+553 LD HL,logo_21 54 LD DE,$000055 CALL unpack56 ld a,(ganado)57 rrca58 LD HL,logo_2 59 jr nc,$+560 LD HL,logo_22 61 LD DE,$200062 CALL unpack63 67 LD HL,figuras_sprites68 LD DE,$180069 CALL unpack70 ld a,(ganado)71 rrca72 jr nc,.55773 call zona_dura74 LD HL,sprites_heroes+$90*875 LD DE,$180076 LD BC,$004077 CALL LDIRVM78 call zona_facil79.557:81 84 ld a,(quien)85 or a 86 jr z,.558 87 ld hl,bits188 ld (hl),$08 89 inc hl90 ld (hl),$09 91 inc hl92 ld (hl),$0093 inc hl94 ld de,record95 call dos_digitos296 call dos_digitos297 call dos_digitos298 ld (hl),$2099 ld a,(quien)100 add a,(hl)101 inc hl102 ld (hl),$00103 inc hl104 ld (hl),a105 inc hl106 ld (hl),$15 107 inc hl108 ld (hl),$90 109 ld hl,$0c88110 ld de,bits1111 ld c,$e1112 call visual_mensaje1113.558:114 117 if MEMOTECH=1118 call espera_int119 endif120 LD BC,$E201 121 CALL WRTVDP122 ld hl,modo123 set 0,(hl) 124 ld hl,sprite_pistola125 ld de,sprites126 ld bc,8127 ldir128.906:129 ld de,(ticks)130.1: call espera_int131 call parpadeo_pistola132 ret z 133 ld a,c134 rrca 135 jr nc,.900136 rrca137 rrca 138 jr nc,.901139 or a140 sbc hl,de141 ld bc,800 142 sbc hl,bc143 jr c,.1144 jr .907146 147.900:148 ld a,(sprites)149 cp $69150 jr z,.903151 sub $0F152 jr .903154 155.901: ld a,(sprites)156 cp $87157 jr z,.903158 add a,$0F159.903: ld (sprites),a160 ld (sprites+4),a161 ld de,(ticks)162.904: call parpadeo_pistola163 ret z 164 or a165 sbc hl,de166 ld bc,18167 sbc hl,bc168 jr c,.904169 jr .906171 174.907: call limpia_sprites175 call pantalla_negra176 call musica_historia177 ld hl,$0040178 ld de,mensaje_21179 ld c,$e1180 call visual_mensaje1181 ld hl,$0300182 ld de,mensaje_22183 ld c,$a1184 call visual_mensaje1185 ld de,(ticks)186.908: call espera_int187 call boton_oprimido 188 jp z,.0189 ld hl,(ticks)190 or a191 sbc hl,de192 ld bc,1200 193 sbc hl,bc194 jr c,.908196.909: call pantalla_negra197 call espera_int198 ld ix,historia_retratos199.911: call carga_dato200 ld a,h201 or l202 jr z,.910203 call carga_retrato204 call carga_dato205 call retardo_cuadro206 jr .911208.910: call retardo_cuadro2209 call retardo_cuadro2210 call retardo_cuadro2211 jp .0213carga_dato:214 ld l,(ix+0)215 ld h,(ix+1)216 ld e,(ix+2)217 ld d,(ix+3)218 ld bc,4219 add ix,bc220 ret222parpadeo_pistola:223 call espera_int224 ld a,(ticks)225 and 12226 ld bc,$0e0f227 jr nz,.905228 ld bc,$0101229.905: ld a,b230 ld (sprites+3),a231 ld a,c232 ld (sprites+7),a233 call boton_oprimido 234 ld hl,(ticks)235 ret237sprite_pistola:238 db $69,$88,$04,$0e 239 db $69,$88,$00,$0f 241historia_retratos:242 dw retrato_investigadora2,$0000,$0148,mensaje_23243 dw retrato_jefe2a,$00c0,$0478,mensaje_24244 dw retrato_telefonista,$0860,$0ba8,mensaje_25245 dw retrato_delta_1,$10c0,$1380,mensaje_26246 dw retrato_delta_2,$1000,$1648,mensaje_27247 dw 0249 253retardo_cuadro:254 ld c,$21255 call visual_mensaje1256retardo_cuadro2:257 ld de,(ticks)258.0: call espera_int259 call boton_oprimido260 pop hl261 jp z,presentacion.0262 push hl263 ld hl,(ticks)264 sbc hl,de265 ld bc,250266 sbc hl,bc267 jr c,.0268 call espera_int269 ret271 275boton_oprimido:276 ld c,$ff277 if MEMOTECH=1278 ld a,$fb279 out (KEYSEL),a 280 ex (sp),hl281 ex (sp),hl282 in a,(KEY1) 283 bit 7,a284 jr nz,$+4285 res 0,c 286 ld a,$bf287 out (KEYSEL),a 288 ex (sp),hl289 ex (sp),hl290 in a,(KEY1) 291 bit 7,a292 jr nz,$+4293 res 2,c 294 ld a,$df295 out (KEYSEL),a 296 ex (sp),hl297 ex (sp),hl298 in a,(KEY1) 299 bit 7,a300 jr nz,$+4301 res 6,c 302 ld a,$fb303 out (KEYSEL),a 304 ex (sp),hl305 ex (sp),hl306 in a,(KEY1) 307 bit 1,a308 jr nz,$+4309 res 0,c 310 ld a,$ef311 out (KEYSEL),a 312 ex (sp),hl313 ex (sp),hl314 in a,(KEY1) 315 bit 1,a 316 jr nz,$+4317 res 2,c 318 ld a,$fb319 out (KEYSEL),a 320 ex (sp),hl321 ex (sp),hl322 in a,(KEY2) 323 bit 0,a 324 jr nz,$+4325 res 6,c 326 else327 ld a,$0e328 out (PSG+0),a 329 ld a,$f7330 out (PSG+1),a331 ex (sp),hl332 ex (sp),hl333 ld a,$0f334 out (PSG+0),a 335 in a,(PSG)336 bit 6,a337 jr nz,$+4338 res 0,c 339 ld a,$0e340 out (PSG+0),a 341 ld a,$fd342 out (PSG+1),a343 ex (sp),hl344 ex (sp),hl345 ld a,$0f346 out (PSG+0),a 347 in a,(PSG)348 bit 5,a349 jr nz,$+4350 res 2,c 351 ld a,$0e352 out (PSG+0),a 353 ld a,$fe354 out (PSG+1),a355 ex (sp),hl356 ex (sp),hl357 ld a,$0f358 out (PSG+0),a 359 in a,(PSG)360 bit 6,a361 jr nz,$+4362 res 6,c 363 ld a,$0e364 out (PSG+0),a 365 ld a,$f7366 out (PSG+1),a367 ex (sp),hl368 ex (sp),hl369 ld a,$0f370 out (PSG+0),a 371 in a,(PSG)372 bit 6,a373 jr nz,$+4374 res 0,c 375 ld a,$0e376 out (PSG+0),a 377 ld a,$bf378 out (PSG+1),a379 ex (sp),hl380 ex (sp),hl381 ld a,$0f382 out (PSG+0),a 383 in a,(PSG)384 bit 5,a 385 jr nz,$+4386 res 2,c 387 ld a,$0e388 out (PSG+0),a 389 ld a,$fb390 out (PSG+1),a391 ex (sp),hl392 ex (sp),hl393 ld a,$0f394 out (PSG+0),a 395 in a,(PSG)396 bit 5,a 397 jr nz,$+4398 res 6,c 399 endif400 ld a,c401 and $40402 ret404 407toma_final:408 call limpia_sprites409 call espera_int410 call musica_silencio411 call espera_int412 LD HL,modo413 res 2,(hl) 414 set 5,(hl) 415 call PANTALLA_NEGRA416 419 call espera_int420 LD BC,$A201 421 CALL WRTVDP422 425 LD HL,fin_1 426 LD DE,$0000427 CALL unpack428 LD HL,fin_2 429 LD DE,$2000430 CALL unpack431 if MEMOTECH=1432 call espera_int433 endif434 LD BC,$E201 435 CALL WRTVDP436 call musica_final437 ld bc,600438 call retardo439 ld hl,ganado440 inc (hl)441 ld hl,modo442 res 5,(hl)443 jp REINICIO445 448retardo:449 ld de,(ticks)450.0: call espera_int451 ld hl,(ticks)452 or a453 sbc hl,de454 sbc hl,bc455 jr c,.0456 ret458 462zona_historia:463 push ix464 push iy465 call zona_dura466 ld bc,$0100467 ld a,(ix+d_refx)468 or a469 jr nz,.1470 ld hl,$3800471 ld a,$ff472 call filvrm473 ld hl,letras474 ld de,$0000475 ld bc,$01a8476 call LDIRVM477 call zona_facil478 ld hl,color_letras479 ld de,$2000480 call unpack481 ld hl,graf_bitmap482 ld de,$01c0483 call unpack484 ld de,$21c0485 jr .2487.1: ld hl,$3a00488 xor a489 call filvrm490 ld hl,letras491 ld de,$1000492 ld bc,$01a8493 call LDIRVM494 call zona_facil495 ld hl,color_letras496 ld de,$3000497 call unpack498 ld hl,graf_bitmap499 ld de,$11c0500 call unpack501 ld de,$31c0502.2: ld hl,graf_color503 call unpack504 pop iy505 pop ix506 ret508 511avanza_historia:512 ld a,(ix+d_estado)513 or a514 ret z515 ld a,(ix+d_tiempo)516 sub 7 517 or (ix+d_tiempo+1)518 call z,zona_historia_2 523 ld a,(ix+d_tiempo)524 dec a 525 or (ix+d_tiempo+1)526 ret nz527 ld a,(ix+d_estado)528 cp $fd 529 jp z,.1530 cp $ff 531 jp z,.2532 cp $fe 533 jp nz,visualiza_historia534 537 ld (ix+d_estado),0 538 call zona_historia539 call actualiza_indicadores_nivel540 res 3,(ix+d_objeto) 541 xor a542 ld (ix+d_tiempo),a 543 ld (ix+d_tiempo+1),a544 ld a,(ix+d_sprite)545 and $04 546 rlca547 rlca548 rlca549 rlca550 or $08551 ld (ix+d_sprite),a552 ld l,(ix+d_moni)553 ld h,(ix+d_moni+1)554 ld de,16 555 add hl,de556 push iy557 push hl558 pop iy559 ld (iy+d_tipo),12 560 ld (iy+d_paso),4 561 ld (iy+d_velocidad),4562 ld (iy+d_dx),12 563 pop iy564 ret566 569.1: call zona_historia 570 xor a571 ld (ix+d_estado),a 572 ld (ix+d_tiempo),a 573 ld (ix+d_tiempo+1),a574 ld (ix+d_nivel),a 575 ld (ix+d_rescatados),a 576 ld a,(ix+d_seccion)577 add a,$10 578 ld (ix+d_seccion),a579 ld (ix+d_energia),6 582 ld a,(ix+d_refx)583 inc a584 ld (ix+d_basex),a 585 ld (ix+d_x),a 586 ld a,(ix+d_refy)587 add a,$10588 ld (ix+d_y),a 589 ld (ix+d_basey),a 590 ld (ix+d_paso),2591 ld (ix+d_velocidad),2592 595 ld l,(ix+d_mapa)596 ld h,(ix+d_mapa+1)597 ld b,51598 ld (hl),0599 inc hl600 djnz $-3601 call musica_general602 605 call actualiza_indicadores_nivel606 609 jp efecto_vida611 614.2: xor a615 ld (ix+d_estado),a 616 ld (ix+d_tiempo),a 617 ld (ix+d_tiempo+1),a618 set 7,(ix+d_objeto) 619 ret621 624muestra_lema:625 ld a,(ix+d_seccion)626 and $30627 ld b,1 628 jr z,.1629 ld b,11 630 cp $10631 jr z,.1 632 ld b,23 633.1: ld a,b634640inicia_historia:641 ld (ix+d_estado),a642 ld (ix+d_tiempo),8643 ld (ix+d_tiempo+1),0644 647zona_historia_2:648 ld a,(ix+d_estado)649 inc a 650 ret z 651 call zona_dura652 ld bc,384653 ld a,(ix+d_refx)654 or a655 ld hl,$3800656 ld a,$ff657 jr z,.1658 ld hl,$3980659 xor a660.1: call FILVRM661 jp zona_facil663 667visualiza_historia:668 ld hl,tabla_historia-4669 ld a,(ix+d_estado)670 add a,a671 add a,a672 ld e,a673 ld d,0674 add hl,de675 ld a,(ix+d_refx)676 or a 677 jr z,.1 678 inc hl 679 inc hl680 scf681.1: ld a,(hl)682 inc hl683 ld h,(hl)684 ld l,a685 688 ld a,(hl) 689 inc hl690 push af691 ld a,(hl) 692 jr nc,.0 693 and $f0694 or $08695 jr .7696.0: and $f0697.7: push hl698 ld e,a699 ld d,0700 ld hl,tabla_retratos-16701 add hl,de702 ld e,(hl) 703 inc hl704 ld d,(hl)705 inc hl706 ld b,(hl) 707 inc hl708 ld a,(hl) 709 ld (hist_tem),a710 inc hl711 ld c,(hl) 712 inc hl713 ld a,(hl)714 inc hl715 push hl716 ex de,hl717 ld e,c718 ld d,a719 ld a,b720 push de721 push hl722 ld hl,modo723 set 5,(hl) 724 pop hl725 call carga_retrato 726 pop de727 srl d728 rr e729 srl d730 rr e731 srl d732 rr e733 call zona_dura734 ld hl,$3800735 add hl,de736 ld c,8 737.6: ld b,8 738 ld a,l739 call WRTVRM740 inc l741 djnz $-3742 ld a,l743 add a,24744 ld l,a745 dec c746 jr nz,.6747 call zona_facil748 ld hl,modo749 res 5,(hl) 750 pop hl751 ld e,(hl) 752 inc hl753 ld d,(hl)754 pop hl755 ld a,(hl) 756 and $0f757 ld b,a758 inc hl759 ld a,(hist_tem)760 or a 761 jr z,.5 762 ld a,15 763 sub b764 add a,a765 add a,a766 add a,a767 add a,e768 ld e,a769.5: ex de,hl770 call visual_mensaje_idioma771 ld (ix+d_tiempo),300 and 255772 ld (ix+d_tiempo+1),300 >> 8773 pop af774 or a 775 jr nz,.2776 inc (ix+d_estado)777 ret779.2: dec a 780 jr nz,.3781 inc (ix+d_estado)782 ld a,(ix+d_rescatados)783 or a784 ret nz785.8: inc (ix+d_estado)786 ret788.3: dec a 789 jr nz,.4790 inc (ix+d_estado)791 jr .8793.4: 794 add a,$fc 795 ld (ix+d_estado),a 796 ret798 805tabla_retratos:806 dw retrato_delta_1,$0100+(retrato_delta_1>>16),$0080,$0200807 dw retrato_delta_2,$0000+(retrato_delta_2>>16),$1040,$1288808 dw retrato_telefonista,$0000+(retrato_telefonista>>16),$0000,$0248809 dw retrato_telefonista,$0100+(retrato_telefonista>>16),$10c0,$1240810 dw retrato_investigadora2,$0000+(retrato_investigadora2>>16),$0000,$0248811 dw retrato_investigadora2,$0100+(retrato_investigadora2>>16),$10c0,$1240812 dw retrato_jefe2a,$0000+(retrato_jefe2a>>16),$0000,$0248813 dw retrato_jefe2a,$0100+(retrato_jefe2a>>16),$10c0,$1240814 dw retrato_jefe2b,$0000+(retrato_jefe2b>>16),$0000,$0248815 dw retrato_jefe2b,$0100+(retrato_jefe2b>>16),$10c0,$1240817 820tabla_historia:821 824 dw historia_1a,historia_1b 825 dw historia_2,historia_2 826 dw historia_3a,historia_3b 827 dw historia_4a,historia_4b 828 dw historia_5,historia_5 829 dw historia_6,historia_6 833 dw historia_7a,historia_7b 834 dw historia_8,historia_8 835 dw historia_9a,historia_9b 836 dw historia_10,historia_10 840 dw historia_11a,historia_11b 841 dw historia_12,historia_12 842 dw historia_13a,historia_13b 843 dw historia_14a,historia_14b 844 dw historia_15,historia_15 845 dw historia_16,historia_16 849 dw historia_17a,historia_17b 850 dw historia_18,historia_18 851 dw historia_19a,historia_19b 852 dw historia_20,historia_20 853 dw historia_21a,historia_21b 854 dw historia_22,historia_22 858 dw historia_23a,historia_23b 859 dw historia_24,historia_24 860 dw historia_25a,historia_25b 861 dw historia_26a,historia_26b 862 dw historia_27,historia_27 863 dw historia_28a,historia_28b 864zw.asm5220 5224unpack:5225 call zona_dura52265227 ex de,hl5228 call SETWRT5229 ex de,hl52305231 ld a,(hl)5232 inc hl5233 exx5234 ld de,05235 add a,a5236 inc a5237 rl e5238 add a,a5239 rl e5240 add a,a5241 rl e5242 rl e5243 ld hl,modes5244 add hl,de5245 ld c,(hl)5246 inc hl5247 ld b,(hl)5248 push bc5249 pop ix5250 ld e,15251 exx5252 ld iy,loop52545255literal:ld c,VDP5256 outi5257 inc de5258loop: add a,a5259 call z,getbit5260 jr nc,literal52625263 exx5264 ld h,d5265 ld l,e5266getlen: add a,a5267 call z,getbitexx5268 jr nc,lenok5269lus: add a,a5270 call z,getbitexx5271 adc hl,hl5272 jp c,zona_facil5273 add a,a5274 call z,getbitexx5275 jr nc,lenok5276 add a,a5277 call z,getbitexx5278 adc hl,hl5279 jp c,zona_facil5280 add a,a5281 call z,getbitexx5282 jr c,lus5283lenok: inc hl5284 exx5285 ld c,(hl)5286 inc hl5287 ld b,05288 bit 7,c5289 jr z,offsok5290 jp (ix)5292mode6: add a,a5293 call z,getbit5294 rl b5295mode5: add a,a5296 call z,getbit5297 rl b5298mode4: add a,a5299 call z,getbit5300 rl b5301mode3: add a,a5302 call z,getbit5303 rl b5304mode2: add a,a5305 call z,getbit5306 rl b5307 add a,a5308 call z,getbit5309 jr nc,offsok5310 or a5311 inc b5312 res 7,c5313offsok: inc bc5314 push hl5315 exx5316 push hl5317 exx5318 ld l,e5319 ld h,d5320 sbc hl,bc5321 pop bc5322 ex af,af'5323loop2: call RDVRM5324 ex de,hl5325 call WRTVRM5326 ex de,hl 5327 inc hl 5328 inc de 5329 dec bc 5330 ld a,b 5331 or c 5332 jr nz,loop2 5333 ex af,af'5334 pop hl5335 jp (iy)5337getbit: ld a,(hl)5338 inc hl5339 rla5340 ret5342getbitexx:5343 exx5344 ld a,(hl)5345 inc hl5346 exx5347 rla5348 ret5350modes:5351 dw offsok5352 dw mode25353 dw mode35354 dw mode45355 dw mode55356 dw mode65358 5361 sprites.asm1 25 28sprites_heroes:29 30 db $00,$01,$03,$00,$04,$06,$0F,$0F,$0F,$0F,$00,$0F,$0E,$1C,$38,$1C31 db $00,$80,$00,$00,$00,$0F,$F7,$CC,$F0,$80,$C0,$C0,$C0,$E0,$70,$7C32 33 db $01,$03,$00,$04,$06,$0F,$0F,$0F,$0F,$03,$0C,$0F,$0F,$0E,$0F,$0134 db $80,$00,$00,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$C0,$80,$80,$40,$F035 36 db $01,$03,$00,$04,$06,$0F,$0F,$0F,$0F,$03,$0C,$0F,$07,$07,$08,$0F37 db $80,$00,$00,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$80,$00,$C0,$00,$8038 39 db $01,$03,$00,$04,$06,$0F,$0F,$0F,$0F,$03,$0C,$0F,$0F,$0D,$19,$1E40 db $80,$00,$00,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$C0,$80,$80,$F0,$0041 42 db $00,$01,$00,$00,$00,$F0,$EF,$33,$0F,$01,$03,$03,$03,$07,$0E,$3E43 db $00,$80,$C0,$00,$20,$60,$F0,$F0,$F0,$F0,$00,$F0,$70,$38,$1C,$3844 45 db $01,$00,$00,$00,$F0,$EF,$33,$0F,$03,$01,$03,$03,$01,$01,$02,$0F46 db $80,$C0,$00,$20,$60,$F0,$F0,$F0,$F0,$C0,$30,$F0,$F0,$70,$F0,$8047 48 db $01,$00,$00,$00,$F0,$EF,$33,$0F,$03,$01,$03,$01,$00,$03,$00,$0149 db $80,$C0,$00,$20,$60,$F0,$F0,$F0,$F0,$C0,$30,$F0,$E0,$E0,$10,$F050 51 db $01,$00,$00,$00,$F0,$EF,$33,$0F,$03,$01,$03,$03,$01,$01,$0F,$0052 db $80,$C0,$00,$20,$60,$F0,$F0,$F0,$F0,$C0,$30,$F0,$F0,$B0,$98,$7853 54 db $03,$00,$00,$00,$00,$1C,$1B,$0C,$05,$0B,$05,$06,$07,$0E,$0E,$0E55 db $C0,$00,$00,$00,$00,$38,$D8,$30,$A0,$D0,$A0,$60,$E0,$00,$00,$0056 57 db $03,$00,$00,$00,$00,$1C,$1B,$0C,$05,$0B,$05,$06,$0F,$0E,$00,$0058 db $C0,$00,$00,$00,$00,$38,$D8,$30,$A0,$D0,$A0,$60,$F0,$70,$00,$0059 60 db $03,$00,$00,$00,$00,$1C,$1B,$0C,$05,$0B,$05,$06,$07,$00,$00,$0061 db $C0,$00,$00,$00,$00,$38,$D8,$30,$A0,$D0,$A0,$60,$E0,$70,$70,$7062 63 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0064 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0065 66 db $03,$07,$03,$00,$04,$1F,$1F,$0F,$0F,$0F,$01,$06,$07,$0E,$0E,$0E67 db $C0,$E0,$C0,$00,$20,$F8,$F8,$F0,$F0,$F0,$80,$60,$E0,$00,$00,$0068 69 db $03,$07,$03,$00,$04,$1F,$1F,$0F,$0F,$0F,$01,$06,$0F,$0E,$00,$0070 db $C0,$E0,$C0,$00,$20,$F8,$F8,$F0,$F0,$F0,$80,$60,$F0,$70,$00,$0071 72 db $03,$07,$03,$00,$04,$1F,$1F,$0F,$0F,$0F,$01,$06,$07,$00,$00,$0073 db $C0,$E0,$C0,$00,$20,$F8,$F8,$F0,$F0,$F0,$80,$60,$E0,$70,$70,$7074 75 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0076 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0077 78 db $00,$07,$0A,$0A,$0C,$06,$0F,$0F,$07,$07,$00,$0F,$0E,$1C,$38,$1C79 db $00,$00,$00,$80,$00,$0F,$F7,$CC,$F0,$80,$C0,$C0,$C0,$E0,$70,$7C80 81 db $07,$0A,$0A,$0C,$06,$0F,$0F,$07,$07,$03,$0C,$0F,$07,$0E,$0F,$0182 db $00,$00,$80,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$C0,$80,$80,$40,$F083 84 db $07,$0A,$0A,$0C,$06,$0F,$0F,$07,$07,$03,$0C,$0F,$07,$07,$08,$0F85 db $00,$00,$80,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$80,$00,$C0,$00,$8086 87 db $07,$0A,$0A,$0C,$06,$0F,$0F,$07,$07,$03,$0C,$0F,$07,$0D,$19,$1E88 db $00,$00,$80,$00,$0F,$F7,$CC,$F0,$C0,$80,$C0,$C0,$80,$80,$F0,$0089 90 db $00,$00,$00,$01,$00,$F0,$EF,$33,$0F,$01,$03,$03,$03,$07,$0E,$3E91 db $00,$E0,$50,$50,$30,$60,$F0,$F0,$E0,$E0,$00,$F0,$70,$38,$1C,$3892 93 db $00,$00,$01,$00,$F0,$EF,$33,$0F,$03,$01,$03,$03,$01,$01,$02,$0F94 db $E0,$50,$50,$30,$60,$F0,$F0,$E0,$E0,$C0,$30,$F0,$E0,$70,$F0,$8095 96 db $00,$00,$01,$00,$F0,$EF,$33,$0F,$03,$01,$03,$01,$00,$03,$00,$0197 db $E0,$50,$50,$30,$60,$F0,$F0,$E0,$E0,$C0,$30,$F0,$E0,$E0,$10,$F098 99 db $00,$00,$01,$00,$F0,$EF,$33,$0F,$03,$01,$03,$03,$01,$01,$0F,$00100 db $E0,$50,$50,$30,$60,$F0,$F0,$E0,$E0,$C0,$30,$F0,$E0,$B0,$98,$78101 102 db $03,$00,$00,$02,$00,$0C,$1B,$0C,$05,$03,$05,$06,$07,$06,$07,$07103 db $C0,$00,$00,$40,$00,$30,$58,$30,$A0,$C0,$A0,$70,$F0,$00,$00,$00104 105 db $03,$00,$00,$02,$00,$0C,$1B,$0C,$05,$03,$05,$0E,$0F,$0E,$00,$00106 db $C0,$00,$00,$40,$00,$30,$58,$30,$A0,$C0,$A0,$70,$F0,$70,$00,$00107 108 db $03,$00,$00,$02,$00,$0C,$1B,$0C,$05,$03,$05,$0E,$0F,$00,$00,$00109 db $C0,$00,$00,$40,$00,$30,$58,$30,$A0,$C0,$A0,$60,$E0,$60,$E0,$E0110 111 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00112 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00113 114 db $03,$05,$05,$05,$03,$0C,$1F,$0F,$07,$07,$01,$06,$07,$06,$07,$07115 db $C0,$60,$60,$60,$C0,$30,$F8,$F0,$E0,$E0,$80,$70,$F0,$00,$00,$00116 117 db $03,$05,$05,$05,$03,$0C,$1F,$0F,$07,$07,$01,$0E,$0F,$0E,$00,$00118 db $C0,$60,$60,$60,$C0,$30,$F8,$F0,$E0,$E0,$80,$70,$F0,$70,$00,$00119 120 db $03,$05,$05,$05,$03,$0C,$1F,$0F,$07,$07,$01,$0E,$0F,$00,$00,$00121 db $C0,$60,$60,$60,$C0,$30,$F8,$F0,$E0,$E0,$80,$60,$E0,$60,$E0,$E0122 123 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00124 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00125 126 db $00,$00,$01,$03,$03,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00127 db $00,$00,$80,$C0,$C0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00128 129 db $30,$78,$79,$33,$03,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00130 db $0C,$1E,$9E,$CC,$C0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00131 132 db $03,$06,$00,$00,$04,$0F,$0F,$0F,$0F,$03,$0C,$0F,$07,$07,$07,$07133 db $00,$00,$00,$00,$00,$80,$C0,$C0,$80,$60,$60,$A0,$A0,$00,$00,$C0134 135 db $0E,$14,$15,$18,$04,$0F,$0F,$07,$07,$03,$0C,$0F,$07,$07,$07,$07136 db $00,$00,$00,$00,$00,$80,$C0,$C0,$80,$60,$60,$A0,$A0,$00,$00,$C0137 138 db $01,$03,$03,$05,$06,$0F,$0F,$0F,$0F,$03,$0C,$0F,$0F,$0E,$0F,$01139 db $E0,$A0,$F0,$E0,$0F,$F7,$CC,$F0,$C0,$80,$C0,$C0,$80,$80,$40,$F0140 141 db $00,$00,$00,$02,$00,$00,$00,$00,$00,$03,$00,$00,$00,$10,$30,$1C142 db $00,$40,$00,$10,$00,$00,$37,$0C,$30,$80,$00,$00,$40,$60,$30,$3C143 144 147sprites_jefes:148 149 db $00,$00,$0F,$3F,$61,$5E,$53,$5B,$59,$6E,$13,$3C,$38,$1F,$15,$15150 db $00,$00,$FF,$FF,$FF,$7F,$41,$3D,$65,$6C,$4D,$BB,$47,$FE,$59,$5B151 152 db $00,$B0,$B6,$DE,$DB,$DB,$9B,$B6,$76,$C2,$BC,$7E,$7D,$3B,$3A,$75153 db $00,$00,$00,$80,$40,$40,$50,$D8,$C8,$8C,$86,$86,$0E,$0E,$FE,$FE154 155 db $00,$01,$15,$0F,$03,$00,$00,$00,$04,$06,$19,$1B,$07,$01,$00,$00156 db $18,$51,$E3,$EF,$C7,$30,$6D,$CD,$9B,$13,$07,$CF,$B7,$7B,$3C,$0C157 158 db $BB,$D7,$CF,$DF,$BF,$7E,$FE,$1D,$0B,$07,$01,$02,$0F,$33,$0F,$3C159 db $BE,$BE,$BC,$BC,$78,$E0,$00,$E0,$F0,$80,$78,$F4,$6C,$BC,$C0,$00160 161 db $0F,$3F,$61,$5E,$53,$5B,$59,$4E,$60,$13,$3C,$38,$1F,$15,$15,$00162 db $FE,$FF,$FF,$FF,$47,$3B,$65,$6D,$4D,$39,$83,$47,$FE,$59,$5B,$18163 164 db $00,$B0,$B6,$DE,$DB,$DB,$9B,$B6,$76,$C2,$BC,$7E,$3D,$1E,$1E,$1E165 db $00,$00,$00,$80,$40,$40,$50,$D8,$C8,$8C,$86,$86,$0E,$8E,$BE,$BE166 167 db $00,$15,$1F,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00168 db $18,$51,$E2,$EE,$05,$30,$6C,$CC,$98,$10,$18,$1E,$02,$1E,$00,$07169 170 db $1E,$0F,$C0,$EF,$EF,$E0,$0D,$0D,$09,$09,$16,$DA,$DA,$EE,$01,$BB171 db $BE,$BE,$3C,$3C,$78,$60,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00172 173 db $00,$00,$00,$01,$02,$02,$0A,$1B,$13,$31,$61,$61,$70,$70,$7F,$7F174 db $00,$0D,$6D,$7B,$DB,$DB,$D9,$6D,$6E,$43,$3D,$7E,$BE,$DC,$5C,$AE175 176 db $00,$00,$FF,$FF,$FF,$FE,$82,$BC,$A6,$36,$B2,$DD,$E2,$7F,$9A,$DA177 db $00,$00,$F0,$FC,$86,$7A,$CA,$DA,$9A,$76,$C8,$3C,$1C,$F8,$A8,$A8178 179 db $7D,$7D,$3D,$3D,$1E,$07,$00,$07,$0F,$01,$1E,$2F,$36,$3D,$03,$00180 db $DD,$EB,$F3,$FB,$FD,$7E,$7F,$B8,$D0,$E0,$80,$40,$F0,$CC,$F0,$3C181 182 db $18,$8A,$C7,$F7,$E3,$0C,$B6,$B3,$D9,$C8,$E0,$F3,$ED,$DE,$3C,$30183 db $00,$80,$A8,$F0,$C0,$00,$00,$00,$20,$60,$98,$D8,$E0,$80,$00,$00184 185 db $00,$00,$00,$01,$02,$02,$0A,$1B,$13,$31,$61,$61,$70,$71,$7D,$7D186 db $00,$0D,$6D,$7B,$DB,$DB,$D9,$6D,$6E,$43,$3D,$7E,$BC,$78,$78,$78187 188 db $7F,$FF,$FF,$FF,$E2,$DC,$A6,$B6,$B2,$9C,$C1,$E2,$7F,$9A,$DA,$18189 db $F0,$FC,$86,$7A,$CA,$DA,$9A,$72,$06,$C8,$3C,$1C,$F8,$A8,$A8,$00190 191 db $7D,$7D,$3C,$3C,$1E,$06,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00192 db $78,$F0,$03,$F7,$F7,$07,$B0,$B0,$90,$90,$68,$5B,$5B,$77,$80,$DD193 194 db $18,$8A,$47,$77,$A0,$0C,$36,$33,$19,$08,$18,$78,$40,$78,$00,$E0195 db $00,$A8,$F8,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00196 197 db $03,$04,$09,$12,$15,$0A,$09,$19,$19,$1A,$1B,$14,$15,$15,$14,$14198 db $E0,$16,$E8,$13,$FC,$3F,$DC,$6B,$26,$E4,$17,$F8,$AF,$00,$DB,$92199 200 db $00,$C0,$20,$D0,$28,$D4,$54,$AA,$AB,$AA,$6B,$EA,$D5,$D5,$5B,$6B201 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$C0,$60,$B0,$D8,$EC,$F6,$FB202 203 db $0A,$0A,$00,$00,$00,$00,$00,$00,$00,$00,$08,$04,$09,$05,$01,$00204 db $49,$6D,$3F,$00,$07,$07,$06,$09,$1A,$11,$08,$1D,$B8,$D0,$E0,$60205 206 db $6B,$57,$CF,$1F,$BE,$5D,$EA,$71,$87,$7F,$41,$80,$07,$1B,$06,$18207 db $BE,$BE,$BC,$7C,$FA,$E6,$1E,$FE,$FE,$DE,$40,$F0,$68,$80,$00,$00208 209 db $00,$03,$04,$09,$12,$15,$0A,$09,$19,$19,$1A,$1B,$14,$15,$15,$14210 db $00,$E0,$16,$E8,$13,$FC,$3F,$DC,$6B,$26,$E4,$17,$F8,$AF,$00,$DB211 212 db $00,$00,$C0,$20,$D0,$28,$D4,$54,$AA,$AB,$AA,$6B,$EA,$D5,$D5,$5B213 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$C0,$60,$B0,$D8,$EC,$F6214 215 db $14,$0A,$0A,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00216 db $00,$49,$6D,$3F,$00,$07,$07,$08,$0F,$0F,$0C,$0D,$00,$01,$00,$00217 218 db $6B,$53,$C3,$27,$F7,$F0,$FB,$03,$F8,$FA,$02,$8C,$3E,$BE,$00,$7F219 db $BE,$BE,$BC,$BC,$BA,$66,$9E,$BE,$3E,$BE,$BC,$38,$80,$80,$80,$80220 221 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$06,$0D,$1B,$37,$6F,$DF222 db $00,$03,$04,$0B,$14,$2B,$2A,$55,$D5,$55,$D6,$57,$AB,$AB,$DA,$D6223 224 db $07,$68,$17,$C8,$3F,$FC,$3B,$D6,$64,$27,$E8,$1F,$F5,$00,$DB,$49225 db $C0,$20,$90,$48,$A8,$50,$90,$98,$98,$58,$D8,$28,$A8,$A8,$28,$28226 227 db $7D,$7D,$3D,$3E,$5F,$67,$78,$7F,$7F,$7B,$02,$0F,$16,$01,$00,$00228 db $D6,$EA,$F3,$F8,$7D,$BA,$57,$8E,$E1,$FE,$82,$01,$E0,$D8,$60,$18229 230 db $92,$B6,$FC,$00,$E0,$E0,$60,$90,$58,$88,$10,$B8,$1D,$0B,$07,$06231 db $50,$50,$00,$00,$00,$00,$00,$00,$00,$00,$10,$20,$90,$A0,$80,$00232 233 db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$06,$0D,$1B,$37,$6F234 db $00,$00,$03,$04,$0B,$14,$2B,$2A,$55,$D5,$55,$D6,$57,$AB,$AB,$DA235 236 db $00,$07,$68,$17,$C8,$3F,$FC,$3B,$D6,$64,$27,$E8,$1F,$F5,$00,$DB237 db $00,$C0,$20,$90,$48,$A8,$50,$90,$98,$98,$58,$D8,$28,$A8,$A8,$28238 239 db $7D,$7D,$3D,$3D,$5D,$66,$79,$7D,$7C,$7D,$3D,$1C,$01,$01,$01,$01240 db $D6,$CA,$C3,$E4,$EF,$0F,$DF,$C0,$1F,$5F,$40,$31,$7C,$7D,$00,$FE241 242 db $00,$92,$B6,$FC,$00,$E0,$E0,$10,$F0,$F0,$30,$B0,$00,$80,$00,$00243 db $28,$50,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00244 245 db $0A,$15,$15,$0F,$13,$0D,$13,$12,$0D,$11,$1E,$1C,$0C,$0F,$07,$06246 db $A0,$4A,$55,$FD,$E6,$CF,$B7,$4B,$4B,$B7,$47,$3F,$3B,$F2,$E1,$03247 248 db $00,$80,$00,$80,$8F,$9F,$BF,$9F,$5F,$5E,$5D,$BB,$BB,$B7,$6F,$5F249 db $00,$00,$00,$00,$80,$E0,$F8,$FC,$FC,$3E,$DE,$DE,$DF,$DF,$BF,$7F250 251 db $03,$06,$05,$07,$00,$00,$00,$00,$00,$00,$0C,$03,$0E,$02,$00,$00252 db $3A,$F6,$CC,$81,$03,$00,$07,$0A,$0A,$00,$1F,$2A,$F4,$D8,$B0,$30253 254 db $3E,$7D,$F8,$E7,$DF,$3F,$7F,$83,$81,$00,$00,$00,$01,$05,$1A,$06255 db $FF,$C1,$3A,$FC,$FC,$FC,$F8,$F0,$F0,$A0,$58,$74,$E8,$E0,$80,$00256 257 db $00,$0A,$15,$15,$0F,$17,$07,$19,$24,$25,$19,$1E,$1C,$0C,$0F,$07258 db $00,$A0,$4A,$55,$FD,$E6,$CF,$B7,$4B,$4B,$B7,$47,$3F,$3B,$F2,$E1259 260 db $00,$00,$80,$00,$80,$8F,$9F,$BF,$9F,$5F,$5E,$5D,$BB,$BB,$BB,$7B261 db $00,$00,$00,$00,$00,$80,$E0,$F8,$FC,$FC,$3E,$DE,$DE,$DF,$DF,$DF262 263 db $00,$03,$06,$06,$0E,$0D,$0D,$05,$05,$03,$00,$00,$00,$00,$00,$00264 db $0A,$36,$ED,$E0,$C7,$CA,$CA,$E0,$E0,$C0,$06,$07,$11,$17,$00,$1D265 266 db $1B,$DB,$83,$BB,$37,$B7,$B0,$0E,$15,$15,$00,$7F,$7B,$DD,$00,$FC267 db $BF,$81,$BA,$BC,$7C,$7C,$F8,$70,$40,$40,$80,$00,$00,$00,$00,$00268 269 db $00,$00,$00,$00,$01,$07,$1F,$3F,$3F,$7C,$7B,$7B,$FB,$FB,$FD,$FE270 db $00,$01,$00,$01,$F1,$F9,$FD,$F9,$FA,$7A,$BA,$DD,$DD,$ED,$F6,$FA271 272 db $05,$52,$AA,$BF,$67,$F3,$ED,$D2,$D2,$ED,$E2,$FC,$DC,$4F,$87,$C0273 db $50,$A8,$A8,$F0,$C8,$B0,$C8,$48,$B0,$88,$78,$38,$30,$F0,$E0,$60274 275 db $FF,$83,$5C,$3F,$3F,$3F,$1F,$0F,$0F,$05,$1A,$2E,$17,$07,$01,$00276 db $7C,$BE,$1F,$E7,$FB,$FC,$FE,$C1,$81,$00,$00,$00,$80,$A0,$58,$60277 278 db $5C,$6F,$33,$81,$C0,$00,$E0,$50,$50,$00,$F8,$54,$2F,$1B,$0D,$0C279 db $C0,$60,$A0,$E0,$00,$00,$00,$00,$00,$00,$30,$C0,$70,$40,$00,$00280 281 db $00,$00,$00,$00,$00,$01,$07,$1F,$3F,$3F,$7C,$7B,$7B,$FB,$FB,$FB282 db $00,$00,$01,$00,$01,$F1,$F9,$FD,$F9,$FA,$7A,$BA,$DD,$DD,$DD,$DE283 284 db $00,$05,$52,$AA,$BF,$67,$F3,$ED,$D2,$D2,$ED,$E2,$FC,$DC,$4F,$87285 db $00,$50,$A8,$A8,$F0,$E8,$E0,$98,$24,$A4,$98,$78,$38,$30,$F0,$E0286 287 db $FD,$81,$5D,$3D,$3E,$3E,$1F,$0E,$02,$02,$01,$00,$00,$00,$00,$00288 db $D8,$DB,$C1,$DD,$EC,$ED,$0D,$70,$A8,$A8,$00,$FE,$DE,$BB,$00,$3F289 290 db $50,$6C,$B7,$07,$E3,$53,$53,$07,$07,$03,$60,$E0,$88,$E8,$00,$B8291 db $00,$C0,$60,$60,$70,$B0,$B0,$A0,$A0,$C0,$00,$00,$00,$00,$00,$00292zw.asm5363 5370caminable:5371 db $c05372 db $005373 db $3f5374 db $005375 db $005376 db $005377 db $005378 db $005379 db $005380 db $005381 db $005382 db $005383 db $055384 db $105385 db $035386 db $c05387 db $005388 db $155389 db $515390 db $545391 db $555392 db $555393 db $555394 db $555395 db $055397 5398 graficas.asm1 50 54letras:55 db $00,$00,$00,$00,$00,$00,$00,$00 56 db $38,$6c,$c6,$c6,$fe,$c6,$c6,$00 57 db $fc,$c6,$c6,$fc,$c6,$c6,$fc,$00 58 db $3c,$66,$c0,$c0,$c0,$66,$3c,$00 59 db $f8,$cc,$c6,$c6,$c6,$cc,$f8,$00 60 db $FE,$C0,$C0,$FC,$C0,$C0,$FE,$00 61 db $FE,$C0,$C0,$FC,$C0,$C0,$C0,$00 62 db $3C,$66,$C0,$CE,$C6,$66,$3C,$00 63 db $c6,$c6,$c6,$fe,$c6,$c6,$c6,$00 64 db $78,$30,$30,$30,$30,$30,$78,$00 65 db $06,$06,$06,$06,$c6,$c6,$7c,$00 66 db $c6,$c6,$cc,$f8,$cc,$c6,$c6,$00 67 db $C0,$C0,$C0,$C0,$C0,$C0,$FE,$00 68 db $c6,$ee,$fe,$d6,$d6,$c6,$c6,$00 69 db $C6,$e6,$f6,$DE,$CE,$C6,$C6,$00 70 db $38,$6c,$C6,$C6,$C6,$6c,$38,$00 71 db $Fc,$C6,$C6,$fc,$c0,$C0,$C0,$00 72 db $38,$6c,$c6,$c6,$c6,$6c,$36,$03 73 db $Fc,$C6,$C6,$fC,$d8,$Cc,$C6,$00 74 db $7c,$c6,$c0,$7c,$06,$c6,$7c,$00 75 db $fc,$30,$30,$30,$30,$30,$30,$00 76 db $C6,$C6,$C6,$C6,$C6,$c6,$7c,$00 77 db $c6,$c6,$c6,$6c,$6c,$38,$10,$00 78 db $c6,$c6,$c6,$d6,$fe,$fe,$6c,$00 79 db $c6,$c6,$6c,$38,$6c,$c6,$c6,$00 80 db $C6,$C6,$6C,$38,$30,$30,$30,$00 81 db $fe,$0c,$18,$30,$60,$c0,$fe,$00 82 db $ff,$c0,$c0,$c0,$c0,$c0,$c0,$ff 83 db $ff,$c0,$c0,$c0,$c0,$c0,$c0,$ff 84 db $ff,$00,$00,$00,$00,$00,$00,$ff 85 db $ff,$00,$00,$00,$00,$00,$00,$ff 86 db $c0,$c0,$c0,$c0,$c0,$c0,$c0,$c0 87 db $7c,$c6,$ce,$DE,$f6,$e6,$7c,$00 88 db $30,$70,$30,$30,$30,$30,$78,$00 89 db $7C,$C6,$06,$3c,$60,$C0,$FE,$00 90 db $7C,$C6,$0c,$38,$0c,$C6,$7C,$00 91 db $1E,$36,$66,$c6,$fe,$06,$06,$00 92 db $FE,$C0,$C0,$Fc,$06,$0c,$F8,$00 93 db $3E,$60,$c0,$fc,$C6,$c6,$7c,$00 94 db $FE,$06,$0C,$18,$30,$30,$30,$00 95 db $7C,$C6,$c6,$7c,$c6,$C6,$7C,$00 96 db $7c,$c6,$C6,$7e,$06,$0c,$78,$00 97 db $00,$6C,$fe,$fe,$7c,$38,$10,$00 98 db $30,$70,$30,$30,$30,$30,$78,$00 99 db $7C,$C6,$06,$3c,$60,$C0,$FE,$00 100 db $3c,$30,$3c,$30,$78,$CC,$CC,$78 101 db $18,$3c,$3c,$3c,$18,$00,$18,$18 102 db $7C,$C6,$0C,$18,$18,$00,$18,$18 103 db $0C,$18,$30,$00,$00,$00,$00,$00 104 db $c0,$cc,$18,$30,$60,$cc,$0c,$00 105 db $38,$6c,$c6,$c6,$fe,$c6,$c6,$00 106 db $fc,$c6,$c6,$fc,$c6,$c6,$fc,$00 107 db $00,$00,$00,$fc,$00,$00,$00,$00 109zw.asm5400 5401 mapas.asm1 10mapa1:11 12 db $16,$17,$09,$14,$36,$5B,$E2,$0D,$00,$06,$A2,$2A,$00,$C0,$04,$7213 db $A8,$07,$81,$F014 15 db $17,$18,$16,$38,$62,$09,$2A,$36,$56,$5A,$DB,$10,$0B,$16,$06,$D216 db $94,$F3,$40,$F1,$91,$81,$0A,$85,$41,$80,$7417 18 db $16,$09,$17,$5A,$62,$1A,$34,$DB,$10,$00,$01,$11,$F0,$F3,$87,$E519 db $C0,$2B,$4C,$04,$44,$1A,$01,$C020 21 db $1E,$09,$5A,$5B,$2A,$55,$E2,$0E,$00,$03,$A7,$AC,$21,$F1,$80,$C022 db $42,$10,$06,$AB,$4023 24 db $1C,$1D,$62,$09,$38,$39,$5A,$DD,$0E,$1C,$03,$CC,$25,$8B,$2B,$0D25 db $1F,$80,$59,$56,$40,$3E26 27 db $1B,$09,$5A,$5B,$62,$1A,$2B,$BA,$10,$00,$07,$25,$8F,$BF,$8F,$0628 db $0D,$A0,$92,$22,$01,$75,$80,$7029 30 db $1C,$16,$1A,$5F,$62,$17,$1D,$B4,$10,$00,$02,$49,$F4,$92,$66,$0031 db $69,$A2,$DF,$5F,$C3,$80,$00,$1C32 33 db $1D,$1C,$5C,$09,$E2,$0D,$00,$02,$50,$B4,$1A,$90,$63,$B8,$0C,$6C34 db $01,$8035 36 db $1C,$1D,$62,$09,$5C,$DF,$0E,$00,$01,$09,$E4,$18,$51,$40,$68,$7037 db $08,$80,$01,$8038 39 db $09,$3A,$5C,$54,$57,$58,$59,$5A,$5B,$E2,$0F,$00,$02,$C0,$28,$3240 db $23,$92,$01,$49,$C0,$23,$7A,$00,$1D41 42 db $1B,$09,$62,$16,$17,$1C,$39,$5A,$DB,$0F,$06,$80,$21,$0C,$A1,$0A43 db $1B,$09,$04,$B1,$60,$03,$92,$0544 45 db $09,$1B,$5A,$62,$16,$17,$1C,$38,$DB,$10,$03,$60,$5A,$52,$96,$9246 db $14,$81,$00,$C6,$55,$00,$20,$E0,$5847 48 db $09,$16,$1B,$62,$17,$1C,$36,$38,$5A,$DB,$13,$06,$CB,$05,$29,$4449 db $56,$44,$70,$00,$9C,$4E,$A7,$12,$5D,$88,$76,$00,$1650 51 db $1B,$09,$5A,$5B,$E2,$0E,$00,$02,$42,$42,$41,$70,$28,$E3,$52,$3052 db $E0,$68,$A053 54 db $1B,$09,$62,$5A,$5B,$9A,$11,$00,$02,$24,$89,$1E,$1B,$4D,$A1,$8455 db $89,$25,$60,$75,$70,$00,$C056 57 db $1B,$09,$5A,$5B,$62,$D7,$0E,$38,$00,$14,$F0,$12,$49,$24,$83,$8558 db $C6,$80,$1A,$C059 60 db $1C,$09,$1D,$5A,$5B,$62,$B8,$12,$03,$C1,$F1,$24,$8C,$92,$06,$9461 db $BC,$26,$48,$92,$40,$34,$72,$80,$1E62 63 db $1E,$09,$38,$39,$4E,$55,$58,$5A,$5D,$E2,$11,$15,$42,$C0,$1B,$0D64 db $08,$9C,$C1,$00,$09,$C0,$10,$84,$23,$80,$3A65 66 db $09,$1C,$1D,$62,$2B,$5A,$DB,$11,$00,$D0,$2E,$2A,$3B,$80,$1E,$9F67 db $68,$CB,$17,$00,$9E,$7C,$01,$A068 69 db $1C,$5A,$09,$1D,$62,$DB,$0D,$03,$80,$36,$16,$68,$E0,$28,$0B,$9270 db $00,$07,$B071 72 db $17,$09,$16,$19,$62,$18,$2A,$5A,$5E,$DF,$11,$30,$00,$1D,$88,$D573 db $55,$82,$76,$91,$C0,$5E,$61,$15,$20,$00,$0374 75 db $09,$1C,$1D,$2B,$5C,$5D,$4E,$56,$5A,$E2,$12,$00,$01,$11,$18,$1876 db $0A,$DC,$EA,$93,$60,$0E,$58,$19,$65,$04,$00,$E877 78 db $1B,$09,$16,$17,$36,$5C,$62,$19,$2A,$34,$39,$DB,$14,$07,$B4,$0379 db $97,$DC,$31,$57,$5B,$19,$90,$C8,$22,$09,$44,$04,$BE,$00,$06,$8080 81 db $09,$36,$16,$17,$18,$5A,$5B,$19,$29,$2B,$3A,$56,$E2,$14,$00,$0382 db $E5,$5F,$26,$71,$BA,$B0,$C8,$8C,$87,$91,$82,$48,$3A,$68,$D0,$0083 db $7D84 85 db $17,$16,$19,$62,$09,$29,$38,$59,$5C,$DD,$14,$00,$B3,$40,$C0,$E086 db $6E,$63,$31,$13,$12,$B2,$AA,$62,$AA,$20,$30,$3A,$00,$1687 88 db $04,$1C,$5A,$03,$1D,$62,$06,$08,$09,$AA,$12,$00,$34,$3B,$33,$8289 db $71,$72,$C8,$52,$96,$C9,$C2,$22,$23,$60,$05,$2890 91 db $01,$09,$62,$02,$05,$06,$57,$58,$5C,$DD,$11,$00,$28,$24,$4B,$4292 db $98,$88,$88,$88,$88,$C9,$69,$13,$C5,$0D,$9D93 94 db $1C,$1D,$09,$62,$5A,$5B,$DC,$10,$03,$40,$1C,$2D,$B4,$92,$41,$9E95 db $34,$E6,$2C,$8D,$30,$0F,$8096 97 db $1C,$09,$1D,$62,$1A,$39,$57,$5C,$DD,$10,$19,$B0,$03,$82,$22,$2B98 db $00,$90,$16,$9A,$88,$8D,$00,$0D,$C899 100 db $1C,$1D,$09,$5A,$55,$58,$5B,$E2,$0F,$00,$00,$0D,$02,$75,$92,$CA101 db $00,$D6,$06,$1E,$3E,$00,$FC102 103 db $1B,$36,$5A,$18,$62,$09,$16,$57,$DB,$12,$03,$00,$22,$35,$04,$45104 db $C0,$51,$40,$26,$6E,$53,$32,$0D,$B9,$95,$06105 106 db $1C,$09,$16,$17,$5C,$62,$18,$19,$1D,$D9,$12,$01,$90,$11,$C8,$76107 db $22,$00,$90,$C0,$6A,$E8,$AD,$D8,$93,$00,$01,$90108 109 db $17,$19,$09,$62,$16,$18,$1A,$5A,$5B,$DC,$0F,$02,$C0,$68,$1B,$02110 db $9C,$02,$C9,$88,$CC,$CE,$20,$05,$3A111 112 db $19,$09,$17,$62,$18,$1A,$36,$38,$59,$5A,$DE,$11,$01,$B5,$85,$54113 db $46,$87,$32,$B1,$D9,$00,$93,$11,$14,$1E,$00,$90114 115 db $09,$16,$17,$18,$19,$5B,$62,$34,$DA,$13,$00,$D0,$13,$15,$3C,$5E116 db $2C,$65,$02,$01,$55,$B9,$67,$17,$80,$10,$00,$D0117 118 db $09,$5D,$1C,$1D,$62,$51,$57,$58,$D9,$11,$00,$02,$8C,$A0,$0A,$D1119 db $08,$93,$0B,$22,$46,$C5,$CC,$0E,$00,$30120 121 db $1C,$09,$5A,$62,$1D,$38,$52,$DB,$0E,$07,$80,$06,$0E,$1A,$C1,$03122 db $4A,$83,$F0,$43,$E5,$80123 124 db $09,$5A,$1C,$1D,$62,$D3,$0D,$00,$01,$80,$53,$86,$C5,$80,$3C,$C0125 db $E2,$C0,$D8126 127 db $09,$2B,$3A,$62,$38,$58,$D9,$0E,$01,$C0,$2C,$17,$30,$07,$80,$D1128 db $07,$D0,$01,$06,$80129 130 db $1C,$1D,$62,$09,$DB,$11,$03,$00,$4B,$2A,$49,$20,$68,$E0,$24,$84131 db $B0,$CD,$70,$00,$01,$80132 133 db $1A,$16,$17,$09,$62,$19,$36,$58,$5A,$5B,$DF,$11,$30,$00,$17,$1B134 db $84,$7A,$00,$3A,$02,$6A,$B5,$53,$99,$03,$81,$6C135 136 db $1A,$17,$09,$62,$18,$36,$39,$57,$5A,$5B,$DF,$14,$02,$F4,$04,$44137 db $08,$88,$D9,$EA,$51,$CE,$82,$70,$9C,$D4,$E4,$B0,$13,$85,$80138 139 db $1A,$09,$62,$58,$5C,$DF,$0F,$00,$02,$45,$48,$30,$D9,$07,$A4,$02140 db $C8,$A6,$2C,$81,$C0141 142 db $1C,$1D,$2A,$09,$5C,$62,$38,$E1,$11,$3E,$00,$3C,$CB,$25,$B3,$1E143 db $06,$B8,$03,$2C,$CD,$01,$C0,$00,$FC144 145 db $1A,$09,$62,$5A,$5B,$DE,$0D,$06,$00,$C5,$12,$24,$1C,$0A,$03,$D6146 db $49,$20,$68147 148 db $09,$20,$21,$5A,$22,$54,$E2,$0E,$03,$E0,$06,$0D,$C0,$40,$34,$50149 db $8D,$94,$3B,$3D,$D4150 151 db $1B,$09,$19,$36,$62,$16,$17,$1A,$34,$5A,$DB,$12,$00,$01,$08,$42152 db $1B,$12,$91,$D3,$06,$79,$75,$57,$A0,$3C,$09,$00,$C0153 154 db $22,$09,$21,$62,$1A,$20,$59,$5A,$5B,$DC,$10,$00,$03,$00,$74,$59155 db $19,$D4,$C5,$03,$84,$EC,$2C,$98,$A2,$28156 157 db $21,$09,$20,$62,$5A,$5B,$D8,$11,$00,$01,$C5,$3E,$34,$EC,$B9,$62158 db $1A,$F5,$00,$3D,$11,$88,$00,$68159 160 db $20,$21,$09,$62,$5C,$5D,$5E,$DF,$0F,$00,$1A,$D0,$71,$81,$72,$22161 db $A0,$7F,$9E,$1F,$04,$54,$55162 163 db $0B,$1F,$23,$2B,$5D,$62,$57,$DC,$11,$80,$03,$77,$2C,$97,$2D,$04164 db $27,$1E,$1F,$42,$7E,$07,$24,$00,$3C165 166 db $0B,$1F,$23,$5A,$62,$50,$59,$DB,$11,$80,$02,$E5,$92,$4C,$B8,$E0167 db $8F,$0E,$37,$2C,$B9,$F8,$0F,$A1,$A0168 169 db $0B,$1F,$23,$5B,$62,$DC,$10,$80,$01,$6D,$92,$66,$63,$9A,$8D,$0E170 db $33,$22,$4B,$68,$12,$78171 172 db $1F,$23,$0B,$62,$15,$5C,$DD,$10,$81,$C0,$2C,$B5,$2A,$34,$30,$F0173 db $24,$99,$6D,$40,$3E,$00,$1A174 175 db $0B,$4F,$E1,$0C,$80,$00,$00,$11,$11,$0C,$22,$22,$00,$00,$05176 177 db $20,$0B,$21,$14,$1C,$50,$51,$57,$E2,$10,$80,$01,$08,$52,$18,$58178 db $49,$93,$80,$48,$D0,$A4,$4C,$21,$B0179 180 db $62,$0B,$1B,$1A,$1C,$1D,$20,$21,$52,$5A,$DB,$10,$81,$00,$63,$20181 db $DA,$D0,$09,$E9,$C0,$F2,$45,$50,$68,$00,$10182 183 db $0B,$1F,$20,$22,$23,$2B,$51,$55,$5A,$5B,$5D,$E2,$0F,$80,$00,$1C184 db $01,$3B,$C6,$74,$1F,$02,$EA,$20,$00,$EB,$C0185 186 db $0B,$21,$62,$20,$5A,$22,$2C,$2D,$2E,$2F,$DC,$13,$80,$50,$25,$68187 db $12,$A0,$C4,$18,$51,$71,$28,$4E,$B6,$0C,$8F,$73,$A0,$50188 189 db $0B,$1A,$1F,$20,$22,$23,$56,$59,$5A,$5B,$E2,$0F,$80,$00,$74,$12190 db $F1,$10,$88,$AD,$64,$08,$E5,$E0,$0D,$80191 192 db $0B,$23,$1F,$5A,$62,$16,$17,$DB,$11,$83,$80,$32,$C9,$25,$A0,$35193 db $1A,$17,$09,$72,$87,$9F,$C1,$F0,$0E194 195 db $0B,$23,$1F,$5C,$62,$D8,$10,$80,$00,$24,$68,$2E,$42,$5A,$E1,$32196 db $4B,$01,$E4,$23,$40,$70197 198 db $0B,$1C,$1F,$5A,$1D,$23,$2A,$2C,$2D,$2E,$2F,$3A,$56,$5B,$E2,$16199 db $80,$03,$5B,$E4,$E2,$6B,$3F,$65,$FD,$DF,$42,$D1,$00,$AA,$99,$FD200 db $10,$05,$C4,$41,$F0201 202 db $1F,$23,$0B,$62,$5A,$5C,$DD,$0F,$83,$40,$00,$F0,$24,$C6,$2D,$01203 db $2B,$81,$67,$C2,$40,$1A204 205 db $0B,$45,$46,$58,$62,$35,$57,$D9,$10,$83,$80,$1F,$24,$C0,$2A,$79206 db $1F,$81,$35,$28,$18,$91,$A0,$1C207 208 db $22,$0B,$20,$21,$2B,$3A,$56,$57,$5A,$5B,$E2,$12,$80,$03,$68,$AD209 db $45,$98,$02,$4E,$32,$15,$0B,$83,$03,$A0,$4E,$40,$F0210 211 db $22,$0B,$20,$62,$21,$1D,$2C,$2D,$2E,$2F,$57,$D8,$14,$82,$C0,$6B212 db $62,$31,$98,$A3,$9D,$91,$3F,$0B,$4B,$C9,$01,$14,$23,$08,$A0,$2C213 214 db $22,$20,$21,$0B,$62,$52,$5A,$DB,$0F,$80,$01,$89,$89,$47,$1F,$E8215 db $D3,$89,$52,$B2,$50,$3E,$78216 217 db $62,$1B,$22,$0B,$1A,$1C,$51,$DC,$0F,$82,$00,$60,$CF,$B1,$C8,$00218 db $42,$BD,$B5,$41,$F8,$00,$10219 220 db $0B,$22,$5A,$62,$57,$DB,$0F,$80,$01,$55,$54,$68,$32,$40,$24,$3C221 db $40,$E0,$C4,$03,$40222 223 db $1F,$23,$0B,$5A,$62,$DB,$10,$83,$80,$00,$CF,$05,$B5,$6D,$03,$34224 db $68,$24,$99,$24,$00,$E0225 226 db $1B,$0B,$62,$1A,$1F,$23,$36,$57,$DD,$11,$82,$80,$5E,$75,$84,$42227 db $20,$07,$12,$51,$11,$31,$08,$80,$03,$60228 229 db $1F,$23,$0B,$62,$50,$58,$DC,$10,$80,$01,$65,$92,$CA,$6B,$0F,$03230 db $49,$24,$92,$CC,$01,$D8,$7C231 232 db $1B,$0B,$1C,$5A,$62,$1D,$DB,$0F,$83,$80,$26,$44,$9E,$C3,$85,$69233 db $A1,$24,$92,$48,$0F,$94234 235 db $0B,$45,$46,$62,$35,$57,$58,$D9,$10,$83,$40,$3E,$24,$50,$19,$D2236 db $14,$3D,$24,$C0,$15,$23,$F0,$0D237 238 db $0B,$62,$19,$5A,$5B,$5D,$D8,$0F,$82,$80,$19,$0D,$01,$27,$9C,$51239 db $E7,$00,$19,$1A,$7C,$05240 241 db $0B,$22,$62,$20,$21,$1B,$2C,$2D,$2E,$2F,$59,$5A,$DB,$16,$82,$80242 db $4E,$08,$9B,$6B,$6A,$88,$88,$87,$CF,$73,$A4,$E3,$28,$4D,$80,$47243 db $D0,$02,$80244 245 db $1E,$0B,$59,$4E,$50,$51,$55,$57,$58,$E2,$10,$80,$01,$66,$15,$00246 db $8D,$44,$EC,$3A,$14,$42,$20,$25,$91,$C0247 248 db $1D,$0B,$21,$22,$62,$1C,$20,$2C,$2D,$2E,$2F,$5A,$DB,$12,$83,$00249 db $02,$5F,$5B,$E3,$08,$8C,$A2,$1D,$F0,$49,$F0,$05,$E9,$45,$D0250 251 db $1C,$3A,$62,$0B,$2B,$50,$D1,$0E,$83,$00,$01,$6F,$78,$92,$40,$01252 db $40,$3E,$01,$A0,$30253 254 db $5A,$0B,$62,$1F,$23,$17,$1A,$1B,$A9,$11,$82,$80,$04,$A1,$AE,$0B255 db $61,$06,$54,$08,$27,$61,$89,$B4,$00,$14256 257 db $1F,$23,$0B,$5A,$5B,$62,$BA,$10,$80,$01,$64,$C1,$BF,$3D,$C1,$64258 db $3C,$49,$70,$68,$E0,$92,$80259 260 db $0B,$1C,$1F,$62,$1D,$23,$2A,$5A,$5B,$DC,$11,$80,$01,$38,$AC,$CC261 db $D5,$69,$61,$B8,$0B,$08,$8E,$00,$07,$40,$16262 263 db $0B,$16,$62,$17,$18,$1C,$1D,$5A,$5B,$5C,$DD,$0F,$80,$00,$72,$0B264 db $14,$C9,$D8,$89,$D2,$8C,$23,$C4,$80,$6C265 266 db $62,$0B,$45,$46,$59,$35,$57,$D8,$0F,$82,$00,$0A,$C7,$11,$CB,$ED267 db $00,$D0,$60,$3E,$0F,$C0,$20268 269 db $22,$0B,$0E,$11,$16,$1B,$20,$21,$51,$55,$E2,$0F,$83,$CB,$07,$19270 db $14,$03,$12,$50,$00,$90,$11,$B4,$6B,$A8271 272 db $20,$22,$0B,$21,$5A,$5B,$62,$AA,$0F,$83,$E0,$15,$48,$DF,$E0,$1D273 db $9E,$1F,$2A,$91,$33,$41,$E7274 275 db $1C,$0B,$3A,$1A,$1D,$1F,$23,$2B,$61,$E2,$11,$80,$02,$A2,$31,$11276 db $11,$BB,$74,$00,$04,$CC,$99,$D1,$42,$40,$07277 278 db $1E,$0B,$57,$59,$58,$E2,$0D,$80,$01,$11,$10,$06,$8A,$BE,$27,$44279 db $4C,$0D,$0C280 281 db $1C,$3A,$0B,$1D,$62,$1A,$2B,$50,$D1,$0F,$83,$00,$2E,$04,$23,$32282 db $C2,$81,$B9,$D0,$28,$12,$02,$CE283 284 db $1D,$1C,$0B,$62,$1F,$23,$5A,$5B,$5C,$DD,$10,$82,$C0,$26,$06,$80285 db $6E,$89,$92,$C8,$8C,$E2,$8E,$83,$82,$20286 287 db $1F,$0B,$23,$2B,$3A,$33,$55,$57,$5C,$E2,$12,$80,$00,$4B,$82,$DD288 db $36,$22,$A3,$02,$42,$75,$58,$00,$8A,$8B,$0C,$80289 290 db $0B,$2B,$3A,$5A,$5B,$16,$17,$19,$36,$4E,$56,$58,$E2,$11,$83,$E8291 db $03,$06,$00,$08,$B5,$81,$96,$C8,$7C,$0D,$7B,$93,$53,$DA292 293 db $1E,$0B,$2A,$55,$5A,$5C,$5D,$E2,$0E,$80,$02,$6D,$89,$90,$0F,$38294 db $A7,$E4,$4B,$10,$00,$F8295 296 db $1C,$1D,$0B,$62,$1F,$D0,$0E,$83,$40,$49,$62,$CB,$23,$40,$01,$72297 db $4C,$B7,$80,$78298 299 db $0B,$20,$22,$2A,$3A,$4E,$51,$56,$57,$5A,$E2,$0F,$80,$00,$00,$36300 db $44,$46,$87,$95,$28,$CC,$3A,$17,$80,$E0301 302 db $0B,$62,$2B,$3A,$53,$5C,$5D,$DE,$0D,$80,$00,$7C,$02,$9D,$24,$0A303 db $12,$47,$E0,$69,$E6304 305 db $0B,$57,$2B,$2C,$2D,$2E,$2F,$3A,$62,$15,$A9,$13,$83,$A0,$0B,$C4306 db $5E,$37,$BF,$38,$9C,$EA,$33,$A9,$38,$11,$10,$01,$55,$20307 308 db $2B,$0B,$57,$62,$2C,$2D,$2E,$2F,$59,$DA,$11,$80,$00,$46,$32,$70309 db $B2,$A3,$5B,$41,$61,$13,$28,$05,$26,$65,$1D310 311 db $0B,$2B,$3A,$5A,$62,$2C,$2D,$2E,$2F,$35,$57,$D9,$13,$80,$00,$8B312 db $88,$5C,$98,$26,$33,$A8,$89,$EE,$05,$46,$F9,$F1,$20,$A8,$F4313 314 db $09,$60,$E1,$0B,$00,$01,$00,$85,$40,$20,$40,$23,$08,$04315 316 db $41,$42,$E2,$09,$8C,$00,$20,$00,$A0,$40,$01,$40318mapa2:319 320 db $2A,$09,$14,$4C,$4D,$E2,$0F,$00,$06,$12,$42,$01,$35,$12,$82,$3A321 db $C8,$0A,$00,$07,$80322 323 db $1E,$2A,$09,$38,$4C,$4D,$55,$5A,$E2,$10,$01,$60,$0D,$89,$90,$84324 db $54,$30,$71,$40,$32,$11,$A8,$42,$64325 326 db $1C,$1D,$09,$2A,$62,$38,$39,$5A,$DC,$11,$00,$D1,$92,$E2,$24,$06327 db $0A,$1C,$50,$11,$31,$31,$60,$1B,$00,$30328 329 db $1E,$38,$4C,$55,$59,$E2,$0D,$00,$A0,$00,$E0,$44,$D8,$41,$30,$00330 db $00,$07,$80331 332 db $1E,$62,$4C,$4D,$D8,$0D,$00,$01,$11,$10,$03,$01,$48,$08,$00,$71333 db $A0,$50334 335 db $1E,$5A,$5B,$54,$56,$E2,$0C,$00,$00,$88,$9D,$0F,$0A,$28,$11,$11336 db $A1,$83337 338 db $36,$18,$0B,$62,$17,$19,$34,$4C,$CD,$11,$80,$01,$11,$24,$CE,$80339 db $6C,$A2,$C9,$C6,$48,$88,$05,$01,$C0,$2C340 341 db $18,$1F,$36,$62,$0B,$23,$16,$97,$11,$80,$03,$E9,$F9,$7D,$7D,$5A342 db $38,$0D,$33,$21,$32,$00,$1C,$01,$A0343 344 db $23,$1F,$0B,$5A,$5B,$E2,$0F,$80,$02,$49,$2C,$96,$47,$83,$5A,$C0345 db $4B,$25,$63,$C7,$38346 347 db $23,$0B,$62,$2C,$2D,$2E,$2F,$5C,$DD,$10,$80,$00,$2F,$04,$82,$23348 db $3A,$88,$14,$1B,$24,$38,$48,$00,$28349 350 db $18,$16,$36,$2A,$62,$2B,$39,$5C,$DD,$12,$03,$06,$82,$E6,$A5,$11351 db $37,$60,$D8,$18,$2A,$2A,$62,$28,$03,$81,$90352 353 db $16,$09,$18,$62,$2A,$36,$39,$4B,$DA,$12,$00,$68,$22,$A3,$39,$AA354 db $88,$C2,$C4,$9B,$01,$2E,$02,$C9,$01,$80,$2C355 356 db $2B,$09,$2A,$62,$38,$39,$BA,$0F,$03,$79,$E0,$93,$E8,$53,$00,$15357 db $8D,$28,$A6,$00,$92,$4C358 359 db $1C,$1D,$09,$62,$5C,$1A,$2A,$DD,$12,$0D,$00,$7C,$4B,$2C,$BE,$18360 db $70,$EC,$05,$92,$48,$D1,$FB,$00,$00,$D0361 362 db $1C,$09,$1D,$62,$50,$5A,$DB,$0E,$03,$40,$01,$F2,$89,$32,$19,$24363 db $68,$F2,$8E,$00,$50364 365 db $0B,$18,$36,$4B,$E2,$0F,$80,$00,$DC,$B9,$41,$A4,$92,$01,$6C,$92366 db $5A,$E0,$00,$07367 368 db $18,$36,$0B,$62,$53,$D8,$0D,$83,$40,$5A,$09,$00,$C1,$83,$45,$B2369 db $38,$3D,$80370 371 db $1F,$23,$62,$2A,$5C,$DD,$0D,$83,$00,$01,$2C,$00,$1C,$12,$CA,$01372 db $E0,$1A,$03373 374 db $0B,$23,$29,$2A,$4C,$56,$5B,$E2,$0D,$80,$01,$F0,$E0,$04,$03,$F5375 db $B4,$4C,$81,$E0,$1A376 377 db $0B,$19,$62,$17,$1B,$16,$1C,$1D,$1F,$23,$D0,$12,$81,$40,$73,$58378 db $1B,$C7,$4A,$40,$20,$0C,$DC,$A6,$6C,$00,$47,$80,$50379 380 db $09,$29,$2A,$38,$56,$58,$5A,$5B,$E2,$0E,$0B,$00,$01,$38,$9A,$02381 db $06,$81,$B2,$00,$00,$C8,$E0382 383 db $1B,$16,$17,$62,$1A,$5A,$DB,$0F,$03,$40,$49,$22,$49,$38,$03,$C0384 db $5A,$33,$00,$7C,$00,$0D385 386 db $09,$2B,$45,$56,$58,$5A,$5B,$E2,$0E,$00,$00,$07,$80,$5D,$A4,$07387 db $C3,$00,$83,$80,$0F,$C0388 389 db $1C,$09,$1D,$62,$38,$4C,$CD,$0F,$03,$8D,$04,$C8,$50,$29,$E6,$64390 db $12,$43,$E0,$05,$00,$0D391 392 db $1B,$0B,$5A,$4E,$55,$E2,$0D,$80,$01,$41,$80,$9D,$0A,$3C,$06,$00393 db $9B,$02,$80394 395 db $1B,$0B,$1A,$62,$57,$5A,$DB,$0F,$83,$40,$65,$91,$25,$63,$4A,$7A396 db $80,$91,$23,$83,$E2,$80397 398 db $1F,$23,$1B,$5C,$5D,$62,$AA,$11,$80,$03,$33,$25,$92,$DF,$80,$6B399 db $4F,$16,$48,$B2,$8E,$70,$00,$3C400 401 db $0B,$62,$1A,$45,$4C,$57,$58,$D9,$0D,$81,$40,$1C,$35,$8A,$78,$80402 db $20,$3E,$00,$23,$F0403 404 db $0B,$2B,$3A,$51,$54,$59,$E2,$0D,$80,$00,$58,$1E,$0E,$C8,$00,$6C405 db $60,$F8,$11,$40406 407 db $1F,$0B,$23,$62,$D2,$0D,$81,$A0,$62,$0B,$88,$05,$03,$46,$22,$00408 db $05,$E0409 410 db $1C,$1D,$2B,$62,$3A,$2A,$5B,$DE,$11,$34,$00,$25,$92,$5B,$3C,$0F411 db $80,$D0,$00,$76,$76,$61,$F8,$00,$34412 413 db $1B,$09,$62,$17,$16,$1A,$2A,$36,$5C,$DD,$12,$01,$40,$66,$22,$34414 db $88,$88,$50,$1C,$02,$F6,$17,$89,$0E,$82,$64,$0A415 416 db $2B,$3A,$62,$2A,$4C,$CD,$0D,$03,$00,$00,$02,$47,$85,$02,$72,$D0417 db $00,$68,$18418 419 db $09,$1B,$1D,$62,$1C,$2A,$5F,$E1,$0F,$03,$40,$03,$E1,$05,$CC,$E5420 db $B8,$FC,$08,$03,$C0,$40,$1A421 422 db $1F,$23,$0B,$14,$1D,$2A,$50,$53,$E2,$0F,$80,$03,$28,$88,$98,$DB423 db $0B,$00,$A0,$4A,$12,$38,$50,$1A424 425 db $0B,$60,$E1,$0A,$80,$00,$00,$C1,$11,$10,$A8,$88,$80426 427 db $1F,$23,$62,$14,$2C,$2D,$2E,$2F,$5C,$DD,$0F,$82,$80,$B0,$0C,$64428 db $26,$09,$8D,$6C,$0E,$00,$03,$A0,$0A429 430 db $0B,$2B,$2A,$3A,$4E,$56,$5E,$E2,$0D,$80,$00,$A0,$02,$04,$3F,$3D431 db $A6,$10,$72,$8F,$80432 433 db $1B,$0B,$62,$1C,$1D,$51,$D8,$0D,$80,$03,$E8,$88,$83,$03,$C2,$B0434 db $8E,$6A,$01,$40435 436 db $1B,$1C,$0B,$1D,$62,$5A,$DB,$10,$80,$01,$6E,$92,$43,$8F,$86,$01437 db $24,$2E,$D0,$C0,$7B,$00,$38438 439 db $2B,$3A,$09,$62,$57,$D9,$0F,$00,$1A,$03,$00,$3C,$25,$81,$24,$B6440 db $4A,$18,$31,$C0,$1A441 442 db $18,$09,$36,$62,$16,$17,$19,$2A,$2B,$34,$5C,$DD,$14,$02,$C0,$22443 db $21,$15,$11,$C0,$99,$93,$C1,$B8,$CE,$1D,$AA,$D4,$07,$C0,$00,$58444 445 db $1C,$62,$1D,$2A,$5A,$DB,$0F,$02,$80,$03,$8D,$19,$31,$E0,$A0,$E4446 db $90,$6B,$C0,$00,$A0447 448 db $2B,$62,$09,$3A,$5A,$5C,$DD,$10,$02,$80,$F9,$23,$0F,$14,$DD,$24449 db $98,$30,$13,$40,$70,$02,$85450 451 db $09,$62,$2C,$2D,$2E,$2F,$38,$45,$56,$5A,$DB,$10,$00,$1A,$39,$56452 db $08,$0C,$64,$86,$C9,$0E,$80,$01,$E0,$04,$80453 454 db $22,$21,$09,$20,$62,$5A,$DB,$10,$00,$01,$2A,$48,$DD,$73,$1F,$0C455 db $04,$A9,$52,$81,$87,$80,$1C456 457 db $0B,$1F,$23,$62,$16,$A9,$0D,$83,$40,$00,$CA,$19,$57,$10,$D2,$00458 db $01,$07,$78459 460 db $1F,$23,$0B,$62,$58,$59,$5A,$DB,$10,$80,$01,$65,$B6,$DA,$68,$7D461 db $F9,$8D,$24,$92,$C9,$01,$E6,$1C462 463 db $1F,$23,$0B,$62,$1D,$2A,$4C,$4D,$D7,$12,$80,$03,$11,$13,$33,$31464 db $19,$59,$4E,$29,$A5,$89,$88,$89,$80,$6C,$A0465 466 db $1B,$62,$0B,$1A,$2A,$5C,$DD,$10,$81,$40,$49,$09,$26,$A8,$F9,$80467 db $24,$09,$C0,$60,$F0,$02,$80468 469 db $1D,$3A,$09,$1C,$2A,$2B,$39,$55,$5C,$5D,$E2,$11,$03,$DA,$01,$D2470 db $80,$11,$17,$17,$00,$05,$38,$31,$3B,$91,$99,$90471 472 db $16,$17,$09,$1B,$62,$19,$1C,$1D,$29,$34,$45,$4C,$4D,$D8,$15,$03473 db $00,$22,$26,$53,$31,$1D,$14,$7D,$28,$0E,$67,$E5,$DE,$B6,$1F,$83474 db $CA,$01,$80475 476 db $2B,$09,$1C,$3A,$38,$4E,$5C,$5D,$E2,$11,$03,$81,$83,$61,$04,$84477 db $55,$D4,$4D,$D0,$40,$D2,$C0,$90,$86,$40478 479 db $1C,$1D,$2B,$3A,$62,$28,$5A,$DB,$10,$0E,$0E,$09,$16,$58,$90,$01480 db $F0,$0C,$DD,$C0,$3F,$00,$03,$C0481 482 db $09,$2C,$2D,$2E,$2F,$5C,$62,$21,$22,$39,$DD,$14,$03,$47,$42,$6B483 db $9B,$4D,$26,$8B,$C3,$2B,$C4,$5E,$01,$01,$90,$78,$10,$03,$40484 485 db $20,$21,$4D,$09,$E2,$0E,$03,$80,$22,$2A,$28,$30,$D1,$CA,$89,$95486 db $03,$41,$80487 488 db $22,$09,$20,$62,$21,$30,$38,$D1,$10,$07,$C0,$09,$80,$1A,$15,$30489 db $F1,$33,$F1,$40,$A2,$70,$06,$80490 491 db $2A,$1C,$0B,$5B,$62,$1B,$1D,$29,$E1,$12,$80,$02,$10,$9D,$4C,$CE492 db $5C,$0B,$5A,$98,$42,$05,$00,$A0,$6E,$00,$C0493 494 db $0B,$5A,$5B,$1C,$1D,$55,$E2,$0C,$80,$00,$60,$83,$E2,$8D,$F7,$04495 db $29,$01,$80496 497 db $1A,$0B,$62,$1C,$1D,$D2,$0D,$81,$80,$6F,$40,$80,$14,$3C,$22,$16498 db $00,$00,$0C499 500 db $1A,$09,$62,$2A,$38,$59,$DD,$0E,$00,$70,$44,$44,$4D,$01,$43,$03501 db $C1,$40,$7C,$00,$18502 503 db $2A,$62,$09,$1A,$39,$4C,$CD,$10,$02,$B8,$0F,$00,$D5,$24,$48,$2A504 db $30,$67,$D0,$12,$24,$00,$50505 506 db $2A,$62,$58,$5C,$DD,$0D,$00,$00,$70,$0A,$49,$24,$80,$06,$40,$34507 db $00,$05508 509 db $2A,$4B,$09,$35,$38,$59,$61,$E2,$0F,$03,$E1,$C2,$20,$44,$02,$45510 db $05,$34,$00,$0C,$78,$0F,$C0511 512 db $09,$2C,$2D,$2E,$2F,$5C,$62,$DD,$10,$03,$E0,$0F,$C2,$01,$71,$71513 db $72,$0D,$E9,$BC,$DE,$7C,$3C,$3C514 515 db $09,$2C,$2D,$2E,$2F,$62,$39,$50,$D9,$11,$0D,$00,$10,$0D,$A0,$26516 db $91,$34,$32,$5E,$0B,$C0,$00,$38,$01,$90517 518 db $21,$09,$20,$62,$4C,$4D,$5C,$DD,$10,$03,$40,$62,$18,$88,$0B,$E1519 db $F0,$44,$E9,$60,$3F,$01,$40,$D0520 521 db $36,$18,$0B,$1F,$62,$17,$23,$5C,$5D,$DE,$10,$83,$00,$26,$62,$0B522 db $BD,$03,$80,$08,$9C,$C1,$4D,$B0,$29,$D0523 524 db $0B,$62,$16,$17,$18,$19,$1F,$23,$36,$5C,$DD,$0E,$80,$01,$AC,$E3525 db $97,$5B,$02,$1E,$04,$C8,$10,$00,$3B526 527 db $3A,$0B,$16,$2B,$62,$17,$19,$1B,$36,$D9,$10,$86,$00,$03,$75,$CC528 db $D6,$98,$E8,$48,$09,$16,$B4,$02,$48,$44529 530 db $09,$1C,$18,$1D,$36,$62,$17,$1B,$2A,$4C,$4D,$4E,$D9,$14,$01,$90531 db $26,$E5,$05,$CE,$C7,$40,$02,$BE,$56,$35,$88,$1F,$48,$0F,$70,$06532 db $40533 534 db $2A,$62,$57,$5A,$DB,$0D,$02,$80,$03,$40,$88,$89,$81,$11,$10,$0E535 db $00,$05536 537 db $2A,$09,$62,$5B,$DC,$0D,$00,$C0,$14,$01,$26,$A4,$24,$02,$53,$80538 db $00,$0C539 540 db $1C,$4B,$09,$1D,$62,$35,$D7,$10,$03,$80,$6A,$83,$3E,$18,$79,$40541 db $49,$B3,$64,$A0,$C1,$40,$1C542 543 db $1E,$09,$4C,$38,$4E,$55,$E2,$0F,$1A,$00,$09,$91,$41,$3C,$27,$40544 db $26,$45,$05,$00,$03,$E0545 546 db $22,$21,$09,$62,$20,$29,$2C,$2D,$2E,$2F,$D1,$11,$00,$B0,$6B,$68547 db $92,$27,$27,$3A,$28,$2D,$E2,$24,$8C,$08,$90,$28548 549 db $62,$09,$2C,$2D,$2E,$2F,$34,$36,$38,$5C,$DD,$10,$1C,$20,$00,$0F550 db $08,$4E,$D5,$6D,$10,$0C,$64,$90,$74,$00,$10551 552 db $21,$20,$09,$5A,$5B,$E2,$10,$00,$02,$49,$24,$B2,$57,$86,$F3,$00553 db $96,$D9,$26,$3C,$30,$DE554 555 db $22,$62,$09,$20,$5A,$DB,$0F,$00,$01,$22,$44,$D0,$18,$78,$B4,$E0556 db $60,$48,$46,$C0,$14557 558 db $2A,$09,$57,$62,$38,$3D,$3E,$3F,$C0,$10,$00,$60,$0A,$24,$88,$5A559 db $40,$CE,$88,$01,$BE,$11,$0A,$00,$0B560 561 db $1B,$09,$18,$62,$5A,$5B,$16,$17,$19,$29,$2A,$36,$B9,$15,$0F,$A5562 db $81,$10,$88,$22,$3C,$18,$4B,$09,$0A,$AD,$EB,$95,$F3,$AB,$25,$91563 db $90,$0B564 565 db $2A,$09,$62,$45,$4C,$55,$DC,$0D,$03,$00,$40,$5D,$03,$E3,$92,$18566 db $0A,$78,$14,$24567 568 db $2A,$29,$56,$5C,$5D,$E2,$0C,$07,$80,$01,$A0,$12,$12,$01,$25,$C9569 db $00,$70570 571 db $09,$1C,$1D,$4B,$62,$35,$D8,$0F,$01,$C0,$1F,$02,$51,$17,$2E,$34572 db $68,$F1,$00,$00,$03,$80573 574 db $2A,$1C,$62,$09,$1D,$38,$5C,$DD,$10,$0F,$30,$04,$80,$B7,$88,$FF575 db $40,$C4,$0D,$B6,$89,$03,$E0,$06576 577 db $1C,$09,$1D,$62,$17,$18,$1A,$1B,$36,$38,$5C,$DD,$11,$00,$3A,$11578 db $11,$4E,$6D,$A5,$93,$E2,$45,$91,$15,$0C,$64,$02,$5F579 580 db $62,$1F,$2A,$2C,$2D,$2E,$2F,$39,$3D,$3E,$3F,$40,$5A,$DB,$12,$0D581 db $A0,$05,$01,$F4,$41,$32,$BC,$39,$D0,$19,$D3,$DF,$0A,$FC,$00,$04582 583 db $3A,$09,$2B,$39,$55,$5E,$5F,$E2,$10,$34,$00,$00,$66,$0A,$9D,$09584 db $84,$78,$7C,$08,$0B,$28,$0F,$C0585 586 db $3A,$2B,$09,$38,$56,$57,$59,$E2,$0F,$03,$F1,$A2,$3E,$02,$06,$07587 db $B0,$58,$B2,$CB,$44,$80,$70588 589 db $09,$22,$38,$5A,$5B,$62,$20,$21,$AA,$11,$0A,$66,$80,$02,$D0,$09590 db $D2,$76,$B1,$18,$00,$0C,$10,$38,$06,$40591 592 db $09,$62,$1A,$1B,$35,$46,$57,$58,$D9,$0E,$02,$40,$01,$A2,$83,$6C593 db $08,$05,$A0,$00,$32,$E1,$20594 595 db $38,$59,$62,$2A,$32,$35,$C5,$0D,$04,$80,$00,$1A,$07,$94,$60,$A0596 db $18,$3E,$00,$07597 598 db $09,$60,$E1,$0B,$00,$00,$10,$14,$22,$00,$41,$00,$80,$8C599 600 db $19,$09,$16,$17,$14,$35,$38,$39,$4B,$54,$E2,$10,$1B,$6B,$C0,$39601 db $21,$11,$56,$06,$64,$02,$43,$A3,$00,$55,$C4602 603 db $09,$16,$36,$1F,$23,$39,$45,$56,$58,$5A,$5B,$E2,$10,$32,$3E,$00604 db $40,$75,$00,$78,$D0,$17,$53,$55,$33,$8E,$01,$B4605 606 db $2A,$1C,$1D,$59,$E2,$0E,$00,$02,$48,$92,$2E,$11,$08,$04,$42,$34607 db $E4,$90,$80608 609 db $2A,$62,$09,$4B,$35,$B9,$0D,$1E,$28,$00,$1A,$09,$27,$01,$41,$92610 db $45,$1A,$C0611 612 db $09,$2A,$62,$4B,$35,$B8,$0D,$07,$B0,$00,$0B,$A0,$AE,$8A,$30,$A2613 db $0C,$0D,$90614 615 db $2A,$09,$4B,$62,$35,$D8,$0C,$00,$00,$98,$0F,$04,$70,$1A,$0A,$86616 db $82,$B2617 618 db $2A,$09,$62,$4B,$35,$45,$57,$58,$D9,$10,$02,$80,$00,$B6,$82,$58619 db $E4,$40,$A2,$22,$4C,$94,$6E,$C1,$20620 621 db $0B,$14,$49,$E1,$0F,$80,$00,$00,$24,$92,$49,$24,$50,$30,$6A,$49622 db $24,$92,$40623 624 db $4E,$39,$E2,$08,$14,$60,$00,$08,$00,$01,$10626mapa3:627 628 db $3A,$09,$16,$18,$62,$14,$17,$2B,$36,$4B,$5A,$DC,$13,$00,$06,$51629 db $B4,$42,$20,$13,$33,$D0,$C1,$74,$E6,$97,$40,$1F,$1E,$00,$C0630 631 db $3A,$09,$17,$18,$2B,$62,$16,$36,$5A,$5B,$DC,$11,$00,$03,$10,$88632 db $18,$86,$4E,$0E,$8C,$97,$4B,$D3,$74,$01,$E9,$99633 634 db $2B,$16,$09,$18,$4B,$62,$17,$2A,$38,$3A,$4C,$CD,$13,$03,$80,$22635 db $21,$87,$62,$B6,$C8,$1E,$50,$5C,$AE,$5A,$90,$3E,$03,$00,$64636 637 db $09,$2A,$37,$39,$4C,$4D,$54,$E2,$0E,$00,$34,$0C,$72,$9F,$8F,$98638 db $A8,$06,$0A,$09,$E0,$80639 640 db $09,$2A,$37,$5A,$62,$B8,$11,$00,$F0,$71,$06,$DB,$4C,$20,$D5,$30641 db $44,$6D,$33,$30,$83,$40,$E0642 643 db $1F,$23,$09,$62,$16,$36,$45,$D7,$11,$00,$02,$CB,$22,$CE,$F0,$FC644 db $C0,$0B,$2C,$4B,$00,$F8,$31,$A0,$68645 646 db $1F,$23,$09,$3A,$62,$2B,$5A,$DB,$0F,$00,$01,$65,$A0,$E0,$7E,$CD647 db $D0,$92,$53,$DA,$73,$1F,$06648 649 db $09,$3A,$2B,$38,$4E,$55,$5A,$5B,$E2,$0E,$01,$60,$E1,$A1,$30,$01650 db $B5,$32,$08,$00,$02,$25,$80651 652 db $5B,$09,$2C,$2D,$2E,$2F,$4E,$55,$E2,$10,$00,$03,$6A,$B6,$AA,$E4653 db $18,$C9,$8C,$82,$12,$84,$81,$02,$07654 655 db $09,$22,$58,$62,$20,$21,$39,$3D,$3E,$3F,$C0,$11,$0D,$00,$27,$35656 db $02,$A7,$00,$00,$10,$37,$C1,$60,$77,$C0,$00,$B0657 658 db $3A,$2B,$19,$4D,$62,$09,$16,$17,$36,$39,$5C,$DE,$14,$07,$70,$02659 db $22,$76,$AE,$56,$A0,$41,$67,$80,$95,$B3,$30,$22,$5F,$02,$40,$60660 661 db $3A,$09,$1B,$2B,$4B,$4C,$62,$1C,$9D,$13,$00,$02,$2B,$68,$AE,$66662 db $28,$0C,$83,$4C,$5A,$C8,$98,$13,$82,$40,$06,$80663 664 db $1C,$09,$1D,$3A,$62,$4B,$2B,$38,$5A,$DB,$13,$03,$03,$61,$71,$48665 db $AB,$C9,$83,$89,$3A,$60,$8A,$D2,$E2,$24,$25,$92,$40666 667 db $09,$1C,$1D,$2B,$38,$39,$55,$57,$5A,$5B,$5C,$5D,$E2,$0F,$18,$19668 db $00,$08,$29,$F5,$0E,$3C,$00,$87,$57,$A9,$0D,$FC669 670 db $2A,$37,$09,$62,$39,$5A,$DB,$0F,$03,$47,$00,$5B,$70,$32,$7C,$28671 db $12,$43,$00,$0F,$00,$34672 673 db $09,$1F,$23,$2B,$3A,$5A,$5B,$E2,$11,$01,$F8,$16,$F0,$7B,$30,$FA674 db $08,$D0,$3A,$08,$F0,$7C,$1A,$01,$F8675 676 db $09,$5B,$29,$2C,$2D,$2E,$2F,$36,$39,$56,$5A,$E2,$0F,$0E,$00,$05677 db $E0,$36,$3A,$CE,$92,$3E,$08,$0F,$00,$49,$0A678 679 db $1C,$1D,$09,$62,$2A,$39,$5A,$DB,$0F,$00,$F0,$12,$25,$49,$CD,$1F680 db $1F,$8D,$25,$C1,$68,$01,$80681 682 db $22,$20,$09,$21,$2A,$37,$62,$5C,$DD,$13,$00,$02,$2D,$12,$8B,$61683 db $A0,$A6,$CC,$91,$28,$94,$4B,$01,$41,$C6,$40,$D0684 685 db $09,$2C,$2D,$2E,$2F,$5C,$E2,$11,$00,$1F,$17,$17,$17,$03,$79,$BC686 db $DE,$80,$81,$E0,$04,$3C,$03,$E0687 688 db $3A,$09,$2B,$36,$4B,$5A,$62,$16,$19,$39,$4D,$DB,$14,$03,$5D,$03689 db $77,$03,$97,$14,$10,$96,$58,$A1,$2F,$9E,$2A,$46,$10,$19,$00,$D0690 691 db $36,$09,$16,$4B,$62,$18,$34,$4C,$CD,$12,$03,$00,$10,$A4,$34,$82692 db $E5,$3C,$00,$84,$6E,$14,$C8,$04,$DC,$80,$C0693 694 db $2A,$37,$0B,$62,$5B,$5C,$DD,$0F,$80,$00,$3C,$30,$26,$44,$43,$45695 db $55,$50,$70,$FB,$00,$34696 697 db $2A,$0B,$4C,$E2,$0E,$80,$01,$82,$83,$48,$46,$46,$84,$C4,$20,$A0698 db $A0,$1A699 700 db $2A,$4B,$0B,$37,$E2,$0D,$83,$80,$18,$29,$AE,$02,$30,$12,$49,$14701 db $02,$8D702 703 db $1F,$23,$0B,$62,$5B,$CD,$10,$83,$40,$25,$85,$94,$30,$F1,$C6,$92704 db $42,$DA,$07,$60,$C0,$0D705 706 db $3A,$1F,$62,$2B,$5B,$A3,$0E,$80,$01,$B2,$DF,$59,$0C,$20,$69,$80707 db $E0,$00,$70,$03708 709 db $0B,$1F,$23,$3A,$2B,$5A,$62,$59,$DB,$12,$80,$01,$55,$26,$31,$7B710 db $68,$CC,$0B,$B0,$99,$A7,$10,$02,$0C,$80,$34711 712 db $09,$5A,$5B,$62,$21,$22,$2A,$2C,$2D,$2E,$2F,$3D,$3E,$3F,$C0,$14713 db $02,$C0,$6F,$80,$9F,$9F,$4E,$F9,$13,$9C,$3F,$7F,$14,$08,$0A,$08714 db $1A,$02,$C0715 716 db $09,$2C,$2D,$2E,$2F,$62,$4B,$4C,$CD,$11,$03,$20,$10,$10,$04,$D3717 db $84,$D0,$5E,$1B,$2F,$1A,$10,$00,$06,$40718 719 db $2B,$3A,$09,$4B,$62,$58,$5A,$DB,$0F,$03,$80,$30,$3E,$06,$D4,$64720 db $B0,$2C,$AF,$4D,$AE,$0F,$C6721 722 db $09,$37,$62,$2B,$3A,$4B,$5A,$DB,$10,$03,$00,$7A,$04,$03,$B7,$B4723 db $7C,$61,$F9,$2D,$BE,$08,$00,$0C724 725 db $1E,$0B,$58,$59,$46,$E2,$0F,$83,$C0,$13,$62,$26,$07,$29,$40,$88726 db $99,$34,$2B,$02,$80727 728 db $2A,$0B,$5A,$62,$4C,$DB,$0F,$83,$40,$14,$60,$12,$4E,$54,$08,$32729 db $48,$0F,$50,$50,$34730 731 db $1E,$0B,$56,$5A,$5B,$E2,$0D,$80,$01,$32,$22,$00,$39,$4F,$08,$88732 db $51,$43,$40733 734 db $1C,$1D,$0B,$62,$4B,$D8,$0E,$81,$A0,$49,$61,$24,$AD,$30,$00,$B6735 db $16,$4E,$3C,$0C736 737 db $2B,$3A,$0B,$2A,$4D,$55,$5A,$E2,$10,$83,$F0,$09,$21,$25,$83,$06738 db $7C,$50,$93,$AC,$A0,$61,$3C,$68739 740 db $1F,$23,$0B,$62,$CC,$0E,$83,$40,$2D,$19,$28,$09,$00,$4A,$E2,$C0741 db $C0,$00,$34742 743 db $21,$22,$09,$62,$2A,$4C,$CD,$10,$03,$40,$30,$07,$08,$9F,$5C,$A6744 db $95,$7D,$10,$06,$03,$80,$D0745 746 db $22,$20,$09,$21,$62,$5A,$DB,$0E,$03,$80,$18,$1E,$1C,$95,$37,$25747 db $09,$A9,$52,$86,$3E748 749 db $09,$3A,$56,$58,$5A,$5B,$E2,$0C,$00,$00,$40,$06,$51,$E1,$F0,$A7750 db $10,$08,$0D751 752 db $3A,$62,$09,$2B,$4B,$5A,$5B,$AA,$11,$02,$80,$FC,$83,$D8,$53,$58753 db $F4,$E5,$0D,$F8,$41,$D9,$F0,$40,$0A754 755 db $2B,$3A,$57,$58,$0B,$46,$59,$E2,$10,$80,$03,$15,$32,$29,$F9,$3A756 db $AE,$C1,$A9,$F5,$44,$00,$F0,$C0757 758 db $1C,$1D,$62,$0B,$18,$2A,$35,$57,$58,$D9,$12,$82,$80,$21,$28,$4F759 db $30,$2D,$BD,$00,$42,$11,$72,$53,$A0,$19,$02,$80760 761 db $1C,$36,$0B,$16,$1D,$5A,$62,$2A,$5B,$E1,$14,$80,$02,$31,$11,$58762 db $88,$8A,$06,$46,$4E,$E9,$33,$2B,$9B,$05,$38,$0D,$80,$D0763 764 db $0B,$1F,$23,$5A,$14,$5B,$E2,$0F,$80,$01,$6D,$B9,$98,$38,$8D,$40765 db $09,$E8,$00,$4D,$0F,$80766 767 db $0B,$60,$E1,$0E,$80,$01,$11,$10,$C2,$24,$88,$09,$22,$48,$2A,$22768 db $20769 770 db $23,$1F,$0B,$5A,$62,$14,$5B,$E1,$11,$83,$80,$F2,$C8,$B2,$50,$C3771 db $70,$3F,$25,$AF,$A5,$80,$68,$00,$1C772 773 db $20,$21,$09,$62,$14,$39,$4D,$5A,$DB,$12,$0C,$AC,$02,$52,$42,$0C774 db $0D,$D1,$C2,$C9,$4E,$91,$50,$0A,$00,$05,$80775 776 db $1B,$5A,$09,$2A,$55,$E2,$0D,$00,$00,$82,$87,$8C,$52,$74,$09,$8A777 db $06,$8C,$50778 779 db $09,$5B,$3A,$4B,$2B,$55,$E2,$0D,$00,$00,$C5,$36,$04,$61,$47,$C7780 db $B8,$A8,$03,$40781 782 db $09,$3A,$62,$2B,$5A,$5B,$5C,$DD,$11,$03,$00,$1F,$A3,$83,$12,$9D783 db $AA,$C2,$B5,$E5,$80,$F2,$1F,$00,$60784 785 db $0B,$2B,$4B,$3A,$4E,$5C,$5D,$61,$E2,$0F,$80,$00,$32,$4E,$0E,$10786 db $2A,$6C,$05,$21,$00,$0D,$00,$36787 788 db $1C,$1D,$4B,$0B,$2A,$62,$B5,$12,$83,$C0,$3A,$48,$5B,$38,$19,$F3789 db $1A,$32,$CB,$2C,$93,$06,$86,$80,$3C790 791 db $0B,$4B,$29,$E2,$0C,$81,$A0,$65,$08,$60,$80,$28,$28,$40,$21,$40792 793 db $1E,$55,$5A,$5B,$E2,$0D,$80,$02,$C4,$44,$00,$C0,$08,$88,$80,$68794 db $00,$1C795 796 db $0B,$2B,$3A,$45,$4B,$56,$57,$59,$E2,$0F,$80,$00,$82,$72,$0C,$04797 db $D6,$80,$40,$2C,$6C,$10,$01,$C0798 799 db $0B,$16,$18,$1B,$62,$17,$1A,$1F,$23,$2A,$5C,$DD,$11,$80,$C0,$3B800 db $7B,$E0,$5E,$82,$07,$C0,$26,$B2,$84,$D0,$03,$C8,$06801 802 db $22,$09,$20,$62,$21,$2A,$38,$4B,$DA,$13,$34,$2C,$04,$C5,$08,$C0803 db $48,$70,$2D,$B8,$C2,$51,$41,$31,$42,$29,$90,$2C804 805 db $2B,$09,$4C,$23,$2A,$3A,$4E,$56,$E2,$0E,$00,$03,$14,$91,$03,$80806 db $33,$B1,$65,$20,$02,$48,$68807 808 db $16,$09,$19,$17,$62,$18,$5C,$DD,$10,$00,$01,$37,$19,$20,$28,$7E809 db $04,$CD,$B2,$78,$E0,$0F,$A8,$0E810 811 db $19,$09,$16,$62,$5C,$17,$59,$DD,$11,$03,$40,$32,$46,$49,$7E,$07812 db $07,$1A,$9E,$96,$4C,$05,$0F,$C0,$1A813 814 db $1C,$2A,$0B,$1D,$4B,$15,$5A,$5B,$E2,$12,$83,$20,$26,$22,$D4,$D2815 db $4C,$00,$05,$11,$17,$0C,$13,$B0,$52,$40,$E0816 817 db $1C,$4B,$0B,$1D,$29,$62,$B5,$12,$83,$C0,$2C,$9A,$49,$28,$33,$E3818 db $02,$44,$9B,$AE,$E1,$46,$14,$07,$80819 820 db $0B,$1C,$1D,$2A,$62,$29,$CB,$0F,$80,$03,$6E,$5A,$CC,$68,$20,$47821 db $3E,$F0,$40,$00,$34,$0E822 823 db $1C,$5A,$62,$0B,$1D,$2A,$45,$59,$DB,$10,$81,$40,$6D,$18,$11,$19824 db $50,$95,$80,$44,$70,$88,$00,$96,$80825 826 db $36,$18,$62,$0B,$34,$5A,$DB,$0F,$83,$00,$25,$A4,$90,$01,$ED,$05827 db $90,$97,$81,$F0,$00,$18828 829 db $16,$23,$0B,$1F,$2A,$5A,$62,$18,$36,$DB,$13,$8D,$00,$31,$25,$CC830 db $DC,$E0,$0A,$64,$08,$E4,$33,$1B,$80,$74,$50,$00,$68831 832 db $62,$09,$21,$22,$2C,$2D,$2E,$2F,$3D,$3E,$3F,$40,$4C,$CD,$12,$02833 db $00,$01,$2E,$74,$C6,$53,$F8,$7B,$E1,$AD,$9F,$41,$0B,$A0,$00,$20834 835 db $22,$09,$20,$21,$62,$5A,$DB,$10,$00,$01,$35,$35,$30,$26,$A6,$26836 db $1C,$79,$40,$28,$3E,$A0,$38837 838 db $09,$16,$17,$19,$18,$5A,$5B,$62,$D7,$14,$03,$60,$13,$74,$9C,$53839 db $80,$C9,$98,$40,$BB,$C2,$6A,$42,$1A,$1A,$40,$0D,$80840 841 db $36,$17,$09,$16,$4B,$62,$19,$2A,$2B,$34,$D8,$13,$03,$20,$11,$10842 db $99,$D3,$66,$0A,$00,$4C,$DC,$76,$E1,$83,$C0,$53,$80,$64843 844 db $0B,$4A,$E1,$0B,$82,$80,$00,$04,$91,$24,$81,$24,$49,$23845 846 db $0B,$1C,$1D,$4B,$14,$35,$58,$E2,$10,$83,$F0,$0B,$22,$DC,$68,$98847 db $F4,$11,$C2,$8C,$D1,$F1,$04,$40848 849 db $16,$1F,$23,$0B,$18,$2A,$5D,$62,$29,$DC,$12,$83,$60,$33,$55,$49850 db $99,$64,$16,$3A,$6C,$C4,$43,$11,$C0,$68,$D1,$60851 852 db $1F,$23,$62,$0B,$18,$2A,$36,$5C,$16,$17,$57,$DB,$14,$80,$03,$31853 db $31,$E4,$C4,$E5,$45,$87,$C2,$8C,$73,$46,$3B,$A0,$6C,$B6,$C0,$28854 855 db $0B,$1F,$23,$62,$16,$17,$36,$4D,$5A,$DB,$11,$81,$60,$2A,$A4,$99856 db $A2,$CE,$10,$E9,$66,$B3,$86,$F5,$9C,$02,$01857 858 db $0B,$16,$1F,$23,$5C,$5D,$62,$17,$18,$1B,$2A,$B6,$11,$80,$68,$1D859 db $99,$DF,$CE,$45,$5B,$41,$91,$90,$55,$A1,$E8,$06,$06860 861 db $3A,$09,$4B,$62,$2B,$58,$D9,$0F,$03,$40,$79,$41,$40,$84,$93,$35862 db $9D,$25,$40,$00,$5F,$80863 864 db $3A,$09,$62,$2A,$2B,$38,$5A,$DB,$0F,$03,$03,$C2,$81,$F1,$84,$44865 db $01,$C8,$8A,$1F,$82,$B4,$0C866 867 db $09,$19,$16,$18,$5A,$62,$17,$38,$4C,$4D,$DB,$12,$03,$3B,$00,$06868 db $02,$B5,$73,$D9,$9B,$A8,$0F,$38,$40,$21,$80,$00,$C8869 870 db $09,$2B,$36,$62,$2A,$3A,$45,$4B,$D8,$0F,$02,$C0,$02,$A8,$E0,$CA871 db $0D,$44,$82,$48,$49,$63,$60,$60872 873 db $3A,$2B,$36,$09,$62,$17,$18,$5A,$5B,$16,$AA,$16,$00,$03,$55,$5A874 db $EE,$6A,$B3,$E0,$6C,$DD,$8C,$2D,$6E,$38,$61,$31,$12,$89,$88,$90875 db $30876 877 db $09,$5A,$2B,$62,$18,$56,$D9,$0D,$00,$03,$E3,$3D,$C0,$23,$05,$1A878 db $22,$A1,$A2,$82879 880 db $09,$2B,$2A,$54,$55,$5A,$E2,$0D,$00,$03,$10,$5E,$60,$08,$A3,$E0881 db $F0,$D0,$40,$A0882 883 db $1B,$09,$62,$1A,$39,$4C,$CD,$10,$03,$38,$04,$90,$92,$68,$57,$C5884 db $04,$93,$C9,$20,$14,$28,$0C885 886 db $2B,$09,$62,$1A,$2A,$36,$3A,$4B,$D5,$0F,$00,$02,$C0,$30,$71,$04887 db $85,$32,$D6,$D1,$20,$20,$01,$40888 889 db $2B,$3A,$09,$5B,$E2,$10,$00,$01,$2C,$6B,$07,$33,$58,$92,$B8,$B2890 db $1A,$C0,$D0,$B2,$80891 892 db $3A,$09,$2A,$62,$2B,$39,$CB,$0E,$3C,$00,$00,$18,$D7,$54,$23,$E1893 db $08,$46,$00,$51,$A0894 895 db $3A,$09,$2A,$4B,$62,$2B,$B9,$0E,$03,$BE,$01,$40,$A0,$8A,$40,$C4896 db $17,$CC,$73,$60,$4D897 898 db $09,$36,$18,$5A,$62,$16,$38,$4E,$DB,$0F,$03,$03,$41,$C0,$9A,$05899 db $48,$5C,$30,$6D,$04,$E4,$20,$2C900 901 db $09,$17,$19,$62,$16,$18,$32,$56,$5A,$DB,$10,$00,$00,$1C,$40,$B4902 db $1D,$05,$89,$9A,$C3,$34,$03,$64,$00,$68903 904 db $09,$16,$18,$62,$17,$36,$55,$5A,$DB,$0E,$02,$C0,$20,$70,$16,$1B905 db $40,$09,$AC,$D2,$70,$10,$68906 907 db $1B,$09,$2B,$3A,$4C,$4D,$54,$E2,$0E,$00,$01,$24,$9C,$68,$3E,$51908 db $43,$30,$49,$1F,$95,$ED909 910 db $2B,$09,$62,$3A,$5A,$DB,$0D,$00,$01,$01,$28,$13,$CA,$33,$0A,$3A911 db $01,$1A,$80912 913 db $2B,$3A,$09,$62,$1A,$1B,$29,$2A,$5A,$DB,$13,$02,$C0,$74,$51,$9D914 db $61,$6A,$1C,$50,$15,$31,$11,$31,$06,$D1,$33,$28,$88915 916 db $09,$16,$1F,$29,$5B,$62,$18,$23,$36,$4E,$D5,$10,$32,$00,$13,$CB917 db $C1,$A9,$B0,$11,$81,$90,$AA,$D9,$01,$07,$BA918 919 db $09,$16,$19,$23,$36,$5A,$62,$1F,$38,$46,$D6,$10,$00,$E0,$2A,$70920 db $65,$89,$A6,$86,$44,$1A,$0B,$BD,$9D,$08,$3C921 922 db $23,$17,$35,$62,$16,$18,$39,$3D,$3E,$3F,$40,$4C,$CD,$10,$34,$00923 db $27,$19,$02,$56,$29,$5F,$37,$C5,$84,$44,$3B,$E0,$7D924 925 db $09,$60,$E1,$0B,$00,$00,$84,$21,$52,$24,$48,$C2,$10,$80926 927 db $09,$14,$48,$E1,$0B,$00,$01,$08,$41,$52,$24,$C9,$1A,$21,$08928 929 db $47,$38,$E2,$0B,$05,$C0,$11,$00,$00,$22,$09,$00,$00,$90930zw.asm5403 5404 mensajes.asm1 17 44historia_1a:45 db 0,$10 OR 946 47 db $09,$14,$00,$17,$01,$13,$00,$13,$4f48 db $05,$01,$13,$19,$aE50historia_1b:51 db 0,$10 OR 1452 53 db $0e,$0f,$00,$1a,$0f,$0d,$02,$09,$05,$00,$03,$01,$4e54 db $04,$05,$06,$05,$01,$14,$00,$0d,$05,$ae56historia_2:57 db 1,$20 OR 1258 59 db $17,$05,$0c,$0c,$00,$04,$0f,$0e,$05,$6e60 db $13,$03,$09,$05,$0e,$14,$09,$13,$14,$5361 db $12,$05,$13,$03,$15,$05,$04,$34,$00,$3e,$bf63historia_3a:64 db 2,$10 OR 1365 66 db $09,$30,$0d,$00,$04,$0f,$09,$0e,$07,$00,$0d,$5967 db $02,$05,$13,$9469historia_3b:70 db 2,$10 OR 1271 72 db $09,$00,$0c,$09,$0b,$05,$00,$14,$4f73 db $13,$01,$16,$05,$00,$10,$05,$0f,$10,$0c,$8575historia_4a:76 db 0,$10 OR 1277 78 db $09,$00,$04,$09,$04,$0e,$30,$14,$00,$13,$01,$5779 db $10,$05,$0f,$10,$0c,$8581historia_4b:82 db 0,$10 OR 1383 84 db $09,$14,$00,$09,$13,$00,$13,$0f,$00,$13,$01,$8486historia_5:87 db 0,$20 OR 988 89 db $17,$01,$09,$14,$2e,$00,$09,$30,$4d90 db $12,$05,$03,$05,$09,$16,$09,$0e,$4791 db $13,$0f,$0d,$05,$14,$08,$09,$0e,$8793historia_6:94 db 3,$30 OR 1195 96 db $10,$0c,$05,$01,$13,$05,$00,$08,$05,$0c,$5097 db $0d,$05,$2e,$00,$09,$30,$4d98 db $13,$15,$12,$12,$0f,$15,$0e,$04,$05,$84100historia_7a:101 db 0,$10 OR 10102 103 db $09,$00,$03,$0f,$0d,$05,$00,$14,$4f104 db $13,$01,$16,$05,$00,$19,$0f,$95106historia_7b:107 db 0,$10 OR 11108 109 db $09,$30,$0d,$00,$08,$05,$12,$05,$00,$14,$4f110 db $12,$05,$13,$03,$15,$05,$00,$19,$0f,$95112historia_8:113 db 0,$30 OR 12114 115 db $19,$0f,$15,$30,$12,$05,$00,$14,$0f,$4f116 db $0c,$01,$14,$45117 db $09,$30,$0d,$00,$09,$0e,$06,$05,$03,$14,$05,$84119historia_9a:120 db 0,$10 OR 11121 122 db $09,$0e,$06,$05,$03,$14,$05,$04,$6f123 db $08,$0f,$17,$af125historia_9b:126 db 0,$10 OR 12127 128 db $17,$08,$01,$14,$00,$01,$12,$05,$00,$19,$0f,$55129 db $13,$01,$19,$09,$0e,$07,$af131historia_10:132 db 4,$30 OR 12133 134 db $01,$01,$12,$07,$08,$2e,$00,$08,$05,$0c,$10,$6e135 db $07,$12,$12,$ae136 137historia_11a:138 db 0,$10 OR 12139 140 db $10,$0f,$0f,$12,$00,$07,$09,$12,$0c,$6e141 db $13,$08,$05,$00,$17,$01,$13,$00,$03,$15,$14,$85143historia_11b:144 db 0,$10 OR 10145 146 db $09,$00,$03,$0f,$15,$0c,$04,$0e,$30,$54147 db $13,$01,$16,$05,$00,$08,$05,$92149historia_12:150 db 1,$20 OR 11151 152 db $13,$03,$09,$05,$0e,$14,$09,$13,$14,$53153 db $12,$05,$13,$03,$15,$05,$04,$34,$3e,$7f154 db $07,$0f,$0f,$04,$00,$17,$0f,$12,$0b,$ae156historia_13a:157 db 2,$10 OR 7158 159 db $09,$30,$0d,$00,$14,$08,$45160 db $02,$05,$13,$14,$ae162historia_13b:163 db 2,$10 OR 11164 165 db $09,$30,$4d166 db $15,$0e,$02,$05,$01,$14,$01,$02,$0c,$05,$ae168historia_14a:169 db 0,$10 OR 12170 171 db $17,$08,$01,$54172 db $13,$03,$09,$05,$0e,$14,$09,$13,$14,$13,$af174historia_14b:175 db 0,$10 OR 12176 177 db $14,$08,$05,$12,$05,$00,$01,$12,$45178 db $13,$03,$09,$05,$0e,$14,$09,$13,$14,$13,$af180historia_15:181 db 0,$20 OR 14182 183 db $14,$08,$05,$12,$05,$00,$09,$53184 db $01,$0e,$0f,$14,$08,$05,$12,$00,$13,$09,$07,$0e,$01,$8c186historia_16:187 db 3,$40 OR 12188 189 db $08,$05,$0c,$10,$00,$0d,$05,$2e,$00,$09,$30,$4d190 db $08,$09,$04,$04,$05,$0e,$00,$02,$15,$54191 db $13,$0f,$0d,$05,$14,$08,$09,$0e,$47192 db $06,$0f,$0c,$0c,$0f,$17,$13,$00,$0d,$05,$ae194historia_17a:195 db 0,$10 OR 11196 197 db $19,$0F,$15,$30,$12,$05,$00,$08,$05,$12,$45198 db $07,$12,$05,$01,$14,$ae200historia_17b:201 db 0,$10 OR 12202 203 db $01,$10,$10,$05,$01,$12,$13,$00,$14,$08,$01,$54204 db $09,$30,$0d,$00,$0f,$0e,$00,$14,$09,$0d,$45205 db $14,$0f,$00,$13,$01,$16,$05,$00,$19,$0f,$95207historia_18:208 db 0,$40 OR 13209 210 db $13,$0f,$00,$19,$0f,$15,$00,$06,$0f,$15,$07,$08,$54211 db $19,$0f,$15,$12,$00,$17,$01,$99213historia_19a:214 db 0,$10 OR 10215 216 db $05,$18,$03,$15,$13,$05,$00,$0d,$05,$af218historia_19b:219 db 0,$10 OR 13220 221 db $09,$14,$00,$09,$13,$00,$0d,$19,$00,$17,$0f,$12,$8b223historia_20:224 db 0,$40 OR 14225 226 db $09,$00,$17,$01,$13,$0e,$30,$14,$00,$07,$0f,$09,$0e,$47227 db $14,$0f,$00,$13,$08,$0f,$17,$00,$0d,$59228 db $10,$0f,$17,$05,$12,$93230historia_21a:231 db 0,$10 OR 13232 233 db $17,$01,$09,$14,$2e,$00,$01,$12,$05,$00,$19,$0f,$55234 db $14,$08,$05,$00,$02,$01,$04,$00,$07,$15,$19,$af236historia_21b:237 db 0,$10 OR 14238 239 db $04,$0f,$00,$19,$0f,$15,$00,$08,$15,$12,$54240 db $05,$16,$05,$12,$19,$02,$0f,$04,$19,$af242historia_22:243 db 4,$50 OR 13244 245 db $04,$0f,$00,$19,$0f,$15,$00,$17,$01,$0e,$54246 db $14,$0f,$00,$13,$05,$45247 db $13,$0f,$0d,$05,$14,$08,$09,$0e,$47248 db $12,$05,$01,$0c,$0c,$19,$00,$13,$03,$01,$12,$19,$af250historia_23a:251 db 0,$10 OR 12252 253 db $17,$08,$01,$14,$00,$01,$00,$0e,$01,$13,$14,$59254 db $1a,$0f,$0d,$02,$09,$05,$ae256historia_23b:257 db 0,$10 OR 14258 259 db $13,$0f,$00,$0d,$01,$0e,$19,$00,$08,$01,$12,$0d,$05,$44260 db $09,$0e,$0e,$0f,$03,$05,$0e,$14,$13,$ae262historia_24:263 db 1,$20 OR 11264 265 db $0d,$09,$13,$13,$09,$0f,$4e266 db $03,$0f,$0d,$10,$0c,$05,$14,$05,$6e267 db $13,$03,$09,$05,$0e,$14,$09,$13,$14,$53268 db $12,$05,$13,$03,$15,$05,$04,$34,$3e,$bf270historia_25a:271 db 2,$10 OR 11272 273 db $09,$00,$04,$05,$13,$05,$12,$16,$45274 db $01,$00,$0d,$05,$04,$01,$8c276historia_25b:277 db 2,$10 OR 12278 279 db $09,$30,$0d,$00,$10,$12,$0f,$15,$04,$00,$0f,$46280 db $0d,$19,$13,$05,$0c,$06,$ae282historia_26a:283 db 0,$10 OR 12284 285 db $09,$00,$04,$09,$04,$0e,$30,$14,$00,$13,$01,$57286 db $01,$0e,$19,$02,$0f,$04,$99288historia_26b:289 db 0,$10 OR 7290 291 db $10,$05,$0F,$10,$0C,$05,$6f292 db $17,$08,$05,$12,$05,$af294historia_27:295 db 0,$20 OR 13296 297 db $09,$30,$16,$05,$00,$13,$05,$0e,$14,$00,$19,$0f,$55298 db $01,$00,$08,$05,$0c,$09,$03,$0f,$10,$14,$05,$92300historia_28a:301 db 5,$10 OR 10302 303 db $09,$30,$0c,$0c,$00,$02,$05,$00,$0f,$4e304 db $14,$09,$0d,$05,$00,$14,$4f305 db $17,$01,$14,$03,$08,$00,$14,$16,$ae307historia_28b:308 db 5,$10 OR 12309 310 db $09,$30,$16,$05,$00,$14,$0f,$00,$06,$05,$05,$44311 db $0d,$19,$00,$03,$01,$14,$93313mensaje_14: 314 db $00,$01,$00,$07,$01,$0d,$05,$00,$02,$99316mensaje_21: 317 db $14,$08,$05,$00,$13,$14,$0f,$12,$19,$00,$13,$0f,$00,$06,$01,$92319mensaje_22: 320 db $14,$08,$05,$00,$13,$10,$05,$03,$09,$01,$0c,$00,$14,$05,$01,$0d321 db $00,$12,$05,$03,$05,$09,$16,$05,$04,$00,$01,$00,$13,$0f,$53322 db $40 323 db $03,$01,$0c,$0c,$00,$06,$12,$0f,$0d,$00,$14,$08,$05,$00324 db $07,$0f,$16,$05,$12,$0e,$0d,$05,$0e,$14,$00,$0c,$01,$02,$53325 db $40326 db $40 327 db $13,$0f,$0d,$05,$14,$08,$09,$0e,$07,$00,$17,$05,$09,$12,$04,$00328 db $08,$01,$13,$00,$08,$01,$10,$10,$05,$0e,$05,$44329 db $40 330 db $13,$0f,$0d,$05,$14,$08,$09,$0e,$07,$00,$01,$02,$0f,$15,$14,$00331 db $1a,$0f,$0d,$02,$09,$05,$53332 db $40333 db $40 334 db $02,$05,$06,$0f,$12,$05,$00,$14,$08,$05,$19,$00335 db $03,$0f,$15,$0c,$04,$00,$12,$05,$03,$05,$09,$16,$45336 db $40 337 db $0d,$0f,$12,$05,$00,$09,$0e,$06,$0f,$12,$0d,$01,$14,$09,$0f,$0e338 db $00,$14,$08,$05,$00,$0d,$05,$13,$13,$01,$07,$45339 db $40 340 db $13,$15,$04,$04,$05,$0e,$0c,$19,$00,$13,$14,$0f,$10,$53341 db $40342 db $40 343 db $17,$09,$0c,$0c,$00344 db $04,$05,$0c,$14,$01,$34,$21,$00,$01,$0e,$04,$00345 db $04,$05,$0c,$14,$01,$34,$22,$00,$13,$15,$12,$16,$09,$16,$45346 db $40 347 db $14,$08,$09,$13,$00,$0d,$09,$13,$13,$09,$0f,$0e,$af349mensaje_23: 350 db $13,$03,$09,$05,$0e,$14,$09,$13,$94351mensaje_24: 352 db $04,$09,$12,$05,$03,$14,$0f,$92353mensaje_25: 354 db $04,$05,$0c,$14,$41355 db $14,$05,$01,$0d,$30,$53356 db $0f,$10,$05,$12,$01,$14,$0f,$92357mensaje_26: 358 db $04,$05,$0c,$14,$01,$34,$a1359mensaje_27: 360 db $04,$05,$0c,$14,$01,$34,$a2362zw.asm5406 5407retrato_telefonista:5408 incbin "retrato3.dat"5410 5411retrato_delta_1:5412 incbin "retrato4.dat"5414 5415retrato_delta_2:5416 incbin "retrato5.dat"5418 5421retrato_investigadora2:5422 incbin "retrato8.dat"5424 5427retrato_jefe2a:5428 incbin "retrato9.dat"5430 5433retrato_jefe2b:5434 incbin "retrato10.dat"5436 5439logo_mio:5440 incbin "milogo.dat"5442graf_bitmap:5443 incbin "combina1.bin.plet5"5444graf_color:5445 incbin "combina2.bin.plet5"5446figuras_sprites:5447 incbin "combina3.bin.plet5"5448color_letras:5449 incbin "combina4.bin.plet5"5451logo_1:5452 incbin "logo1.bin.plet5"5453logo_2:5454 incbin "logo2.bin.plet5"5455logo_21:5456 incbin "logo21.bin.plet5"5457logo_22:5458 incbin "logo22.bin.plet5"5459fin_1:5460 incbin "fin1.bin.plet5"5461fin_2:5462 incbin "fin2.bin.plet5"5463 5464musica:5465 incbin "musica.bin.plet5"546754705472 db "260612"5474final_rom:5476 if MEMOTECH=15477 if CPM=15478 ds $80-($ and $7f),$005479 ORG $9c00,$9fB05480 else5481 ds $80-(($+4) and $7f),$005482 ORG $dc00,$dfB05483 endif5484 else5485 ds $80-($ and $7f),$005486 ORG $9c00,$9fB05487 endif5489sprites:5490 RB 1285491sprites_especiales:5492 RB 16 5498 5501jug1: 5502jug1_x: RB 1 5503jug1_y: RB 1 5504jug1_s: RB 1 5505jug1_c: RB 1 5506jug1_r: RB 1 5507jug1_n: RB 1 5508jug1_l: RB 1 5509jug1_e: RB 1 5510jug1_a: RB 1 5511jug1_p: RB 3 5512jug1_o: RB 2 5513jug1_f: RB 1 5514jug1_g: RB 1 5515jug1_d: RB 2 5516jug1_m: RB 2 5517jug1_v: RB 1 5518 RB 1 5519 RB 2 5520 RB 3 5521 RB 1 5522 RB 2 5523 RB 2 5524 RB 2 5525 RB 1 5526 RB 1 5527 RB 1 5528 RB 1 5529 RB 2 5530 RB 2 5531 RB 1 5532 RB 1 5533 RB 1 5535jug2: 5536 RB 455538monigotes: 5539 RB (MAX_MONIGOTES*2)*165541 5544nivel1: RB 12*6 5545nivel2: RB 12*6 5547 5555bits1: RB 51 5556bits2: RB 51 5558salva_puntos: RB 25560 5563ticks: RB 25564ciclo: RB 15566 5577modo: RB 15578offset: RB 2 5579hist_tem: RB 1 5580nmi: RB 1 5582 5587ef_voz1: RB 2 5588ef_voz2: RB 2 5589ef_voz3: RB 2 5590ef_ruido: RB 1 5591ef_mezc: RB 1 5592ef_vol1: RB 1 5593ef_vol2: RB 1 5594ef_vol3: RB 1 5595ef_envo: RB 2 5596ef_envm: RB 1 5597ef_jeje: RB 1 5598ef_cont: RB 1 5600ef_band: RB 1 5601ef_ritmo: RB 1 5602ef_cont1: RB 1 5603ef_cont2: RB 1 5604ef_cont3: RB 1 5605ef_frec3: RB 2 5606ef_cont4: RB 1 5607ef_frec4: RB 2 5608ef_cont5: RB 1 5609ef_frec5: RB 2 5610ef_cont6: RB 1 5611ef_frec6: RB 2 5612ef_frec7: RB 2 5613ef_frec8: RB 2 5614ef_cont7: RB 1 5615ef_cont8: RB 1 5616ef_cont9: RB 1 5617ef_frec9: RB 2 5618ef_tipo9: RB 1 5619ef_cont10: RB 1 5620ef_frec10: RB 2 5621ef_cont11: RB 1 5622ef_inicio: RB 2 5623ef_ap: RB 2 5624ef_t: RB 1 5625ef_ta: RB 1 5626ef_cn: RB 1 5627ef_n: RB 1 5628ef_b: RB 1 5629ef_ac1: RB 1 5630ef_ac2: RB 1 5631ef_ac3: RB 1 5632ef_env: RB 1 5633ef_tamb: RB 1 5635ganado: RB 1 5636record: RB 3 5637quien: RB 1 5639 if MEMOTECH=15640 if CPM=15641 ORG $a0005642 else5643 ORG $e0005644 endif5645 else5646 ORG $a0005647 endif5648PILA: 5650